(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{659:function(R,m,o){"use strict";o.r(m);var n=o(165),f=o(249),r=o(88),h=o(594),g=o(247),d=o(589),u=function(){var s=this,i=s._self._c;return i(h.a,{attrs:{persistent:"","no-click-animation":"",scrollable:"","max-width":"1000px",transition:"dialog-bottom-transition"},model:{value:s.dialogPermission,callback:function(a){s.dialogPermission=a},expression:"dialogPermission"}},[i(f.a,{attrs:{loading:s.loadingPermission}},[i(r.c,[i("span",{staticClass:"subtitle-2"},[s._v(`
        `+s._s(s.dialogTitle)+`
      `)]),s._v(" "),i(d.a),s._v(" "),i(n.a,{attrs:{color:"red darken-1",dark:"",icon:"",small:""},on:{click:s.closeDialogPermission}},[i(g.a,[s._v("mdi-close-circle")])],1)],1),s._v(" "),i(r.b,[i("div",[i("LazyMasterPermissionList",{ref:"childDetails"})],1)]),s._v(" "),i(r.a,[s.canAddData?i(n.a,{staticClass:"white--text",attrs:{small:"",color:"orange darken-1"},on:{click:function(a){return s.$refs.childDetails.addLine()}}},[s._v(`
        Add Line
      `)]):s._e(),s._v(" "),i(d.a),s._v(" "),s.canAddData?i(n.a,{attrs:{color:"green darken-1",dark:"",small:"",loading:s.loadingPermission},on:{click:function(a){return s.saveRolePermission()}}},[s._v(`
        Save
      `)]):s._e()],1)],1)],1)},v=[],x=o(4),P={name:"DialogPermission",data:function(){return{loadingPermission:!1,dialogPermission:!1,dialogTitle:"",role:"",userRole:[],form:{},canAddData:!1,type:""}},mounted:function(){this.getPermissionList()},methods:{getPermissionList:function(){var s=this;this.$axios.get("/api/master/permissions").then(function(i){s.$auth.$storage.setState("permission_list",i.data.simple)})},openDialogPermission:function(s,i){this.dialogTitle=i,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},s),this.canAddData=!0,this.getPermissionUser(s),this.type="user"},getPermissionUser:function(s){var i=this;this.userRole=null,this.$axios.get("/api/master/user/permission",{params:{form:s}}).then(function(e){i.$refs.childDetails.setDataToDetails(e.data.data)}).finally(function(e){i.loadingPermission=!1})},closeDialogPermission:function(){this.dialogPermission=!1,this.userRole=[],this.canAddData=!1},openRolePermissions:function(s,i,e){var a=this,y=this;this.type=e,this.dialogTitle=i,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},s);var l="";e==="user"?l="/api/master/user/roles":(this.canAddData=!0,l="/api/master/permission-role"),this.$axios.get(l,{params:{form:this.form}}).then(function(c){y.$refs.childDetails.setDataToDetails(c.data.data),a.loadingPermission=!1}).finally(function(c){a.loadingPermission=!1})},changeTab:function(s){var i=this;this.loadingPermission=!0,this.$axios.post("/api/master/permission-role",{form:s}).then(function(e){i.$refs.childDetails.setDataToDetails(e.data.data)}).finally(function(e){i.loadingPermission=!1})},getRolePermissionUser:function(s){var i=this;this.$axios.post("/api/master/user/role-permission",{item:s}).then(function(e){i.$refs.childDetails.setDataToDetails(e.data.data)}).finally(function(e){i.loadingPermission=!1})},getPermissionRole:function(s){var i=this;this.$axios.post("/api/master/permission-role",{form:this.form}).then(function(e){i.$refs.childDetails.setDataToDetails(e.data.data)}).finally(function(e){i.loadingPermission=!1})},saveRolePermission:function(){var s=this;this.loadingPermission=!0;var i=this.$refs.childDetails.getAddData(),e="";this.type==="user"?e="/api/master/user/permission":e="/api/master/permission-role",this.$axios.post(e,{details:i,form:this.form}).then(function(a){s.$swal({icon:"success",title:"Success",text:a.data.message}),s.type==="user"?s.getPermissionUser(s.form):s.getPermissionRole(s.form)}).catch(function(a){s.$swal({icon:"error",title:"Error",text:a.response.data.message})}).finally(function(a){s.loadingPermission=!1})}}},p=P,D=o(50),$=Object(D.a)(p,u,v,!1,null,null,null),T=m.default=$.exports}}]);
