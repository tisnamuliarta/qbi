(window.webpackJsonp=window.webpackJsonp||[]).push([[2,18,31],{600:function(R,D,t){"use strict";var p=t(7),M=t.n(p),h=t(10),j=t.n(h),v=t(12),I=t.n(v),T=t(13),L=t.n(T),E=t(2),x=t(4),A=t.n(x),B=t(34),C=t.n(B),a=t(51),s=t.n(a),r=t(28),d=t.n(r),O=t(8),P=t.n(O),X=t(21),dt=t.n(X),Y=t(64),Z=t.n(Y),w=t(271),mt=t.n(w),k=t(33),V=t.n(k),K=t(272),q=t.n(K),N=t(273),tt=t.n(N),S=t(274),ft=t.n(S),l=t(275),e=t.n(l),n=t(276),i=t.n(n),o=t(277),_=t.n(o),y=t(278),g=t.n(y),b=t(279),F=t.n(b),vt=t(280),Bt=t.n(vt),gt=t(281),Ut=t.n(gt),pt=t(282),Rt=t.n(pt),ht=t(283),Kt=t.n(ht),Dt=t(284),Wt=t.n(Dt),Et=t(35),$t=t.n(Et),yt=t(9),St=t.n(yt),jt=t(285),bt=t.n(jt),Ot=t(3),Pt=t(77),Mt=t(1);function et(f,u){var m=Object.keys(f);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(f);u&&(c=c.filter(function(W){return Object.getOwnPropertyDescriptor(f,W).enumerable})),m.push.apply(m,c)}return m}function G(f){for(var u=1;u<arguments.length;u++){var m=arguments[u]!=null?arguments[u]:{};u%2?et(Object(m),!0).forEach(function(c){Object(E.a)(f,c,m[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(m)):et(Object(m)).forEach(function(c){Object.defineProperty(f,c,Object.getOwnPropertyDescriptor(m,c))})}return f}var Ct=["sm","md","lg","xl"],z=["start","end","center"];function J(f,u){return Ct.reduce(function(m,c){return m[f+Object(Mt.I)(c)]=u(),m},{})}var at=function(u){return[].concat(z,["baseline","stretch"]).includes(u)},nt=J("align",function(){return{type:String,default:null,validator:at}}),st=function(u){return[].concat(z,["space-between","space-around"]).includes(u)},ot=J("justify",function(){return{type:String,default:null,validator:st}}),rt=function(u){return[].concat(z,["space-between","space-around","stretch"]).includes(u)},it=J("alignContent",function(){return{type:String,default:null,validator:rt}}),lt={align:Object.keys(nt),justify:Object.keys(ot),alignContent:Object.keys(it)},Tt={align:"align",justify:"justify",alignContent:"align-content"};function xt(f,u,m){var c=Tt[f];if(m!=null){if(u){var W=u.replace(f,"");c+="-".concat(W)}return c+="-".concat(m),c.toLowerCase()}}var _t=new Map;D.a=Ot.default.extend({name:"v-row",functional:!0,props:G(G(G({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:at}},nt),{},{justify:{type:String,default:null,validator:st}},ot),{},{alignContent:{type:String,default:null,validator:rt}},it),render:function(u,m){var c=m.props,W=m.data,At=m.children,H="";for(var It in c)H+=String(c[It]);var U=_t.get(H);return U||function(){var $;U=[];var Q;for(Q in lt)lt[Q].forEach(function(ct){var Lt=c[ct],ut=xt(Q,ct,Lt);ut&&U.push(ut)});U.push(($={"no-gutters":c.noGutters,"row--dense":c.dense},Object(E.a)($,"align-".concat(c.align),c.align),Object(E.a)($,"justify-".concat(c.justify),c.justify),Object(E.a)($,"align-content-".concat(c.alignContent),c.alignContent),$)),_t.set(H,U)}(),u(c.tag,Object(Pt.a)(W,{staticClass:"row",class:U}),At)}})},601:function(R,D,t){var p=t(378),M=t(47);R.exports=function(h,j,v){return v.get&&p(v.get,j,{getter:!0}),v.set&&p(v.set,j,{setter:!0}),M.f(h,j,v)}},602:function(R,D,t){"use strict";t.r(D);var p=t(165),M=t(250),h=t(87),j=t(596),v=t(577),I=t(248),T=t(589),L=function(){var r=this,d=r._self._c;return d(j.a,{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:r.original,"max-width":r.maxWidth,transition:"dialog-top-transition"},model:{value:r.dialog,callback:function(P){r.dialog=P},expression:"dialog"}},[d(M.a,{attrs:{outlined:""}},[d(h.c,[d("span",{staticClass:"subtitle-2"},[r._v(r._s(r.dialogTitle))]),r._v(" "),d(T.a),r._v(" "),d(p.a,{attrs:{icon:"",color:"red",dark:""},on:{click:function(P){return r.closeDialog()}}},[d(I.a,[r._v("mdi-close")])],1)],1),r._v(" "),d(v.a),r._v(" "),d(h.b,{staticClass:"pr-0 pl-0"},[r._t("content")],2),r._v(" "),d(v.a),r._v(" "),d(h.a,[r._t("addLine"),r._v(" "),d(T.a),r._v(" "),r._t("saveData")],2)],1)],1)},E=[],x={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},A=x,B=t(50),C=Object(B.a)(A,L,E,!1,null,null,null),a=D.default=C.exports},628:function(R,D,t){"use strict";t.r(D);var p=t(165),M=t(250),h=t(579),j=t(595),v=t(911),I=t(248),T=t(249),L=t(166),E=t(31),x=t(578),A=t(600),B=t(592),C=t(21),a=t(270),s=t(27),r=function(){var e=this,n=e._self._c;return n(A.a,[n(j.a,{staticClass:"mt-0",attrs:{cols:"12"}},[n(M.a,{attrs:{outlined:""}},[n(B.a,{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{type:"table"}}),e._v(" "),n(v.a,{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,headers:e.headers,items:e.allData,"items-per-page":e.itemPerPage,options:e.options,"server-items-length":e.totalData,loading:e.loading,"show-select":"",outlined:"","fixed-header":"",height:e.tableHeight,dense:"","footer-props":{"items-per-page-options":[5,10,20,50,100,-1]}},on:{"update:options":function(o){e.options=o}},scopedSlots:e._u([{key:"top",fn:function(){return[n("div",{staticClass:"pl-4 pt-2"},[n("span",{staticClass:"font-weight-medium text-h6"},[e._v(e._s(e.tableTitle))])]),e._v(" "),n("LazyMainToolbar",{attrs:{"document-status":e.documentStatus,"search-status":e.searchStatus,"item-search":e.itemSearch,"search-item":e.searchItem,search:e.search,title:e.toolbarTitle,"button-title":e.btnTitle,"new-data-multiple-item":e.itemMultiple,"show-batch-action":"","show-filter":"","show-new-data-multiple":e.showNewDataMultiple,"new-data-text":"New Transactions"},on:{emitData:e.emitData,newData:e.newData,getDataFromApi:e.getDataFromApi}})]},proxy:!0},{key:"item.document_number",fn:function(o){var _=o.item;return[n("a",{on:{click:function(g){return e.editItem(_)}}},[n("strong",{domProps:{textContent:e._s(_.document_number)}})])]}},{key:"item.transaction_no",fn:function(o){var _=o.item;return[n("a",{on:{click:function(g){return e.editItem(_)}}},[n("strong",{domProps:{textContent:e._s(_.transaction_no)}})])]}},{key:"item.status",fn:function(o){var _=o.item;return[n(h.a,{attrs:{label:"",small:"",dark:"",color:e.$formatter.statusColor(_.status)}},[e._v(`
            `+e._s(_.status)+`
          `)])]}},{key:"item.balance_due",fn:function(o){var _=o.item;return[e._v(`
          `+e._s(e.$auth.user.entity.currency.currency_symbol+" "+e.$formatter.formatPrice(_.balance_due))+`
        `)]}},{key:"item.amount",fn:function(o){var _=o.item;return[e._v(`
          `+e._s(e.$auth.user.entity.currency.currency_symbol+" "+e.$formatter.formatPrice(_.amount))+`
        `)]}},{key:"item.tags",fn:function(o){var _=o.item;return e._l(_.tags,function(y,g){return n(h.a,{key:g,staticClass:"ma-2",attrs:{dense:"",label:"",small:"",outlined:"",color:"green"}},[e._v(`
            `+e._s(y.name.en)+`
          `)])})}},{key:"item.main_account_amount",fn:function(o){var _=o.item;return[e._v(`
          `+e._s(e.$auth.user.entity.currency.currency_symbol+" "+e.$formatter.formatPrice(_.main_account_amount))+`
        `)]}},{key:"item.actions",fn:function(o){var _=o.item;return[_.status==="open"||_.status==="draft"||_.status==="partial"?n(p.a,{staticClass:"font-weight-bold text-right pr-0",attrs:{color:"secondary",text:"",small:""},on:{click:function(g){return g.stopPropagation(),e.actions("edit",_)}}},[e._v(`
            Edit
          `)]):e._e(),e._v(" "),_.status==="closed"||_.status==="canceled"?n(p.a,{staticClass:"font-weight-bold text-right pr-0",attrs:{color:"secondary",text:"",small:""},on:{click:function(g){return g.stopPropagation(),e.actions("view",_)}}},[e._v(`
            View
          `)]):e._e(),e._v(" "),n(x.a,{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(g){var b=g.on,F=g.attrs;return[n(p.a,e._g(e._b({attrs:{icon:""}},"v-btn",F,!1),b),[n(I.a,[e._v("mdi-menu-down")])],1)]}}],null,!0)},[e._v(" "),n(T.a,e._l(e.items,function(y,g){return n(L.a,{key:g,on:{click:function(F){return F.stopPropagation(),e.actions(y.action,_)}}},[n(E.b,[n(E.d,[e._v(e._s(y.text))])],1)],1)}),1)],1)]}}],null,!0)})],1),e._v(" "),n("AccountingDialogLedger",{ref:"ledger"})],1)],1)},d=[],O=t(8),P=t(7),X=t(12),dt=t(9),Y=t(13),Z=t(2),w=t(22),mt=t(4),k=t(10);function V(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(l);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(l,o).enumerable})),n.push.apply(n,i)}return n}function K(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V(Object(n),!0).forEach(function(i){Object(Z.a)(l,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(i){Object.defineProperty(l,i,Object.getOwnPropertyDescriptor(n,i))})}return l}var q={name:"TableDocument",props:{itemPerPage:{type:Number,default:20},tableHeight:{type:String,default:"70vh"},typeDocument:{type:String,default:""},typeTrans:{type:Array,default:function(){return[]}},formUrl:{type:String,default:""},tableTitle:{type:String,default:""},btnTitle:{type:String,default:"New Transaction"},tableUrl:{type:String,default:"/api/documents"},items:{type:Array,default:function(){return[{text:"Closed",action:"closed"},{text:"Cancel",action:"canceled"},{text:"Delete",action:"delete"}]}},headerTable:{type:Array,default:function(){return[]}},itemMultiple:{type:Array,default:function(){return[]}},showNewDataMultiple:{type:Boolean,default:!0}},data:function(){return{totalData:0,editedIndex:-1,loading:!0,company:[],allData:[],documentStatus:[],itemSearch:[],toolbarTitle:"",searchStatus:"",searchItem:"",search:"",form:{},defaultItem:{},options:{},itemText:"",itemAction:"",headers:this.headerTable,dateFrom:null,dateTo:null}},computed:{formTitle:function(){return this.editedIndex===-1?"New "+this.typeDocument:"Edit "+ +this.typeDocument},buttonTitle:function(){return this.editedIndex===-1?"Save":"Update"}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},created:function(){this.mappingDocument()},activated:function(){this.getDataFromApi()},mounted:function(){this.itemText=this.items[0].text,this.itemAction=this.items[0].action},methods:{newData:function(){this.$router.push({path:this.formUrl,query:{document:this.form.id}})},editItem:function(e){e.transaction_type==="JN"?this.$refs.ledger.openDialog("/api/transaction/ledger/"+e.id):(this.$auth.$storage.setState("basePath",this.$route.path),this.$router.push({path:this.$formatter.mappingAction(e.transaction_type),query:{document:e.id}}))},actions:function(e,n){switch(e){case"edit":case"view":this.editItem(n);break;case"delete":this.deleteItem(n);break;case"closed":case"canceled":this.closeItem(n,e);break}},deleteItem:function(e){var n=this;this.$swal({title:this.$t("Are you sure you want to run this action?"),text:"Data cannot be change after posted!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Save"}).then(function(i){i.value&&(n.$nuxt.$loading.start(),n.$axios.delete(n.tableUrl+"/"+e.id).then(function(o){n.getDataFromApi()}).catch(function(o){n.$swal({type:"error",title:"Error",text:o.response.data.message})}).finally(function(){n.$nuxt.$loading.finish()}))})},closeItem:function(e,n){var i=this;this.$swal({title:this.$t("Are you sure you want to run this action?"),text:"Data cannot be change after posted!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Save"}).then(function(o){o.value&&(i.$nuxt.$loading.start(),i.$axios.put(i.tableUrl+"/"+e.id,K({updateStatus:n},e)).then(function(_){i.getDataFromApi()}).catch(function(_){i.$swal({type:"error",title:"Error",text:_.response.data.message})}).finally(function(){i.$nuxt.$loading.finish()}))})},mappingDocument:function(){this.toolbarTitle=this.$helper.mapping(this.typeDocument)},emitData:function(e){this.documentStatus=e.documentStatus,this.itemSearch=e.itemSearch,this.searchStatus=e.searchStatus,this.searchItem=e.searchItem,this.search=e.search,this.filters=e.filters,this.dateFrom=e.dateFrom,this.dateTo=e.dateTo,this.getDataFromApi()},getDataFromApi:function(){var e=this;this.loading=!0;var n=this,i={searchItem:n.searchItem,documentStatus:n.documentStatus,searchStatus:n.searchStatus,search:n.search,type:this.typeDocument,typeTrans:this.typeTrans,dateFrom:this.dateFrom,dateTo:this.dateTo};this.$axios.get(this.tableUrl,{params:K(K({},n.options),i)}).then(function(o){e.loading=!1,e.allData=o.data.data,e.totalData=o.data.total,e.itemSearch=o.data.filter,e.form=Object.assign({},o.data.form),e.defaultItem=Object.assign({},o.data.form),e.company=e.$auth.$storage.getState("company")}).catch(function(o){e.loading=!1,e.$swal({type:"error",title:"Error",text:o.response.data.message})})}}},N=q,tt=t(50),S=Object(tt.a)(N,r,d,!1,null,null,null),ft=D.default=S.exports;installComponents(S,{AccountingDialogLedger:t(653).default})},653:function(R,D,t){"use strict";t.r(D);var p=t(595),M=t(587),h=t(911),j=t(600),v=function(){var a=this,s=a._self._c;return s("div",[s("DialogForm",{ref:"dialogForm",attrs:{"max-width":"1200px","dialog-title":a.$t("Journal Entry"),"button-title":"Save",original:"top"},scopedSlots:a._u([{key:"content",fn:function(){return[s(M.a,[s(j.a,[s(p.a,{staticClass:"mt-0",attrs:{cols:"12"}},[s(h.a,{staticClass:"elevation-0",attrs:{"mobile-breakpoint":0,headers:a.headers,items:a.allData,"items-per-page":150,options:a.options,"server-items-length":a.totalData,loading:a.loading,"show-select":"","fixed-header":"",height:"60vh","hide-default-footer":"",dense:"","footer-props":{"items-per-page-options":[150,250,500,-1]}},on:{"update:options":function(O){a.options=O}},scopedSlots:a._u([{key:"item.amount_credit",fn:function(O){var P=O.item;return[P.amount_credit?s("span",[a._v(`
                  `+a._s(a.$auth.user.entity.currency.currency_symbol+" "+a.$formatter.formatPrice(P.amount_credit))+`
                `)]):a._e()]}},{key:"item.amount_debit",fn:function(O){var P=O.item;return[P.amount_debit?s("span",[a._v(`
                  `+a._s(a.$auth.user.entity.currency.currency_symbol+" "+a.$formatter.formatPrice(P.amount_debit))+`
                `)]):a._e()]}},{key:"body.append",fn:function(){return[s("tr",{staticClass:"black--text"},[s("th",{staticClass:"title"}),a._v(" "),s("th",{staticClass:"title"}),a._v(" "),s("th",{staticClass:"title"}),a._v(" "),s("th",{staticClass:"title"}),a._v(" "),s("th",{staticClass:"title"}),a._v(" "),s("th",{staticClass:"title"}),a._v(" "),s("th",{staticClass:"text-right"},[s("strong",[a._v(`
                      `+a._s(a.$auth.user.entity.currency.currency_symbol+" "+a.$formatter.formatPrice(a.sumField("amount_debit")))+`
                    `)])]),a._v(" "),s("th",{staticClass:"text-right"},[s("strong",[a._v(`
                      `+a._s(a.$auth.user.entity.currency.currency_symbol+" "+a.$formatter.formatPrice(a.sumField("amount_credit")))+`
                    `)])])]),a._v(" "),s("tr",[s("td",[a._v("Notes: ")]),a._v(" "),s("td",{attrs:{colspan:"3"}},[s("strong",[a._v(a._s(a.transaction.narration))])])])]},proxy:!0}],null,!0)})],1)],1)],1)]},proxy:!0}])})],1)},I=[],T=t(4),L={name:"DialogItem",props:{viewData:{type:Boolean,default:!0},showAddBtn:{type:Boolean,default:!0}},data:function(){return{row:null,url:"",allData:[],transaction:[],totalData:0,loading:!1,options:{},headers:[{text:"Reference",value:"reference"},{text:"Posting Date",value:"posting_date"},{text:"Account Code",value:"post_account.code"},{text:"Account Category",value:"post_account.account_type"},{text:"Account Name",value:"post_account.name"},{text:"Debit",value:"amount_debit",class:"text-center",cellClass:"disable-wrap text-right"},{text:"Credit",value:"amount_credit",class:"text-center",cellClass:"disable-wrap text-right"}]}},methods:{sumField:function(a){return this.allData.reduce(function(s,r){return parseFloat(s)+parseFloat(r[a]||0)},0)},openDialog:function(a){this.$refs.dialogForm.openDialog(),this.url=a,this.getDataFromApi()},getDataFromApi:function(){var a=this;this.loading=!0,this.$axios.get(this.url).then(function(s){a.loading=!1;var r=s.data;a.allData=r.data,a.transaction=r.transaction,a.totalData=r.total}).catch(function(s){a.loading=!1,a.$swal({type:"error",title:"Error",text:s.response.data.message})})}}},E=L,x=t(50),A=Object(x.a)(E,v,I,!1,null,null,null),B=D.default=A.exports;installComponents(A,{DialogForm:t(602).default})}}]);
