(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{640:function(t,e,o){"use strict";o.r(e);o(59);var n=o(657),r=o.n(n),l=(o(658),{name:"FieldUpload",components:{Dropzone:r.a},props:{formType:{type:String,default:""},formData:{type:Object,default:function(){return{}}}},data:function(){return{showLoadingAttachment:!1,form:this.formData,options:{url:window.location.protocol+"//"+window.location.hostname+"/qb-core/api/document-files",timeout:9e9,addRemoveLinks:!0,withCredentials:!0,thumbnailWidth:50,thumbnailHeight:50,acceptedFiles:"image/*",dictDefaultMessage:"<span class='mdi mdi-cloud-upload'></span> UPLOAD HERE",headers:{Authorization:this.$auth.$storage.getLocalStorage("_token.local")}}}},methods:{sendingParams:function(t,e,o){var n=0!==this.form.id?this.form.id:this.form.temp_id;o.append("temp_id",n),o.append("type",this.formType)},handleError:function(t,e,o){this.$swal({type:"error",title:"Error...",text:e.message})},reloadAttachment:function(t,e){var o=this;e.errors?this.$swal({type:"error",title:"Oops...",text:e.message}):(setTimeout((function(){o.getFiles()}),300),this.$swal({type:"success",title:"Success...",text:"Attachment uploaded!"}))},getFiles:function(){var t=this;this.showLoadingAttachment=!0;var e=this,o=this.form.id?this.form.id:this.form.temp_id;this.$axios.get(e.options.url,{params:{type:this.formType,temp_id:o}}).then((function(o){t.$emit("eventGetFiles",{total:o.data.data.total,row:o.data.data.rows}),e.showLoadingAttachment=!1})).catch((function(e){t.showLoadingAttachment=!1,t.$swal({type:"error",title:"Error...",text:e.response.message})}))},deleteFile:function(t){var e=this,o=this;this.$swal({title:"Are you sure?",text:"The file will be permanently deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(n){n.value&&e.$axios.delete(o.options.url,{params:{id:t.id}}).then((function(t){e.$swal({type:"success",title:"Success...",text:"Attachment Deleted!"}),o.getFiles()})).catch((function(t){e.$swal({type:"error",title:"Oops...",text:t.response.data.message})}))}))}}}),d=o(50),component=Object(d.a)(l,(function(){var t=this,e=t._self._c;return e("div",[e("dropzone",{ref:"attachment",attrs:{id:"attachment",options:t.options,"destroy-dropzone":!0},on:{"vdropzone-sending":function(e,o,n){return t.sendingParams(e,o,n)},"vdropzone-success":function(e,o){return t.reloadAttachment(e,o)},"vdropzone-error":function(e,o,n){return t.handleError(e,o,n)}}})],1)}),[],!1,null,null,null);e.default=component.exports}}]);