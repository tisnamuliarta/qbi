(window.webpackJsonp=window.webpackJsonp||[]).push([[94,31,69],{602:function(O,u,i){"use strict";i.r(u);var S=function(){var a=this,s=a._self._c;return s("v-dialog",{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:a.original,"max-width":a.maxWidth,transition:"dialog-top-transition"},model:{value:a.dialog,callback:function(l){a.dialog=l},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"subtitle-2"},[a._v(a._s(a.dialogTitle))]),a._v(" "),s("v-spacer"),a._v(" "),s("v-btn",{attrs:{icon:"",color:"red",dark:""},on:{click:function(l){return a.closeDialog()}}},[s("v-icon",[a._v("mdi-close-circle")])],1)],1),a._v(" "),s("v-divider"),a._v(" "),s("v-card-text",{staticClass:"pr-0 pl-0"},[a._t("content")],2),a._v(" "),s("v-divider"),a._v(" "),s("v-card-actions",[a._t("addLine"),a._v(" "),s("v-spacer"),a._v(" "),a._t("saveData")],2)],1)],1)},b=[],I={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},D=I,x=i(50),C=i(51),F=i.n(C),T=i(164),y=i(248),f=i(88),v=i(595),P=i(576),g=i(247),V=i(593),h=Object(x.a)(D,S,b,!1,null,null,null),L=u.default=h.exports;F()(h,{VBtn:T.a,VCard:y.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VDialog:v.a,VDivider:P.a,VIcon:g.a,VSpacer:V.a})},653:function(O,u,i){"use strict";i.r(u);var S=function(){var a=this,s=a._self._c;return s("v-dialog",{attrs:{persistent:"","no-click-animation":"",scrollable:"","max-width":"1000px",transition:"dialog-bottom-transition"},model:{value:a.dialogPermission,callback:function(l){a.dialogPermission=l},expression:"dialogPermission"}},[s("v-card",{attrs:{loading:a.loadingPermission}},[s("v-card-title",[s("span",{staticClass:"subtitle-2"},[a._v(`
          `+a._s(a.dialogTitle)+`
        `)]),a._v(" "),s("v-spacer"),a._v(" "),s("v-btn",{attrs:{color:"red darken-1",dark:"",icon:"",small:""},on:{click:a.closeDialogPermission}},[s("v-icon",[a._v("mdi-close-circle")])],1)],1),a._v(" "),s("v-card-text",[s("div",[s("LazyMasterPermissionList",{ref:"childDetails"})],1)]),a._v(" "),s("v-card-actions",[a.canAddData?s("v-btn",{staticClass:"white--text",attrs:{small:"",color:"orange darken-1"},on:{click:function(l){return a.$refs.childDetails.addLine()}}},[a._v(`
          Add Line
        `)]):a._e(),a._v(" "),s("v-spacer"),a._v(" "),a.canAddData?s("v-btn",{attrs:{color:"green darken-1",dark:"",small:"",loading:a.loadingPermission},on:{click:function(l){return a.saveRolePermission()}}},[a._v(`
          Save
        `)]):a._e()],1)],1)],1)},b=[],I=i(4),D={name:"DialogPermission",data:function(){return{loadingPermission:!1,dialogPermission:!1,dialogTitle:"",role:"",userRole:[],form:{},canAddData:!1,type:""}},mounted:function(){this.getPermissionList()},methods:{getPermissionList:function(){var a=this;this.$axios.get("/api/master/permissions").then(function(s){a.$auth.$storage.setState("permission_list",s.data.simple)})},openDialogPermission:function(a,s){this.dialogTitle=s,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},a),this.canAddData=!0,this.getPermissionUser(a),this.type="user"},getPermissionUser:function(a){var s=this;this.userRole=null,this.$axios.get("/api/master/user/permission",{params:{form:a}}).then(function(n){s.$refs.childDetails.setDataToDetails(n.data.data)}).finally(function(n){s.loadingPermission=!1})},closeDialogPermission:function(){this.dialogPermission=!1,this.userRole=[],this.canAddData=!1},openRolePermissions:function(a,s,n){var l=this,A=this;this.type=n,this.dialogTitle=s,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},a);var $="";n==="user"?$="/api/master/user/roles":(this.canAddData=!0,$="/api/master/permission-role"),this.$axios.get($,{params:{form:this.form}}).then(function(R){A.$refs.childDetails.setDataToDetails(R.data.data),l.loadingPermission=!1}).finally(function(R){l.loadingPermission=!1})},changeTab:function(a){var s=this;this.loadingPermission=!0,this.$axios.post("/api/master/permission-role",{form:a}).then(function(n){s.$refs.childDetails.setDataToDetails(n.data.data)}).finally(function(n){s.loadingPermission=!1})},getRolePermissionUser:function(a){var s=this;this.$axios.post("/api/master/user/role-permission",{item:a}).then(function(n){s.$refs.childDetails.setDataToDetails(n.data.data)}).finally(function(n){s.loadingPermission=!1})},getPermissionRole:function(a){var s=this;this.$axios.post("/api/master/permission-role",{form:this.form}).then(function(n){s.$refs.childDetails.setDataToDetails(n.data.data)}).finally(function(n){s.loadingPermission=!1})},saveRolePermission:function(){var a=this;this.loadingPermission=!0;var s=this.$refs.childDetails.getAddData(),n="";this.type==="user"?n="/api/master/user/permission":n="/api/master/permission-role",this.$axios.post(n,{details:s,form:this.form}).then(function(l){a.$swal({icon:"success",title:"Success",text:l.data.message}),a.type==="user"?a.getPermissionUser(a.form):a.getPermissionRole(a.form)}).catch(function(l){a.$swal({icon:"error",title:"Error",text:l.response.data.message})}).finally(function(l){a.loadingPermission=!1})}}},x=D,C=i(50),F=i(51),T=i.n(F),y=i(164),f=i(248),v=i(88),P=i(595),g=i(247),V=i(593),h=Object(C.a)(x,S,b,!1,null,null,null),L=u.default=h.exports;T()(h,{VBtn:y.a,VCard:f.a,VCardActions:v.a,VCardText:v.b,VCardTitle:v.c,VDialog:P.a,VIcon:g.a,VSpacer:V.a})},774:function(O,u,i){"use strict";i.r(u);var S=i(21),b=i(268),I=i(27),D=function(){var t=this,e=t._self._c;return e("v-layout",[e("v-flex",{attrs:{sm12:""}},[e("div",{staticClass:"mt-0"},[e("v-skeleton-loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mx-auto",attrs:{type:"table"}}),t._v(" "),e("v-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,headers:t.headers,items:t.allData,"items-per-page":20,options:t.options,"server-items-length":t.totalData,loading:t.loading,dense:"","footer-props":{"items-per-page-options":[20,50,100,-1]}},on:{"update:options":function(m){t.options=m}},scopedSlots:t._u([{key:"top",fn:function(){return[e("LazyMainToolbar",{staticClass:"has-border-bottom",attrs:{"document-status":t.documentStatus,"search-status":t.searchStatus,"item-search":t.itemSearch,"search-item":t.searchItem,search:t.search,filter:!1,title:"Users","title-button":"User"},on:{emitData:t.emitData,newData:t.newData}})]},proxy:!0},{key:"item.Action",fn:function(m){var o=m.item;return[e("v-btn",{attrs:{value:"left",small:"",icon:""},on:{click:function(p){return t.editItem(o)}}},[e("v-icon",{attrs:{left:""}},[t._v(`
                mdi-pencil-circle
              `)])],1),t._v(" "),e("v-btn",{attrs:{value:"center",small:"",icon:""},on:{click:function(p){return t.copyItem(o)}}},[e("v-icon",{attrs:{left:""}},[t._v(`
                mdi-content-copy
              `)])],1),t._v(" "),e("v-btn",{attrs:{value:"right",small:"",icon:""},on:{click:function(p){return t.$refs.dialogPermission.openDialogPermission(o,"Direct Permissions")}}},[e("v-icon",{attrs:{left:""}},[t._v(`
                mdi-playlist-edit
              `)])],1)]}}],null,!0)})],1)]),t._v(" "),e("DialogForm",{ref:"dialogForm",attrs:{"max-width":"600px","dialog-title":t.formTitle,"button-title":"Save"},scopedSlots:t._u([{key:"content",fn:function(){return[e("v-form",[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{staticClass:"d-flex",attrs:{md12:""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-text-field",{attrs:{label:"Name",placeholder:"Name",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.form.name,callback:function(o){t.$set(t.form,"name",o)},expression:"form.name"}})],1),t._v(" "),e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-text-field",{attrs:{label:"Username",placeholder:"Username",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.form.username,callback:function(o){t.$set(t.form,"username",o)},expression:"form.username"}})],1),t._v(" "),e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-text-field",{attrs:{label:"E-mail",placeholder:"E-mail",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.form.email,callback:function(o){t.$set(t.form,"email",o)},expression:"form.email"}})],1),t._v(" "),e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-autocomplete",{attrs:{items:t.itemRole,chips:"","deletable-chips":"","hide-no-data":"","small-chips":"",label:"Role",multiple:"",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.role,callback:function(o){t.$set(t.form,"role",o)},expression:"form.role"}})],1),t._v(" "),e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-select",{attrs:{items:t.itemEntity,"hide-no-data":"",label:"Company",outlined:"",dense:"","item-text":"name","item-value":"id","hide-details":"auto",clearable:""},model:{value:t.form.entity_id,callback:function(o){t.$set(t.form,"entity_id",o)},expression:"form.entity_id"}})],1),t._v(" "),e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-switch",{attrs:{inset:"",label:"Enabled"},model:{value:t.form.enabled,callback:function(o){t.$set(t.form,"enabled",o)},expression:"form.enabled"}})],1)],1)],1)],1)],1)]},proxy:!0},{key:"saveData",fn:function(){return[e("v-btn",{attrs:{color:"green darken-1",small:"",dark:"",loading:t.submitLoad},on:{click:function(o){return t.save()}}},[t._v(`
          Save
        `)])]},proxy:!0}])}),t._v(" "),e("MasterDialogPermission",{ref:"dialogPermission"})],1)},x=[],C=i(59),F=i(9),T=i(4),y={name:"MasterUser",layout:"dashboard",data:function(){return{totalData:0,editedIndex:-1,loadNewBtn:!1,submitLoad:!1,statusProcessing:"insert",show:!1,dialog:!1,message:!1,loading:!0,loadingSync:!1,searchItem:"",searchRole:"",search:"",searchStatus:"",allData:[],itemRole:[],itemEntity:[],itemSearch:[],documentStatus:[],options:{},sub_id:{},url:"",form:{},defaultForm:{},headers:[{text:"Username",value:"username"},{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Enabled",value:"enabled"},{text:"Role",value:"role"},{text:"Action",value:"Action",align:"end"}]}},head:function(){return{title:"Master Users"}},computed:{formTitle:function(){return this.editedIndex===-1?"New User":"Edit User"}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},mounted:function(){var t=this;setTimeout(function(){t.refreshData()},500)},methods:{emitData:function(t){this.documentStatus=t.documentStatus,this.itemSearch=t.itemSearch,this.searchStatus=t.searchStatus,this.searchItem=t.searchItem,this.search=t.search,this.filters=t.filters,this.getDataFromApi()},refreshData:function(){this.getDataFromApi(),this.getRole(),this.getEntity()},getRole:function(){var t=this;this.$axios.get("/api/master/roles").then(function(e){t.itemRole=e.data.data.simple}).catch(function(e){t.$swal({type:"error",title:"Error",text:e.response.data.message})})},getEntity:function(){var t=this;this.$axios.get("/api/entities").then(function(e){t.itemEntity=e.data.data.rows}).catch(function(e){t.$swal({type:"error",title:"Error",text:e.response.data.message})})},getDataFromApi:function(){var t=this;this.loading=!0;var e=this;this.$axios.get("/api/master/users",{params:{options:e.options,searchItem:e.searchItem,documentStatus:e.documentStatus,searchStatus:e.searchStatus,search:e.search}}).then(function(c){t.loading=!1,t.allData=c.data.data.rows,t.totalData=c.data.data.total,t.itemSearch=c.data.data.filter,t.form=Object.assign({},c.data.data.form),t.defaultForm=Object.assign({},c.data.data.form)}).catch(function(c){t.loading=!1,t.$swal({type:"error",title:"Error",text:c.response.data.message})})},newData:function(){var t=this;this.$refs.dialogForm.openDialog(),setTimeout(function(){t.form=Object.assign({},t.defaultForm),t.editedIndex=-1},300),this.statusProcessing="insert"},editItem:function(t){var e=t;e.role=JSON.parse(e.role),this.statusProcessing="update",this.editedIndex=this.allData.indexOf(t),this.form=Object.assign({},e),this.$refs.dialogForm.openDialog(),this.insert=!1},copyItem:function(t){var e=t;e.role=JSON.parse(e.role),this.statusProcessing="copy",this.editedIndex=this.allData.indexOf(t),this.form=Object.assign({},e),this.$refs.dialogForm.openDialog(),this.insert=!1},close:function(){var t=this;this.statusProcessing="insert",this.dialog=!1,setTimeout(function(){t.form=Object.assign({},t.defaultForm),t.editedIndex=-1},300)},save:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"all",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=this,m=this.form,o=this.statusProcessing;c.submitLoad=!0,o==="insert"?this.store("post","/api/master/users",m,"insert",t):o==="copy"?this.store("post","/api/master/users",m,"insert",t):o==="update"&&this.store("put","/api/master/users/"+this.form.id,m,"update",t)},store:function(t,e,c,m){var o=this,U=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"all",p=this;p.submitLoad=!0,this.$axios({method:t,url:e,data:c}).then(function(E){o.dialog=!1,o.$swal({type:"success",title:"Success!",text:E.data.message}),o.$refs.dialogForm.closeDialog(),o.getDataFromApi(),p.submitLoad=!1}).catch(function(E){o.$swal({type:"error",title:"Error",text:E.response.data.message}),p.submitLoad=!1})}}},f=y,v=i(50),P=i(51),g=i.n(P),V=i(637),h=i(164),L=i(908),r=i(622),a=i(625),s=i(247),n=i(615),l=i(631),A=i(591),$=i(899),R=i(574),j=Object(v.a)(f,D,x,!1,null,null,null),N=u.default=j.exports;g()(j,{DialogForm:i(602).default,MasterDialogPermission:i(653).default}),g()(j,{VAutocomplete:V.a,VBtn:h.a,VDataTable:L.a,VFlex:r.a,VForm:a.a,VIcon:s.a,VLayout:n.a,VSelect:l.a,VSkeletonLoader:A.a,VSwitch:$.a,VTextField:R.a})}}]);
