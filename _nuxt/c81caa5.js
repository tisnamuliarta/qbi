(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{1113:function(N,j,n){"use strict";n.r(j);var H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"scroll-container-min",attrs:{id:"parentContainer"}},[e("hot-table",{ref:"details",attrs:{root:t.detailsRoot,settings:t.settings}})],1)},W=[],V=n(24),T=n(17),F=n(74),G=n(4),Q=n(10),J=n(7),Y=n(46),X=n(27),Z=n(59),k=n(216),I=n(655),m=n(689),C=n(1151),D=n(894),S=n(1145),P=n(1148),A=n(710),E=n(674),p=n(776),M=n(895),_=n(912),$=n(1153),x=n(1149),L=n(1150),B=n(897),g=n(697),w=n(658);Object(m.c)(C.a),Object(m.c)(D.a),Object(m.c)(S.a),Object(m.c)(P.a),Object(A.c)(E.a),Object(p.d)(M.a),Object(p.d)(_.a),Object(p.d)($.a),Object(p.d)(x.a),Object(p.d)(L.a),Object(p.d)(B.a),Object(p.d)(g.a);var b=function(t,e){e.row===-1&&t.target.nodeName==="TD"&&(t.stopImmediatePropagation(),t.stopPropagation(),this.deselectCell())},K={name:"TableDetailProduction",components:{HotTable:I.a},data:function(){return{commissionRate:1,plannedQty:1,settings:{licenseKey:"non-commercial-and-evaluation",currentRowClassName:"currentRow",currentColClassName:"currentCol",startRows:1,rowHeaders:!0,manualColumnResize:!0,rowHeights:28,viewportRowRenderingOffset:1e3,viewportColumnRenderingOffset:100,colWidths:80,persistentState:!0,width:"100%",height:"auto",stretchH:"all",hiddenColumns:{copyPasteEnabled:!1,indicator:!1,columns:[0,1]},beforeOnCellMouseDown:b},detailsRoot:"detailsRoot",colHeaders:[],form:{}}},created:function(){this.setInstance()},methods:{setInstance:function(){window.details=this},removeRow:function(t){this.$refs.details.hotInstance.alter("remove_row",t)},addLine:function(){var t=this.$refs.details.hotInstance.countRows();this.$refs.details.hotInstance.alter("insert_row",t+1,5)},updateTableSettings:function(t,e){this.$refs.details.hotInstance.updateSettings({colHeaders:e,columns:t,licenseKey:"non-commercial-and-evaluation",height:"auto",beforeRefreshDimensions:function(){return!1},beforeOnCellMouseDown:b,afterRemoveRow:function(c,i,l,f){var h=window.details;h.calculateTotal()},beforeRemoveRow:function(c,i,l,f){var h=window.details,d=[];l.forEach(function(R,O){var v=h.$refs.details.hotInstance.getDataAtCell(R,0);v&&d.push(v)});var y=h.$refs.details.hotInstance.countRows();return y===1&&h.$emit("calcTotal",{subTotal:0,amount:0,discountAmount:0,taxDetail:[]}),d.length>0&&h.$emit("removeData",{id:d}),!0},afterChange:function(c,i){var l=window.details;if(c){var f=0;c.forEach(function(h){var d=Object(T.a)(h,4),y=d[0],R=d[1],O=d[2],v=d[3];f=R,(f!=="payroll_id"||f!=="employee_name"||f!=="employee_id"||f!=="salary"||f!=="sub_total")&&O!==v&&l.calculateTotal()})}},beforeRender:function(c){var i=window.details;i.$nuxt.$loading.start()},afterRender:function(c){var i=window.details;i.$nuxt.$loading.finish()},afterLoadData:function(c,i,l){}})},selectItems:function(t){var e=t.row,r=t.selected,c=this;this.$refs.details.hotInstance.batch(function(){r.forEach(function(i,l){var f=i.description?i.description:i.name;c.$refs.details.hotInstance.setDataAtRowProp([[e,"item_code",i.code],[e,"item_id",i.id],[e,"unit",i.unit],[e,"whs_code",i.whs_code],[e,"narration",f],[e,"base_qty",1]]),e++})})},selectAccount:function(t){var e=t.row,r=t.selected;this.$refs.details.hotInstance.setDataAtRowProp(e,"account_id",r[0].id),this.$refs.details.hotInstance.setDataAtRowProp(e,"account_code",r[0].code)},setDataToDetails:function(t,e,r,c){var i=this,l=this;this.form=e,this.$refs.details.hotInstance.batch(function(){i.updateTableSettings(r,c);var f=e.line_items.length>0?e.line_items:t;l.$refs.details.hotInstance.loadData(f),i.$nuxt.$loading.finish()})},setCommission:function(t){var e=this;this.commissionRate=t;var r=this.$refs.details.hotInstance.countRows();if(r>0){for(var c=function(f){e.$refs.details.hotInstance.batch(function(){var h=e.$refs.details.hotInstance.getDataAtRowProp(f,"employee_name");t.forEach(function(d,y){h===d.employee_name&&e.$refs.details.hotInstance.setDataAtRowProp(f,"Komisi",d.amount)})})},i=0;i<r;i++)c(i);setTimeout(function(){e.calculateTotal()},500)}},setQty:function(t){var e=this;this.$refs.details.hotInstance.batch(function(){e.plannedQty=t,e.calculateTotal()})},calculateTotal:function(){var t=this,e=this.$refs.details.hotInstance.countRows(),r=0;if(e>0)for(var c=function(f){t.$refs.details.hotInstance.batch(function(){for(var h=0,d=t.$refs.details.hotInstance.getSourceDataAtRow(f),y=0,R=Object.entries(d);y<R.length;y++){var O=Object(T.a)(R[y],1),v=O[0];if(v!=="payroll_id"&&v!=="employee_id"&&v!=="employee_name"&&v!=="payment_method"&&v!=="pay_type_id"&&v!=="sub_total"){var z=t.$refs.details.hotInstance.getDataAtRowProp(f,v);r=r+parseFloat(z),h=h+parseFloat(z)}}t.$refs.details.hotInstance.setDataAtRowProp(f,"sub_total",h)})},i=0;i<e;i++)c(i);this.$emit("calcTotal",{subTotal:r})},getTaxRate:function(t){var e=this;return Object(V.a)(regeneratorRuntime.mark(function r(){var c;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,e.$axios.get("/api/financial/taxes/0",{params:{name:t}});case 2:return c=l.sent,l.abrupt("return",c.data.data.rows);case 4:case"end":return l.stop()}},r)}))()},getDataAtRowPro:function(t,e){return this.$refs.details.hotInstance.getDataAtRowProp(t,e)},countRows:function(){return this.$refs.details.hotInstance.countRows()},checkIfEmptyRow:function(t){return this.$refs.details.hotInstance.isEmptyRow(t)},getAddData:function(t){return this.$refs.details.hotInstance.getSourceData()}}},U=K,a=n(50),s=Object(a.a)(U,H,W,!1,null,null,null),u=j.default=s.exports},674:function(N,j,n){"use strict";n.d(j,"a",function(){return U});var H=n(607),W=n(605),V=n(4),T=n(110),F=n(626),G=n(12),Q=n(7),J=n(46),Y=n(53),X=n(212),Z=n(32),k=n(34),I=n(871),m=n(606),C=n(601);function D(a){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},D(a)}function S(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")}function P(a,s){for(var u=0;u<s.length;u++){var o=s[u];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}}function A(a,s,u){return s&&P(a.prototype,s),u&&P(a,u),Object.defineProperty(a,"prototype",{writable:!1}),a}function E(){return typeof Reflect!="undefined"&&Reflect.get?E=Reflect.get.bind():E=function(s,u,o){var t=p(s,u);if(!!t){var e=Object.getOwnPropertyDescriptor(t,u);return e.get?e.get.call(arguments.length<3?s:o):e.value}},E.apply(this,arguments)}function p(a,s){for(;!Object.prototype.hasOwnProperty.call(a,s)&&(a=g(a),a!==null););return a}function M(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),s&&_(a,s)}function _(a,s){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,t){return o.__proto__=t,o},_(a,s)}function $(a){var s=B();return function(){var o=g(a),t;if(s){var e=g(this).constructor;t=Reflect.construct(o,arguments,e)}else t=o.apply(this,arguments);return x(this,t)}}function x(a,s){if(s&&(D(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(a)}function L(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function B(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function g(a){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},g(a)}var w="ht_editor_visible",b="selectEditor",K="select",U=function(a){M(u,a);var s=$(u);function u(){return S(this,u),s.apply(this,arguments)}return A(u,[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),Object(m.a)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(t){this.select.value=t}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="";var t=this.hot.getShortcutManager();t.setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",Object(m.v)(this.select,w)&&Object(m.K)(this.select,w),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var t=this;this.addHook("afterScrollHorizontally",function(){return t.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return t.refreshDimensions()}),this.addHook("afterColumnResize",function(){return t.refreshDimensions()}),this.addHook("afterRowResize",function(){return t.refreshDimensions()})}},{key:"prepare",value:function(t,e,r,c,i,l){var f=this;E(g(u.prototype),"prepare",this).call(this,t,e,r,c,i,l);var h=this.cellProperties.selectOptions,d;typeof h=="function"?d=this.prepareOptions(h(this.row,this.col,this.prop)):d=this.prepareOptions(h),Object(m.e)(this.select),Object(C.o)(d,function(y,R){var O=f.hot.rootDocument.createElement("OPTION");O.value=R,Object(m.f)(O,y),f.select.appendChild(O)})}},{key:"prepareOptions",value:function(t){var e={};if(Array.isArray(t))for(var r=0,c=t.length;r<c;r++)e[t[r]]=t[r];else D(t)==="object"&&(e=t);return e}},{key:"refreshValue",value:function(){var t=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=t,this.setValue(t),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===I.b.EDITING){if(this.TD=this.getEditedCell(),!this.TD){this.close();return}var t=this.getEditedCellRect(),e=t.top,r=t.start,c=t.width,i=t.height,l=this.select.style;l.height="".concat(i,"px"),l.width="".concat(c,"px"),l.top="".concat(e,"px"),l[this.hot.isRtl()?"right":"left"]="".concat(r,"px"),l.margin="0px",Object(m.a)(this.select,w)}}},{key:"registerShortcuts",value:function(){var t=this,e=this.hot.getShortcutManager(),r=e.getContext("editor"),c={group:b};this.isInFullEditMode()!==!1&&r.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var l=t.select.selectedIndex-1;l>=0&&(t.select[l].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var l=t.select.selectedIndex+1;l<=t.select.length-1&&(t.select[l].selected=!0)}}],c)}},{key:"unregisterShortcuts",value:function(){var t=this.hot.getShortcutManager(),e=t.getContext("editor");e.removeShortcutsByGroup(b)}}],[{key:"EDITOR_TYPE",get:function(){return K}}]),u}(I.a)}}]);
