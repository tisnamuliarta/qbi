(window.webpackJsonp=window.webpackJsonp||[]).push([[41,18,48],{1126:function(I,l,e){"use strict";e.r(l);var m=function(){var o=this,p=o.$createElement,d=o._self._c||p;return d("div",[d("DialogForm",{ref:"dialogForm",attrs:{"max-width":"800px","dialog-title":"Item List","button-title":"Save",original:"top"},scopedSlots:o._u([{key:"content",fn:function(){return[d("InventoryTableItem",{ref:"tableItem",attrs:{"view-data":o.viewData,"show-add-btn":o.showAddBtn}})]},proxy:!0},{key:"saveData",fn:function(){return[d("v-btn",{attrs:{color:"green darken-1",dark:"",small:""},on:{click:o.selectData}},[o._v(`
        Select Item
        `),d("v-icon",[o._v("mdi-arrow-down-right")])],1)]},proxy:!0}])})],1)},v=[],u=e(59),x={name:"DialogItem",props:{viewData:{type:Boolean,default:!0},showAddBtn:{type:Boolean,default:!0}},data:function(){return{row:null}},methods:{openDialog:function(p){var d=this;this.$refs.dialogForm.openDialog(),setTimeout(function(){d.$refs.tableItem.setEmptyToSelected()},150),this.row=p},selectData:function(){this.$emit("selectItems",{row:this.row,selected:this.$refs.tableItem.returnSelected()}),this.$refs.dialogForm.closeDialog()}}},y=x,V=e(50),S=e(51),D=e.n(S),C=e(164),f=e(246),h=Object(V.a)(y,m,v,!1,null,null,null),T=l.default=h.exports;D()(h,{InventoryTableItem:e(650).default,DialogForm:e(613).default}),D()(h,{VBtn:C.a,VIcon:f.a})},613:function(I,l,e){"use strict";e.r(l);var m=function(){var a=this,A=a.$createElement,r=a._self._c||A;return r("v-dialog",{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:a.original,"max-width":a.maxWidth,transition:"dialog-top-transition"},model:{value:a.dialog,callback:function(b){a.dialog=b},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"subtitle-2"},[a._v(a._s(a.dialogTitle))]),a._v(" "),r("v-spacer"),a._v(" "),r("v-btn",{attrs:{icon:"",color:"red",dark:""},on:{click:function(b){return a.closeDialog()}}},[r("v-icon",[a._v("mdi-close-circle")])],1)],1),a._v(" "),r("v-divider"),a._v(" "),r("v-card-text",{staticClass:"pr-0 pl-0"},[a._t("content")],2),a._v(" "),r("v-divider"),a._v(" "),r("v-card-actions",[a._t("addLine"),a._v(" "),r("v-spacer"),a._v(" "),a._t("saveData")],2)],1)],1)},v=[],u={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},x=u,y=e(50),V=e(51),S=e.n(V),D=e(164),C=e(247),f=e(88),h=e(591),T=e(572),o=e(246),p=e(589),d=Object(y.a)(x,m,v,!1,null,null,null),F=l.default=d.exports;S()(d,{VBtn:D.a,VCard:C.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VDialog:h.a,VDivider:T.a,VIcon:o.a,VSpacer:p.a})},615:function(I,l,e){"use strict";var m=e(281),v=e.n(m),u=e(282);l.a=Object(u.a)("layout")},617:function(I,l,e){"use strict";var m=e(281),v=e.n(m),u=e(282);l.a=Object(u.a)("flex")},650:function(I,l,e){"use strict";e.r(l);var m=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-layout",[i("v-flex",{attrs:{sm12:""}},[i("div",{staticClass:"mt-0"},[i("v-data-table",{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,headers:t.headers,items:t.allData,"items-per-page":20,options:t.options,"server-items-length":t.totalData,loading:t.loading,"item-key":"id","calculate-widths":"","fixed-header":"",height:t.viewData?"60vh":"70vh","show-select":"",dense:"","footer-props":{"items-per-page-options":[20,50,100,-1]}},on:{"update:options":function(s){t.options=s}},scopedSlots:t._u([{key:"top",fn:function(){return[t.viewData?t._e():i("div",{staticClass:"pl-4 pt-2"},[i("span",{staticClass:"font-weight-medium text-h6"},[t._v(t._s(t.$t("Items Master Data")))])]),t._v(" "),i("LazyMainToolbar",{attrs:{"document-status":t.documentStatus,"search-status":t.searchStatus,"item-search":t.itemSearch,"search-item":t.searchItem,search:t.search,"show-add":t.showAdd,title:"Items","show-new-data":"","new-data-text":t.$t("New Item"),"show-batch-action":""},on:{emitData:t.emitData,newData:t.newData,getDataFromApi:t.getDataFromApi}})]},proxy:!0},{key:"item.ACTIONS",fn:function(s){var c=s.item;return[i("v-btn",{staticClass:"font-weight-bold text-right",attrs:{color:"secondary",text:"",small:""},on:{click:function(g){return t.actions(t.itemAction,c)}}},[t._v(`
            `+t._s(t.itemText)+`
          `)]),t._v(" "),i("v-menu",{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(g){var E=g.on,B=g.attrs;return[i("v-btn",t._g(t._b({attrs:{color:"black",dark:"",icon:""}},"v-btn",B,!1),E),[i("v-icon",[t._v("mdi-menu-down")])],1)]}}],null,!0)},[t._v(" "),i("v-list",t._l(t.items,function(g,E){return i("v-list-item",{key:E,on:{click:function(B){return t.actions(g.action,c)}}},[i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(g.text))])],1)],1)}),1)],1)]}},{key:"item.sale_price",fn:function(s){var c=s.item;return[t._v(`
          `+t._s(t.formatPrice(c.sale_price))+`
        `)]}},{key:"item.purchase_price",fn:function(s){var c=s.item;return[t._v(`
          `+t._s(t.formatPrice(c.purchase_price))+`
        `)]}},{key:"item.last_buy_price",fn:function(s){var c=s.item;return[t._v(`
          `+t._s(t.formatPrice(c.last_buy_price))+`
        `)]}},{key:"item.average_price",fn:function(s){var c=s.item;return[t._v(`
          `+t._s(t.formatPrice(c.average_price))+`
        `)]}},{key:"item.minimum_stock",fn:function(s){var c=s.item;return[t._v(`
          `+t._s(t.formatPrice(c.minimum_stock))+`
        `)]}}],null,!0),model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}})],1)]),t._v(" "),i("LazyInventoryFormItem",{ref:"formData",attrs:{"form-data":t.form,"form-title":t.formTitle,"button-title":t.buttonTitle},on:{getDataFromApi:t.getDataFromApi}})],1)},v=[],u=e(21),x=e(65),y=e(290),V=e(4),S=e(70),D=e(283),C=e(9),f={name:"TableItem",props:{viewData:{type:Boolean,default:!1},showAddBtn:{type:Boolean,default:!0}},data:function(){return{selected:[],totalData:0,url:"",editedIndex:-1,loading:!0,allData:[],showAdd:this.showAddBtn,documentStatus:[],itemSearch:[],searchStatus:"",searchItem:"",search:"",form:{},defaultItem:{},options:{},headers:[],items:[{text:"Edit",action:"edit"},{text:"Delete",action:"delete"}],itemText:"",itemAction:""}},computed:{formTitle:function(){return this.editedIndex===-1?this.$t("New Item"):this.$t("Edit Item")},buttonTitle:function(){return this.editedIndex===-1?this.$t("Save"):this.$t("Update")}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},mounted:function(){this.mappingHeader(),this.itemText=this.items[0].text,this.itemAction=this.items[0].action},methods:{formatPrice:function(n){var i=(n/1).toFixed(2).replace(".",",");return i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},setEmptyToSelected:function(){this.selected=[]},newData:function(){this.editedIndex=-1,this.$refs.formData.newData(this.form)},parseJson:function(n){return Array.isArray(JSON.parse(n))?JSON.parse(n).toString():n},actions:function(n,i){n==="edit"?this.editItem(i):this.deleteItem(i)},editItem:function(n){this.editedIndex=1,this.editedIndex=this.allData.indexOf(n),this.$refs.formData.editItem(n,this.url)},emitData:function(n){this.documentStatus=n.documentStatus,this.itemSearch=n.itemSearch,this.searchStatus=n.searchStatus,this.searchItem=n.searchItem,this.search=n.search,this.filters=n.filters,this.getDataFromApi()},getDataFromApi:function(){var n=this;this.loading=!0;var i=this;this.$axios.get("/api/inventory/items",{params:{options:i.options,searchItem:i.searchItem,documentStatus:i.documentStatus,searchStatus:i.searchStatus,search:i.search}}).then(function(s){n.loading=!1,n.allData=s.data.data.rows,n.totalData=s.data.data.total,n.itemSearch=s.data.filter,n.form=Object.assign({},s.data.data.form),n.defaultItem=Object.assign({},s.data.data.form),n.url=s.data.data.url}).catch(function(s){n.loading=!1,n.$swal({type:"error",title:"Error",text:s.response.data.message})})},returnSelected:function(){return this.selected},mappingHeader:function(){this.viewData?this.headers=[{text:"Item Code",value:"code",cellClass:"disable-wrap",class:"disable-wrap"},{text:"Item Name",value:"name",cellClass:"disable-wrap",class:"disable-wrap"},{text:"Item Type",value:"group_name",cellClass:"disable-wrap",class:"disable-wrap"},{text:"Item Category",value:"category.name",cellClass:"disable-wrap",class:"disable-wrap"},{text:"Unit",value:"unit",cellClass:"disable-wrap",class:"disable-wrap"}]:this.headers=[{text:"Item Code",value:"code",width:"120px"},{text:"Item Name",value:"name",width:"150px"},{text:"Item Type",value:"group_name",cellClass:"disable-wrap",class:"disable-wrap"},{text:"Item Category",value:"category.name",sortable:!1,filterable:!1},{text:"Reorder Point",value:"reorder_point",align:"right",sortable:!1,filterable:!1},{text:"Unit",value:"unit",sortable:!1,filterable:!1},{text:"Buy Price",value:"purchase_price",align:"right",sortable:!1,filterable:!1},{text:"Sell Price",value:"sale_price",align:"right",sortable:!1,filterable:!1},{text:"Action",value:"ACTIONS",align:"center",sortable:!1,filterable:!1}]}}},h=f,T=e(50),o=e(51),p=e.n(o),d=e(164),F=e(1018),a=e(617),A=e(246),r=e(615),b=e(248),L=e(165),O=e(34),P=e(573),$=Object(T.a)(h,m,v,!1,null,null,null),w=l.default=$.exports;p()($,{VBtn:d.a,VDataTable:F.a,VFlex:a.a,VIcon:A.a,VLayout:r.a,VList:b.a,VListItem:L.a,VListItemContent:O.b,VListItemTitle:O.d,VMenu:P.a})}}]);
