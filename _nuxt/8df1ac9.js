(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{660:function(y,l,e){"use strict";e.r(l);var c=function(){var s=this,i=s._self._c;return i("v-dialog",{attrs:{persistent:"","no-click-animation":"",scrollable:"","max-width":"1000px",transition:"dialog-bottom-transition"},model:{value:s.dialogPermission,callback:function(n){s.dialogPermission=n},expression:"dialogPermission"}},[i("v-card",{attrs:{loading:s.loadingPermission}},[i("v-card-title",[i("span",{staticClass:"subtitle-2"},[s._v(`
          `+s._s(s.dialogTitle)+`
        `)]),s._v(" "),i("v-spacer"),s._v(" "),i("v-btn",{attrs:{color:"red darken-1",dark:"",icon:"",small:""},on:{click:s.closeDialogPermission}},[i("v-icon",[s._v("mdi-close-circle")])],1)],1),s._v(" "),i("v-card-text",[i("div",[i("LazyMasterPermissionList",{ref:"childDetails"})],1)]),s._v(" "),i("v-card-actions",[s.canAddData?i("v-btn",{staticClass:"white--text",attrs:{small:"",color:"orange darken-1"},on:{click:function(n){return s.$refs.childDetails.addLine()}}},[s._v(`
          Add Line
        `)]):s._e(),s._v(" "),i("v-spacer"),s._v(" "),s.canAddData?i("v-btn",{attrs:{color:"green darken-1",dark:"",small:"",loading:s.loadingPermission},on:{click:function(n){return s.saveRolePermission()}}},[s._v(`
          Save
        `)]):s._e()],1)],1)],1)},f=[],T=e(4),h={name:"DialogPermission",data:function(){return{loadingPermission:!1,dialogPermission:!1,dialogTitle:"",role:"",userRole:[],form:{},canAddData:!1,type:""}},mounted:function(){this.getPermissionList()},methods:{getPermissionList:function(){var s=this;this.$axios.get("/api/master/permissions").then(function(i){s.$auth.$storage.setState("permission_list",i.data.simple)})},openDialogPermission:function(s,i){this.dialogTitle=i,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},s),this.canAddData=!0,this.getPermissionUser(s),this.type="user"},getPermissionUser:function(s){var i=this;this.userRole=null,this.$axios.get("/api/master/user/permission",{params:{form:s}}).then(function(t){i.$refs.childDetails.setDataToDetails(t.data.data)}).finally(function(t){i.loadingPermission=!1})},closeDialogPermission:function(){this.dialogPermission=!1,this.userRole=[],this.canAddData=!1},openRolePermissions:function(s,i,t){var n=this,V=this;this.type=t,this.dialogTitle=i,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},s);var r="";t==="user"?r="/api/master/user/roles":(this.canAddData=!0,r="/api/master/permission-role"),this.$axios.get(r,{params:{form:this.form}}).then(function(d){V.$refs.childDetails.setDataToDetails(d.data.data),n.loadingPermission=!1}).finally(function(d){n.loadingPermission=!1})},changeTab:function(s){var i=this;this.loadingPermission=!0,this.$axios.post("/api/master/permission-role",{form:s}).then(function(t){i.$refs.childDetails.setDataToDetails(t.data.data)}).finally(function(t){i.loadingPermission=!1})},getRolePermissionUser:function(s){var i=this;this.$axios.post("/api/master/user/role-permission",{item:s}).then(function(t){i.$refs.childDetails.setDataToDetails(t.data.data)}).finally(function(t){i.loadingPermission=!1})},getPermissionRole:function(s){var i=this;this.$axios.post("/api/master/permission-role",{form:this.form}).then(function(t){i.$refs.childDetails.setDataToDetails(t.data.data)}).finally(function(t){i.loadingPermission=!1})},saveRolePermission:function(){var s=this;this.loadingPermission=!0;var i=this.$refs.childDetails.getAddData(),t="";this.type==="user"?t="/api/master/user/permission":t="/api/master/permission-role",this.$axios.post(t,{details:i,form:this.form}).then(function(n){s.$swal({icon:"success",title:"Success",text:n.data.message}),s.type==="user"?s.getPermissionUser(s.form):s.getPermissionRole(s.form)}).catch(function(n){s.$swal({icon:"error",title:"Error",text:n.response.data.message})}).finally(function(n){s.loadingPermission=!1})}}},g=h,u=e(50),v=e(51),P=e.n(v),p=e(164),D=e(248),o=e(88),$=e(595),x=e(247),R=e(593),m=Object(u.a)(g,c,f,!1,null,null,null),C=l.default=m.exports;P()(m,{VBtn:p.a,VCard:D.a,VCardActions:o.a,VCardText:o.b,VCardTitle:o.c,VDialog:$.a,VIcon:x.a,VSpacer:R.a})}}]);
