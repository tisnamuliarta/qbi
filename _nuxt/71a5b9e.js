(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1117:function($,b,n){"use strict";n.r(b);var v=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("hot-table",{ref:"details",attrs:{root:o.detailsRoot,settings:o.settings}}),o._v(" "),e("LazyInventoryDialogItem",{ref:"dialogItem",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:o.selectItems}})],1)},h=[],w=n(25),u=n(17),p=n(74),Q=n(4),X=n(10),Y=n(29),Z=n(7),q=n(46),_=n(290),A=n(834),y=n(807),C=n(1161),P=n(1009),E=n(1162),W=n(1165),f=n(898),F=n(1010),k=n(1020),S=n(1169),L=n(1164),H=n(1166),N=n(1011),B=n(1163),x=n(838),tt=n(854);Object(y.c)(C.a),Object(y.c)(P.a),Object(y.c)(E.a),Object(y.c)(W.a),Object(f.d)(F.a),Object(f.d)(k.a),Object(f.d)(S.a),Object(f.d)(L.a),Object(f.d)(H.a),Object(f.d)(N.a),Object(f.d)(B.a),Object(x.c)("ButtonAddRenderer",function(o,t,e,r,l,d,s){var a=null,i=window.details;if(i.form.status!=="closed"&&i.form.status!=="cancel")return a=document.createElement("button"),a.type="button",a.innerHTML='<span class="mdi mdi-arrow-right-bold"></span>',a.className="btnNPB",a.value="Details",a.addEventListener("mousedown",function(c){c.preventDefault(),i.$refs.dialogItem.openDialog(e)}),t.innerText="",t.appendChild(a),t}),Object(x.c)("ButtonDeleteRenderer",function(o,t,e,r,l,d,s){var a=null,i=window.details;return i.form.status!=="closed"&&i.form.status!=="cancel"&&(a=document.createElement("button"),a.type="button",a.innerHTML='<span class="mdi mdi-delete"></span>',a.className="btnDelete",a.value="Details2",a.addEventListener("mousedown",function(c){c.preventDefault(),i.removeRow(e)}),t.innerText="",t.appendChild(a)),t});var M={name:"TableDetail",components:{HotTable:A.a},data:function(){return{settings:{licenseKey:"non-commercial-and-evaluation",currentRowClassName:"currentRow",currentColClassName:"currentCol",startRows:2,rowHeaders:!0,manualColumnResize:!0,rowHeights:28,viewportRowRenderingOffset:1e3,viewportColumnRenderingOffset:100,colWidths:80,persistentState:!0,width:"100%",height:"28vh",stretchH:"all",hiddenColumns:{copyPasteEnabled:!1,indicator:!1,columns:[1,2,3]},colHeaders:["#","Id","Item ID","Item Code","Item Name","Description","Qty","Units","Currency","Unit Price","Discount","Tax","Amount",""],columns:[{width:30,wordWrap:!1,renderer:"ButtonAddRenderer"},{data:"id",wordWrap:!1},{data:"item_id",wordWrap:!1},{data:"sku",width:150,readOnly:!0,wordWrap:!1},{data:"name",width:140,readOnly:!0,wordWrap:!1},{data:"description",width:350,wordWrap:!1},{data:"quantity",width:80,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0"}},{data:"unit",width:100,readOnly:!0,wordWrap:!1},{data:"default_currency_symbol",width:100,readOnly:!0,wordWrap:!1,align:"right"},{data:"price",width:100,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"discount_rate",width:100,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"tax_name",width:100,type:"dropdown",height:26,wordWrap:!1,source:function(e,r){var l=window.details,d=l.$auth.$storage.getLocalStorage("tax");r(d)},strict:!0,filter:!1,allowInvalid:!1},{data:"total",width:100,wordWrap:!1,type:"numeric",readOnly:!0,numericFormat:{pattern:"0,0.00"}},{width:40,wordWrap:!1,renderer:"ButtonDeleteRenderer"}],beforeRender:function(e){var r=window.details;r.$nuxt.$loading.start()},afterRender:function(e){var r=window.details;r.$nuxt.$loading.finish()}},detailsRoot:"detailsRoot",colHeaders:[],form:{}}},created:function(){this.setInstance()},methods:{setInstance:function(){window.details=this},removeRow:function(t){this.$refs.details.hotInstance.alter("remove_row",t)},addLine:function(){var t=this.$refs.details.hotInstance.countRows();this.$refs.details.hotInstance.alter("insert_row",t+1,5)},updateTableSettings:function(t){this.$refs.details.hotInstance.updateSettings({licenseKey:"non-commercial-and-evaluation",afterRemoveRow:function(r,l,d,s){var a=window.details;a.calculateTotal()},beforeRemoveRow:function(r,l,d,s){var a=window.details,i=[];d.forEach(function(g,m){var j=a.$refs.details.hotInstance.getDataAtCell(g,0);j&&i.push(j)});var c=a.$refs.details.hotInstance.countRows();return c===1&&a.$emit("calcTotal",{subTotal:0,amount:0,discountAmount:0,taxDetail:[]}),i.length>0&&a.$emit("removeData",{id:i}),!0},afterChange:function(r,l){var d=window.details;if(r){var s=0;r.forEach(function(a){var i=Object(u.a)(a,4),c=i[0],g=i[1],m=i[2],j=i[3];s=g,(s==="quantity"||s==="price"||s==="discount_rate"||s==="tax_name")&&m!==j&&d.calculateTotal()})}}})},selectItems:function(t){var e=t.row,r=t.selected,l=this.form.type,d=this;this.$refs.details.hotInstance.batch(function(){r.forEach(function(s,a){var i=l.substr(0,1)==="S"?s.sale_price:s.purchase_price,c=l.substr(0,1)==="S"?s.sell_tax_name:s.buy_tax_name;d.$refs.details.hotInstance.setDataAtRowProp([[e,"name",s.name],[e,"sku",s.code],[e,"unit",s.unit],[e,"description",s.description],[e,"default_currency_symbol",d.form.default_currency_symbol],[e,"item_id",s.id],[e,"price",i],[e,"tax_name",c],[e,"quantity",1]]),e++})})},setDataToDetails:function(t,e){var r=this,l=this;this.form=e,this.$refs.details.hotInstance.batch(function(){r.updateTableSettings();var d=e.items.length>0?e.items:t;l.$refs.details.hotInstance.loadData(d);for(var s=r.$refs.details.hotInstance.countRows(),a=0;a<s;a++)r.$refs.details.hotInstance.setDataAtRowProp(a,"default_currency_symbol",l.form.default_currency_symbol)})},calculateTotal:function(){var t=this,e=this.$refs.details.hotInstance.countRows(),r=0,l=0,d=[],s=0,a=0;if(e>0)for(var i=function(m){t.$refs.details.hotInstance.batch(function(){var j=t.$refs.details.hotInstance.getDataAtRowProp(m,"quantity"),T=t.$refs.details.hotInstance.getDataAtRowProp(m,"price"),V=t.$refs.details.hotInstance.getDataAtRowProp(m,"discount_rate"),R=t.$refs.details.hotInstance.getDataAtRowProp(m,"tax_name"),I=j*T;r=r+j*T;var D=parseFloat(V/100*I).toFixed(2);if(l=parseFloat(l)+parseFloat(D),a=I-D,R){var z=0;t.$auth.$storage.getLocalStorage("tax_row").forEach(function(O,at){O.name===R&&(z=parseFloat(O.rate))});var G=parseFloat(z)/100*a;d.push({name:R,amount:G})}s=s+(I-D),t.$refs.details.hotInstance.setDataAtRowProp(m,"total",a)})},c=0;c<e;c++)i(c);this.$emit("calcTotal",{subTotal:r,amount:s,discountAmount:l,taxDetail:d})},getTaxRate:function(t){var e=this;return Object(w.a)(regeneratorRuntime.mark(function r(){var l;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.$axios.get("/api/financial/taxes/0",{params:{name:t}});case 2:return l=s.sent,s.abrupt("return",l.data.data.rows);case 4:case"end":return s.stop()}},r)}))()},getDataAtRowPro:function(t,e){return this.$refs.details.hotInstance.getDataAtRowProp(t,e)},countRows:function(){return this.$refs.details.hotInstance.countRows()},checkIfEmptyRow:function(t){return this.$refs.details.hotInstance.isEmptyRow(t)},getAddData:function(t){if(t==="0")for(var e=this.$refs.details.hotInstance.countRows(),r=0;r<e;r++)this.$refs.details.hotInstance.setDataAtRowProp(r,"id",null);return this.$refs.details.hotInstance.getSourceData()}}},U=M,K=n(50),J=Object(K.a)(U,v,h,!1,null,null,null),et=b.default=J.exports},836:function($,b,n){var v={"./af":662,"./af.js":662,"./ar":663,"./ar-dz":664,"./ar-dz.js":664,"./ar-kw":665,"./ar-kw.js":665,"./ar-ly":666,"./ar-ly.js":666,"./ar-ma":667,"./ar-ma.js":667,"./ar-sa":668,"./ar-sa.js":668,"./ar-tn":669,"./ar-tn.js":669,"./ar.js":663,"./az":670,"./az.js":670,"./be":671,"./be.js":671,"./bg":672,"./bg.js":672,"./bm":673,"./bm.js":673,"./bn":674,"./bn-bd":675,"./bn-bd.js":675,"./bn.js":674,"./bo":676,"./bo.js":676,"./br":677,"./br.js":677,"./bs":678,"./bs.js":678,"./ca":679,"./ca.js":679,"./cs":680,"./cs.js":680,"./cv":681,"./cv.js":681,"./cy":682,"./cy.js":682,"./da":683,"./da.js":683,"./de":684,"./de-at":685,"./de-at.js":685,"./de-ch":686,"./de-ch.js":686,"./de.js":684,"./dv":687,"./dv.js":687,"./el":688,"./el.js":688,"./en-au":689,"./en-au.js":689,"./en-ca":690,"./en-ca.js":690,"./en-gb":691,"./en-gb.js":691,"./en-ie":692,"./en-ie.js":692,"./en-il":693,"./en-il.js":693,"./en-in":694,"./en-in.js":694,"./en-nz":695,"./en-nz.js":695,"./en-sg":696,"./en-sg.js":696,"./eo":697,"./eo.js":697,"./es":698,"./es-do":699,"./es-do.js":699,"./es-mx":700,"./es-mx.js":700,"./es-us":701,"./es-us.js":701,"./es.js":698,"./et":702,"./et.js":702,"./eu":703,"./eu.js":703,"./fa":704,"./fa.js":704,"./fi":705,"./fi.js":705,"./fil":706,"./fil.js":706,"./fo":707,"./fo.js":707,"./fr":708,"./fr-ca":709,"./fr-ca.js":709,"./fr-ch":710,"./fr-ch.js":710,"./fr.js":708,"./fy":711,"./fy.js":711,"./ga":712,"./ga.js":712,"./gd":713,"./gd.js":713,"./gl":714,"./gl.js":714,"./gom-deva":715,"./gom-deva.js":715,"./gom-latn":716,"./gom-latn.js":716,"./gu":717,"./gu.js":717,"./he":718,"./he.js":718,"./hi":719,"./hi.js":719,"./hr":720,"./hr.js":720,"./hu":721,"./hu.js":721,"./hy-am":722,"./hy-am.js":722,"./id":723,"./id.js":723,"./is":724,"./is.js":724,"./it":725,"./it-ch":726,"./it-ch.js":726,"./it.js":725,"./ja":727,"./ja.js":727,"./jv":728,"./jv.js":728,"./ka":729,"./ka.js":729,"./kk":730,"./kk.js":730,"./km":731,"./km.js":731,"./kn":732,"./kn.js":732,"./ko":733,"./ko.js":733,"./ku":734,"./ku.js":734,"./ky":735,"./ky.js":735,"./lb":736,"./lb.js":736,"./lo":737,"./lo.js":737,"./lt":738,"./lt.js":738,"./lv":739,"./lv.js":739,"./me":740,"./me.js":740,"./mi":741,"./mi.js":741,"./mk":742,"./mk.js":742,"./ml":743,"./ml.js":743,"./mn":744,"./mn.js":744,"./mr":745,"./mr.js":745,"./ms":746,"./ms-my":747,"./ms-my.js":747,"./ms.js":746,"./mt":748,"./mt.js":748,"./my":749,"./my.js":749,"./nb":750,"./nb.js":750,"./ne":751,"./ne.js":751,"./nl":752,"./nl-be":753,"./nl-be.js":753,"./nl.js":752,"./nn":754,"./nn.js":754,"./oc-lnc":755,"./oc-lnc.js":755,"./pa-in":756,"./pa-in.js":756,"./pl":757,"./pl.js":757,"./pt":758,"./pt-br":759,"./pt-br.js":759,"./pt.js":758,"./ro":760,"./ro.js":760,"./ru":761,"./ru.js":761,"./sd":762,"./sd.js":762,"./se":763,"./se.js":763,"./si":764,"./si.js":764,"./sk":765,"./sk.js":765,"./sl":766,"./sl.js":766,"./sq":767,"./sq.js":767,"./sr":768,"./sr-cyrl":769,"./sr-cyrl.js":769,"./sr.js":768,"./ss":770,"./ss.js":770,"./sv":771,"./sv.js":771,"./sw":772,"./sw.js":772,"./ta":773,"./ta.js":773,"./te":774,"./te.js":774,"./tet":775,"./tet.js":775,"./tg":776,"./tg.js":776,"./th":777,"./th.js":777,"./tk":778,"./tk.js":778,"./tl-ph":779,"./tl-ph.js":779,"./tlh":780,"./tlh.js":780,"./tr":781,"./tr.js":781,"./tzl":782,"./tzl.js":782,"./tzm":783,"./tzm-latn":784,"./tzm-latn.js":784,"./tzm.js":783,"./ug-cn":785,"./ug-cn.js":785,"./uk":786,"./uk.js":786,"./ur":787,"./ur.js":787,"./uz":788,"./uz-latn":789,"./uz-latn.js":789,"./uz.js":788,"./vi":790,"./vi.js":790,"./x-pseudo":791,"./x-pseudo.js":791,"./yo":792,"./yo.js":792,"./zh-cn":793,"./zh-cn.js":793,"./zh-hk":794,"./zh-hk.js":794,"./zh-mo":795,"./zh-mo.js":795,"./zh-tw":796,"./zh-tw.js":796};function h(u){var p=w(u);return n(p)}function w(u){if(!n.o(v,u)){var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}return v[u]}h.keys=function(){return Object.keys(v)},h.resolve=w,$.exports=h,h.id=836}}]);
