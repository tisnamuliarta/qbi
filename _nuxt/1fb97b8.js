(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1123:function($,u,o){"use strict";o.r(u);var c=o(633),f=o(249),i=o(587),m=o(598),h=o(589),p=o(573),v=o(658),y=function(){var t=this,a=t._self._c;return a(m.a,{attrs:{dense:""}},[a(i.a,{attrs:{cols:"12",md:"9",sm:"8"}},[a(m.a,{attrs:{dense:""}},[a(i.a,{attrs:{cols:"12",md:"3",sm:"12"}},[a(c.a,{attrs:{items:t.itemAccounts,label:t.$t("Pay from"),"item-value":"id","item-text":"name",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.account_id,callback:function(e){t.$set(t.form,"account_id",e)},expression:"form.account_id"}})],1),t._v(" "),a(i.a,{attrs:{cols:"12",md:"2",sm:"12"}},[a(c.a,{attrs:{items:t.itemPayPeriod,label:t.$t("End Pay Period"),"return-object":"","item-value":"id","item-text":"name",outlined:"",dense:"","hide-details":"auto"},on:{change:t.changePeriodDate},model:{value:t.form.pay_period,callback:function(e){t.$set(t.form,"pay_period",e)},expression:"form.pay_period"}})],1),t._v(" "),a(i.a,{attrs:{cols:"12",lg:"2",md:"2",sm:"6"}},[a(p.a,{attrs:{label:t.$t("Pay date"),"persistent-hint":"",outlined:"",dense:"","hide-details":"auto",type:"date"},model:{value:t.form.transaction_date,callback:function(e){t.$set(t.form,"transaction_date",e)},expression:"form.transaction_date"}})],1),t._v(" "),a(i.a,{attrs:{cols:"12",md:"2",sm:"12"}},[a(c.a,{attrs:{items:["draft","closed","cancel"],label:"Status",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1)],1),t._v(" "),a(h.a),t._v(" "),a(i.a,{staticClass:"text-right",attrs:{cols:"12",md:"3",xl:"2",sm:"4"}},[a(m.a,{attrs:{dense:""}},[a(i.a,{staticClass:"pt-0",attrs:{cols:"12"}},[a("p",{staticClass:"mb-0"},[t._v("Amount")]),t._v(" "),a("span",{staticClass:"text-right font-weight-bold text-h4"},[t._v(`
          `+t._s(isNaN(t.form.main_account_amount)?0:t.$formatter.formatPrice(t.form.main_account_amount))+`
        `)])])],1)],1),t._v(" "),a(i.a,{staticClass:"mt-1",attrs:{cols:"12"}},[a(f.a,{attrs:{flat:""}},[a("div",{staticClass:"scroll-container-min"},[a("LazyPayrollTableDetailPayCheck",{ref:"childDetails",on:{calcTotal:t.calcTotal}})],1)])],1),t._v(" "),a(i.a,{attrs:{cols:"12",md:"4",lg:"4"}},[a(i.a,{attrs:{cols:"12",md:"12"}},[a(v.a,{attrs:{rows:"2",label:"Journal Remark",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.narration,callback:function(e){t.$set(t.form,"narration",e)},expression:"form.narration"}})],1)],1)],1)},g=[],d=o(24),T=o(58),C=o(4),k=o(9),w=o(73),D={name:"FormPayCheck",props:{formType:{type:String,default:""}},data:function(){return{tab:null,menu:"",menu2:"",menu3:"",menu4:"",logo:"",search:null,selectedItem:1,dialog:!1,checkbox:!1,deposit:!1,tax:!0,withholding:!1,submitLoad:!1,showLoading:!1,form:{},itemCategory:[],itemUnit:[],itemPayPeriod:[],itemContact:[],itemAccounts:[],itemTag:[],itemPaymentTerm:[],itemWarehouse:[],itemFiles:[],taxDetails:[],itemSalesPersons:[],statusProcessing:"insert",valueWhenIsEmpty:"0",tempTotalTax:0,subTotalMinDiscount:0,taxAmount:0,taxDiscount:0,amountBeforeTax:0,withholdingAmount:0,commission:0,moneyOptions:{locale:"en",prefix:"",length:11,precision:0},moneyOptionTotal:{locale:"en",prefix:"",length:14,precision:2},moneyOptionTotalDiscount:{locale:"en",prefix:"",length:14,precision:0}}},activated:function(){var t=this;this.$nextTick(function(){t.$nuxt.$loading.start()}),this.getMasterData()},mounted:function(){this.getMasterData()},methods:{changePeriodDate:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark(function a(){var n;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t.$axios.get("/api/payroll/employee-commission",{params:{date_period:t.form.pay_period}});case 2:n=l.sent,t.$refs.childDetails.setCommission(n.data.data);case 4:case"end":return l.stop()}},a)}))()},changeQty:function(){this.$refs.childDetails.setQty(this.form.planned_qty)},checkDisable:function(){return this.form.status==="closed"||this.form.status==="cancel"},statusColor:function(t){switch(t){case"planned":return"blue darken-3";case"partial":return"orange";case"released":return"orange";case"closed":return"green";case"overdue":return"red";case"cancel":return"red"}},calcTotal:function(t){try{this.form.main_account_amount=t.subTotal}catch(a){console.log(a)}},showLoad:function(t){this.showLoading=t},setData:function(t,a,n){var e=this;this.showLoading=!0,setTimeout(function(){e.$refs.childDetails.setDataToDetails([{quantity:null}],t,a,n)},500),this.form=Object.assign({},t),this.form.tax_details&&(this.form.tax_details=this.reduceArrayTax(this.form.tax_details)),this.moneyOptionTotal.prefix=this.form.default_currency_symbol,this.moneyOptionTotalDiscount.prefix=this.form.default_currency_symbol,this.moneyOptions.prefix=this.form.default_currency_symbol,this.statusProcessing="insert"},eventGetFiles:function(t){this.itemFiles=t.row},getMasterData:function(){var t=this;return Object(d.a)(regeneratorRuntime.mark(function a(){var n,e;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.$nuxt.$loading.start(),s.prev=1,s.next=4,t.$axios.get("/api/payroll/pay-period",{params:{pay_schedule_id:1}});case 4:return n=s.sent,s.next=7,t.$axios.get("/api/financial/accounts",{params:{type:"BANK"}});case 7:e=s.sent,t.itemAccounts=e.data.data,t.itemPayPeriod=n.data.data,s.next=15;break;case 12:s.prev=12,s.t0=s.catch(1),t.$swal({type:"error",title:"Error",text:s.t0.response.data.error});case 15:case"end":return s.stop()}},a,null,[[1,12]])}))()},checkDocument:function(){var t=this.$route.query.type;switch(t){case"SQ":case"PQ":return!1;default:return!0}},returnData:function(t){var a=this,n={},e=a.$refs.childDetails.getAddData(t);return e.forEach(function(l,s){a.$refs.childDetails.checkIfEmptyRow(s)||(n[s]=l)}),this.form.line_items=n,this.form},changeValue:function(t,a){this.form[t]=a}}},P=D,b=o(50),x=Object(b.a)(P,y,g,!1,null,null,null),A=u.default=x.exports}}]);
