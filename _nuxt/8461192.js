(window.webpackJsonp=window.webpackJsonp||[]).push([[57,31],{1114:function(S,g,i){"use strict";i.r(g);var l=i(635),_=i(165),b=i(250),o=i(595),x=i(587),C=i(626),v=i(31),f=i(600),D=i(629),k=i(588),p=i(699),F=i(597),A=i(376),u=i(575),h=i(27),r=i(7),m=i(46),I=function(){var t=this,e=t._self._c;return e("div",[e("DialogForm",{ref:"dialogForm",attrs:{"max-width":"600px","dialog-title":t.formTitle,"button-title":"Save"},scopedSlots:t._u([{key:"content",fn:function(){return[e(C.a,[e(x.a,[e(f.a,{attrs:{dense:""}},[e(o.a,{attrs:{cols:"12",md:"4"}},[e(l.a,{attrs:{items:t.itemGroup,label:"Type","item-text":"name","item-value":"id",outlined:"","persistent-hint":"",dense:"","hide-details":"auto"},scopedSlots:t._u([{key:"item",fn:function(a){return[e(v.b,[e(v.d,{staticClass:"font-weight-bold",domProps:{textContent:t._s(a.item.name)}}),t._v(" "),e(v.c,{domProps:{textContent:t._s(a.item.desc)}})],1)]}}]),model:{value:t.form.item_group_id,callback:function(a){t.$set(t.form,"item_group_id",a)},expression:"form.item_group_id"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"8"}},[e(u.a,{attrs:{label:"Name",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",a)},expression:"form.name"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"4"}},[e(u.a,{attrs:{label:"Code",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.code,callback:function(a){t.$set(t.form,"code",a)},expression:"form.code"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"4"}},[e(l.a,{attrs:{items:t.itemCategory,label:"Category","item-text":"name","item-value":"id",outlined:"","persistent-hint":"",dense:"","hide-details":"auto"},model:{value:t.form.category_id,callback:function(a){t.$set(t.form,"category_id",a)},expression:"form.category_id"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"4"}},[e(l.a,{attrs:{items:t.itemUnit,label:"Unit","item-text":"name","item-value":"name",outlined:"","persistent-hint":"",dense:"","hide-details":"auto"},model:{value:t.form.unit,callback:function(a){t.$set(t.form,"unit",a)},expression:"form.unit"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"4"}},[e(l.a,{attrs:{items:t.itemPriceList,label:"Price List","item-text":"price_list_name","item-value":"id",outlined:"","persistent-hint":"",dense:"","hide-details":"auto"},model:{value:t.form.price_list_id,callback:function(a){t.$set(t.form,"price_list_id",a)},expression:"form.price_list_id"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"4"}},[e(u.a,{staticClass:"text-money",attrs:{type:"number","value-when-is-empty":t.valueWhenIsEmpty,options:t.moneyOptions,label:"Commission Rate",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.commision_rate,callback:function(a){t.$set(t.form,"commision_rate",a)},expression:"form.commision_rate"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12"}},[e(b.a,{attrs:{flat:""}},[e(F.a,{model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},t._l(t.items,function(s){return e(k.a,{key:s.tab,attrs:{href:s.href}},[t._v(`
                    `+t._s(s.tab)+`
                  `)])}),1),t._v(" "),e(A.a,{model:{value:t.tab,callback:function(a){t.tab=a},expression:"tab"}},[e(p.a,{attrs:{value:"tab-1"}},[e(f.a,{staticClass:"mt-2",attrs:{dense:""}},[e(o.a,{attrs:{cols:"12"}},[e(u.a,{attrs:{label:"Descriptions",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.description,callback:function(a){t.$set(t.form,"description",a)},expression:"form.description"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"3"}},[e(u.a,{staticClass:"text-money",attrs:{type:"number","value-when-is-empty":t.valueWhenIsEmpty,options:t.moneyOptions,label:"Sales Price",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.sale_price,callback:function(a){t.$set(t.form,"sale_price",a)},expression:"form.sale_price"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"9"}},[e(l.a,{attrs:{items:t.itemAccounts,"item-text":"name","item-value":"id",label:"Income Account",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.revenue_account_id,callback:function(a){t.$set(t.form,"revenue_account_id",a)},expression:"form.revenue_account_id"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"3"}},[e(l.a,{attrs:{items:t.itemTax,"item-text":"name","item-value":"id",label:"Sales Tax",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.sell_tax_id,callback:function(a){t.$set(t.form,"sell_tax_id",a)},expression:"form.sell_tax_id"}})],1)],1)],1),t._v(" "),e(p.a,{attrs:{value:"tab-2"}},[e(f.a,{staticClass:"mt-2",attrs:{dense:""}},[e(o.a,{attrs:{cols:"12"}},[e(u.a,{attrs:{label:"Descriptions",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.purchase_description,callback:function(a){t.$set(t.form,"purchase_description",a)},expression:"form.purchase_description"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"3"}},[e(u.a,{staticClass:"text-money",attrs:{type:"number","value-when-is-empty":t.valueWhenIsEmpty,options:t.moneyOptions,label:"Cost",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.purchase_price,callback:function(a){t.$set(t.form,"purchase_price",a)},expression:"form.purchase_price"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"9"}},[e(l.a,{attrs:{items:t.itemAccounts,"item-text":"name","item-value":"id",label:"Expense Account",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.expense_account_id,callback:function(a){t.$set(t.form,"expense_account_id",a)},expression:"form.expense_account_id"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"12"}},[e(l.a,{attrs:{items:t.itemContact,"item-text":"name","item-value":"id",label:"Prefered Vendor",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.contact_id,callback:function(a){t.$set(t.form,"contact_id",a)},expression:"form.contact_id"}})],1)],1)],1),t._v(" "),e(p.a,{attrs:{value:"tab-3"}},[e(f.a,{staticClass:"mt-2",attrs:{dense:""}},[e(o.a,{attrs:{cols:"12",md:"12"}},[e(l.a,{attrs:{items:t.itemAccounts,"item-text":"name","item-value":"id",label:"Default Inventory Account",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.inventory_account,callback:function(a){t.$set(t.form,"inventory_account",a)},expression:"form.inventory_account"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"12"}},[e(l.a,{attrs:{items:t.itemAccounts,"item-text":"name","item-value":"id",label:"COGS Account",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.cogs_account_id,callback:function(a){t.$set(t.form,"cogs_account_id",a)},expression:"form.cogs_account_id"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"12"}},[e(l.a,{attrs:{items:t.itemAccounts,"item-text":"name","item-value":"id",label:"Allocation Account",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.allocation_account_id,callback:function(a){t.$set(t.form,"allocation_account_id",a)},expression:"form.allocation_account_id"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"12"}},[e(l.a,{attrs:{items:t.itemAccounts,"item-text":"name","item-value":"id",label:"Price Diff Account",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.price_diff_account_id,callback:function(a){t.$set(t.form,"price_diff_account_id",a)},expression:"form.price_diff_account_id"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"12"}},[e(D.a,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("Warehouse")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("On Hand")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Ordered")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Committed")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Available")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Cost")])])]),t._v(" "),e("tbody",t._l(t.form.item_warehouse,function(a){return e("tr",{key:a.whs_name},[e("td",[t._v(t._s(a.whs_name))]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(`
                                  `+t._s(t.$formatter.formatPrice(a.on_hand_qty))+`
                                `)]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(`
                                  `+t._s(t.$formatter.formatPrice(a.ordered_qty))+`
                                `)]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(`
                                  `+t._s(t.$formatter.formatPrice(a.committed_qty))+`
                                `)]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(`
                                  `+t._s(t.$formatter.formatPrice(a.available_qty))+`
                                `)]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(`
                                  `+t._s(t.$auth.user.entity.currency.currency_symbol+" "+t.$formatter.formatPrice(a.item_cost))+`
                                `)])])}),0)]},proxy:!0}])})],1)],1)],1),t._v(" "),e(p.a,{attrs:{value:"tab-4"}},[e(f.a,{staticClass:"mt-2",attrs:{dense:""}},[e(o.a,{attrs:{cols:"12",md:"12"}},[e(l.a,{attrs:{items:["backflush","manual"],label:"Issue Method",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.issue_method,callback:function(a){t.$set(t.form,"issue_method",a)},expression:"form.issue_method"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"12"}},[e(l.a,{attrs:{items:["production","sales","assembly","template"],label:"Material Type",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.material_type,callback:function(a){t.$set(t.form,"material_type",a)},expression:"form.material_type"}})],1),t._v(" "),e(o.a,{attrs:{cols:"12",md:"12"}},[e(l.a,{attrs:{items:["moving average"],label:"Valuation Method",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.valuation_method,callback:function(a){t.$set(t.form,"valuation_method",a)},expression:"form.valuation_method"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"saveData",fn:function(){return[e(_.a,{attrs:{color:"green darken-1",dark:"",small:"",loading:t.submitLoad},on:{click:function(a){return t.save()}}},[t._v(`
        `+t._s(t.buttonTitle)+`
      `)])]},proxy:!0}])}),t._v(" "),e("LazyInventoryFormMaster",{ref:"formMaster",on:{returnData:t.returnData}})],1)},$=[],O=i(24),R=i(58),U=i(73),E={name:"FormProduct",props:{formTitle:{type:String,default:""},buttonTitle:{type:String,default:""},formData:{type:Object,default:function(){return{}}}},data:function(){return{logo:"",dialog:!1,tab:null,submitLoad:!1,form:this.formData,selectedItem:1,itemCategory:[],itemUnit:[],itemPriceList:[],itemAccounts:[],itemWarehouse:[],items:[{tab:"Sales Data",href:"#tab-1"},{tab:"Purchase Data",href:"#tab-2"},{tab:"Inventory Data",href:"#tab-3"},{tab:"Production Data",href:"#tab-4"}],itemGroup:[{id:1,name:"Inventory",desc:this.$t("Product you buy and/or sell and you track quantities of")},{id:3,name:"Service",desc:this.$t("Service that you provide to customers, for example, landscaping or tax preparation services")}],menu:"",itemTax:[],itemContact:[],images:[],statusProcessing:"insert",valueWhenIsEmpty:null,temp_image:null,url:"/api/inventory/items",moneyOptions:{suffix:"",length:11,precision:2},options:{url:"/api/document-files",timeout:9e9,addRemoveLinks:!0,withCredentials:!0,thumbnailWidth:50,thumbnailHeight:50,acceptedFiles:"image/*",dictDefaultMessage:"<span class='mdi mdi-cloud-upload'></span> UPLOAD HERE"}}},methods:{loadData:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark(function e(){var c,s,a,y,V,L,T;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.get("/api/inventory/item-category");case 3:return c=n.sent,n.next=6,t.$axios.get("/api/inventory/item-units");case 6:return s=n.sent,n.next=9,t.$axios.get("/api/financial/accounts",{params:{type:"All"}});case 9:return a=n.sent,n.next=12,t.$axios.get("/api/financial/taxes");case 12:return y=n.sent,n.next=15,t.$axios.get("/api/bp/contacts");case 15:return V=n.sent,n.next=18,t.$axios.get("/api/inventory/warehouse");case 18:return L=n.sent,n.next=21,t.$axios.get("/api/inventory/price-list");case 21:T=n.sent,t.itemCategory=c.data.data,t.itemUnit=s.data.data,t.itemAccounts=a.data.data,t.itemTax=y.data.data,t.itemContact=V.data.data,t.itemWarehouse=L.data.data,t.itemPriceList=T.data.data,n.next=34;break;case 31:n.prev=31,n.t0=n.catch(0),t.$swal({type:"error",title:"Error",text:n.t0.response.data.error});case 34:case"end":return n.stop()}},e,null,[[0,31]])}))()},newData:function(t){this.$refs.dialogForm.openDialog(),this.statusProcessing="insert",this.form=Object.assign({},t),this.getFiles(),this.loadData()},editItem:function(t,e){var c=t;this.form=Object.assign({},c),this.statusProcessing="update",this.$refs.dialogForm.openDialog(),this.getFiles(),this.loadData()},sendingParams:function(t,e,c){var s=this.form.id?this.form.id:this.form.temp_id;c.append("temp_id",s),c.append("type","item")},handleError:function(t,e,c){this.$swal({type:"error",title:"Error...",text:e.message})},reloadAttachment:function(t,e){var c=this;e.errors?this.$swal({type:"error",title:"Oops...",text:e.message}):(this.$emit("eventCountAttachment",{total:e.data.count,row:this.row}),setTimeout(function(){c.getFiles()},300),this.$swal({type:"success",title:"Success...",text:"Attachment uploaded!"}))},getFiles:function(){var t=this;this.showLoadingAttachment=!0;var e=this,c=this.form.id?this.form.id:this.form.temp_id;this.$axios.get(this.options.url,{params:{type:"item",temp_id:c}}).then(function(s){e.images=s.data.data,e.total=s.data.total,e.showLoadingAttachment=!1}).catch(function(s){t.showLoadingAttachment=!1,t.$swal({type:"error",title:"Oops...",text:s.response.message})})},returnData:function(t){t.type==="Item Category"?this.itemCategory=t.item:t.type==="Item Unit"&&(this.itemUnit=t.item)},close:function(){var t=this;this.$refs.dialogForm.closeDialog(),this.statusProcessing="insert",setTimeout(function(){t.form=Object.assign({},t.defaultItem)},300)},save:function(){var t=this,e=this.statusProcessing;e==="insert"?(this.store("post",this.url,this.form),t.submitLoad=!1):e==="update"&&(this.store("put",this.url+"/"+this.form.id,this.form),t.submitLoad=!1)},store:function(t,e,c){var s=this,a=this;a.submitLoad=!0,this.$axios({method:t,url:e,data:c}).then(function(y){s.$refs.dialogForm.closeDialog(),s.$emit("getDataFromApi")}).catch(function(y){s.$swal({type:"error",title:"Error",text:y.response.data.message}),a.submitLoad=!1})}}},j=E,W=i(50),P=Object(W.a)(j,I,$,!1,null,null,null),M=g.default=P.exports;installComponents(P,{DialogForm:i(602).default})},602:function(S,g,i){"use strict";i.r(g);var l=i(165),_=i(250),b=i(87),o=i(596),x=i(577),C=i(248),v=i(589),f=function(){var r=this,m=r._self._c;return m(o.a,{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:r.original,"max-width":r.maxWidth,transition:"dialog-top-transition"},model:{value:r.dialog,callback:function($){r.dialog=$},expression:"dialog"}},[m(_.a,{attrs:{outlined:""}},[m(b.c,[m("span",{staticClass:"subtitle-2"},[r._v(r._s(r.dialogTitle))]),r._v(" "),m(v.a),r._v(" "),m(l.a,{attrs:{icon:"",color:"red",dark:""},on:{click:function($){return r.closeDialog()}}},[m(C.a,[r._v("mdi-close")])],1)],1),r._v(" "),m(x.a),r._v(" "),m(b.b,{staticClass:"pr-0 pl-0"},[r._t("content")],2),r._v(" "),m(x.a),r._v(" "),m(b.a,[r._t("addLine"),r._v(" "),m(v.a),r._v(" "),r._t("saveData")],2)],1)],1)},D=[],k={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},p=k,F=i(50),A=Object(F.a)(p,f,D,!1,null,null,null),u=g.default=A.exports}}]);
