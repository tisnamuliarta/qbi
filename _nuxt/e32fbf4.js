(window.webpackJsonp=window.webpackJsonp||[]).push([[86,7,17,23,31],{1129:function(ut,W,t){"use strict";t.r(W);var K=function(){var s=this,i=s._self._c;return i("div",{staticClass:"scroll-container-min",attrs:{id:"parentContainer"}},[i("hot-table",{ref:"details",attrs:{root:s.detailsRoot,settings:s.settings}}),s._v(" "),i("LazyInventoryDialogResource",{ref:"dialogResource",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:s.selectItems}}),s._v(" "),i("LazyInventoryDialogItem",{ref:"dialogItem",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:s.selectItems}}),s._v(" "),i("AccountingDialogAccount",{ref:"dialogAccount",on:{selectItems:s.selectAccount}})],1)},Q=[],$=t(24),F=t(17),B=t(73),dt=t(4),X=t(9),ot=t(7),z=t(46),q=t(27),rt=t(653),H=t(689),S=t(1165),A=t(894),U=t(1159),j=t(1162),x=t(710),nt=t(670),N=t(777),tt=t(895),M=t(912),at=t(1167),ft=t(1163),st=t(1164),et=t(897),it=t(686),ht=t(712),G=t(655);Object(H.c)(S.a),Object(H.c)(A.a),Object(H.c)(U.a),Object(H.c)(j.a),Object(x.c)(nt.a),Object(N.d)(tt.a),Object(N.d)(M.a),Object(N.d)(at.a),Object(N.d)(ft.a),Object(N.d)(st.a),Object(N.d)(et.a),Object(N.d)(it.a),Object(ht.c)("ButtonAddAccountRenderer",function(v,s,i,m,y,C,P){var O=null,R=window.detailProduction;if(R.form.status!=="closed"&&R.form.status!=="cancel")return O=document.createElement("button"),O.type="button",O.innerHTML='<span class="mdi mdi-arrow-right-bold"></span>',O.className="btnNPB",O.value="Details",O.addEventListener("mousedown",function(p){p.preventDefault(),R.$refs.dialogAccount.openDialog(i)}),s.innerText="",s.appendChild(O),s});var J=function(s,i){i.row===-1&&s.target.nodeName==="TD"&&(s.stopImmediatePropagation(),s.stopPropagation(),this.deselectCell())},lt={name:"TableDetailProduction",components:{HotTable:rt.a},data:function(){return{commissionRate:1,plannedQty:1,settings:{licenseKey:"non-commercial-and-evaluation",currentRowClassName:"currentRow",currentColClassName:"currentCol",startRows:1,rowHeaders:!0,manualColumnResize:!0,rowHeights:28,viewportRowRenderingOffset:1e3,viewportColumnRenderingOffset:100,colWidths:80,persistentState:!0,width:"100%",height:"auto",stretchH:"all",hiddenColumns:{copyPasteEnabled:!1,indicator:!1,columns:[0,1,2]},beforeOnCellMouseDown:J,colHeaders:["Id","Base ID","account ID","Type","","Item Code","Description","Qty","Units","Unit Price","Warehouse","Amount",""],columns:[{data:"id",wordWrap:!1},{data:"item_id",width:150,readOnly:!0,wordWrap:!1},{data:"account_id",width:150,readOnly:!0,wordWrap:!1},{data:"item_type",width:60,height:26,wordWrap:!1,editor:"select",selectOptions:["item","resource"],visibleRows:5,strict:!0,filter:!1,allowInvalid:!1},{width:20,wordWrap:!1,renderer:function(i,m,y,C,P,O,R){var p=null,T=window.detailProduction;if(T.form.status==="planned")return p=document.createElement("button"),p.type="button",p.innerHTML='<span class="mdi mdi-arrow-right-bold"></span>',p.className="btnNPB",p.value="Details",p.addEventListener("mousedown",function(L){L.preventDefault();var w=T.$refs.details.hotInstance.getDataAtRowProp(y,"item_type");w||T.$swal({type:"error",title:"Error",text:"Please select item type first!"}),w==="item"?T.$refs.dialogItem.openDialog(y,T.form.warehouse_id):w==="resource"&&T.$refs.dialogResource.openDialog(y)}),m.innerText="",m.appendChild(p),m}},{data:"item_code",width:120,readOnly:!0,wordWrap:!1},{data:"narration",width:250,wordWrap:!1},{data:"base_qty",width:80,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"unit",className:"htCenter",width:60,readOnly:!0,wordWrap:!1},{data:"amount",width:100,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"whs_code",width:100,height:26,wordWrap:!1,editor:"select",className:"htCenter",selectOptions:function(){var i=window.detailProduction;return i.$auth.$storage.getState("warehouse")},visibleRows:5,strict:!0,filter:!1,allowInvalid:!1},{data:"sub_total",width:100,wordWrap:!1,type:"numeric",readOnly:!0,numericFormat:{pattern:"0,0.00"}},{width:20,wordWrap:!1,renderer:function(i,m,y,C,P,O,R){var p=null,T=window.detailProduction;return T.form.status==="planned"&&(p=document.createElement("button"),p.type="button",p.innerHTML='<span class="mdi mdi-delete"></span>',p.className="btnDelete",p.value="Details2",p.addEventListener("mousedown",function(L){L.preventDefault(),T.removeRow(y)}),m.innerText="",m.appendChild(p)),m}}]},detailsRoot:"detailsRoot",colHeaders:[],form:{}}},created:function(){this.setInstance()},methods:{setInstance:function(){window.detailProduction=this},removeRow:function(s){this.$refs.details.hotInstance.alter("remove_row",s)},addLine:function(){var s=this.$refs.details.hotInstance.countRows();this.$refs.details.hotInstance.alter("insert_row",s+1,1),this.$refs.details.hotInstance.setDataAtRowProp([[s,"item_type","item","edit"]])},updateTableSettings:function(s){var i=this;this.$refs.details.hotInstance.batch(function(){i.$refs.details.hotInstance.updateSettings({licenseKey:"non-commercial-and-evaluation",height:"auto",beforeRefreshDimensions:function(){return!1},beforeOnCellMouseDown:J,afterRemoveRow:function(y,C,P,O){var R=window.detailProduction;R.calculateTotal()},beforeRemoveRow:function(y,C,P,O){var R=window.detailProduction,p=[];P.forEach(function(L,w){var I=R.$refs.details.hotInstance.getDataAtCell(L,0);I&&p.push(I)});var T=R.$refs.details.hotInstance.countRows();return T===1&&R.$emit("calcTotal",{subTotal:0,amount:0,discountAmount:0,taxDetail:[]}),p.length>0&&R.$emit("removeData",{id:p}),!0},afterChange:function(y,C){var P=window.detailProduction;if(y){var O=0,R,p=[];if(y.forEach(function(yt){var ct=Object(F.a)(yt,4),Et=ct[0],Ot=ct[1],Ct=ct[2],Dt=ct[3];if(O=Ot,O==="base_qty"||O==="amount"){var xt=P.$refs.details.hotInstance.getDataAtCell(Et,7),At=xt||0,jt=P.$refs.details.hotInstance.getDataAtCell(Et,9),Tt=jt||0,Z=At*Tt,pt=[Et,Ot,Ct,Dt,Z];Ct!==Dt&&(R=y[0][0],p.push(pt))}}),O==="base_qty"||O==="amount"){for(var T=[],L=0,w=!1,I=0,_t=p.length;I<_t;I++){var vt=p[I][0];vt!=="10"&&(w=!0,R===vt?L=L+1:(R=vt,L=0),L===1&&T.push(p[I]))}if(w)for(var Rt=0,It=T.length;Rt<It;Rt++)P.calculateTotal()}}}})})},selectItems:function(s){var i=s.row,m=s.selected,y=this;this.$refs.details.hotInstance.batch(function(){m.forEach(function(C,P){var O=C.description?C.description:C.name,R=C.resource_type===void 0?"item":"resource",p=R==="item"?C.purchase_price:0;y.$refs.details.hotInstance.setDataAtRowProp([[i,"item_type",R,"edit"],[i,"amount",p,"edit"],[i,"item_code",C.code,"edit"],[i,"item_id",C.id,"edit"],[i,"unit",C.unit,"edit"],[i,"whs_code",C.whs_code,"edit"],[i,"narration",O,"edit"],[i,"base_qty",1,"edit"]]),i++})})},selectAccount:function(s){var i=s.row,m=s.selected;this.$refs.details.hotInstance.setDataAtRowProp(i,"account_id",m[0].id),this.$refs.details.hotInstance.setDataAtRowProp(i,"account_code",m[0].code)},setDataToDetails:function(s,i){var m=this,y=this;this.form=i,this.$refs.details.hotInstance.batch(function(){m.updateTableSettings();var C=i.line_items.length>0?i.line_items:s;y.$refs.details.hotInstance.loadData(C),m.$nuxt.$loading.finish()})},setCommission:function(s){var i=this;this.$refs.details.hotInstance.batch(function(){i.commissionRate=s,i.calculateTotal()})},setQty:function(s){var i=this;this.$refs.details.hotInstance.batch(function(){i.plannedQty=s,i.calculateTotal()})},calculateTotal:function(){var s=this,i=this.$refs.details.hotInstance.countRows(),m=0,y=0,C=0,P=0;i>0&&this.$refs.details.hotInstance.batch(function(){s.$refs.details.hotInstance.suspendExecution();for(var O=0;O<i;O++){var R=s.$refs.details.hotInstance.getDataAtRowProp(O,"item_type");R==="resource"&&P++}for(var p=0;p<i;p++){var T=s.$refs.details.hotInstance.getDataAtRowProp(p,"item_type"),L=s.$refs.details.hotInstance.getDataAtRowProp(p,"item_code"),w=0,I=0;T==="resource"?(L?(w=parseFloat(s.plannedQty/P),I=parseFloat(s.commissionRate/P),s.$refs.details.hotInstance.setDataAtCell([[p,7,w,"edit"],[p,9,I,"edit"]])):(w=s.$refs.details.hotInstance.getDataAtRowProp(p,"base_qty"),I=s.$refs.details.hotInstance.getDataAtRowProp(p,"amount")),C=C+w*I):(w=s.$refs.details.hotInstance.getDataAtRowProp(p,"base_qty"),I=s.$refs.details.hotInstance.getDataAtRowProp(p,"amount"),y=y+w*I);var _t=w*I;m=m+w*I,s.$refs.details.hotInstance.setDataAtRowProp([[p,"sub_total",_t,"edit"]])}s.$refs.details.hotInstance.resumeExecution()}),this.$emit("calcTotal",{subTotal:m,productCost:y,componentCost:C})},getTaxRate:function(s){var i=this;return Object($.a)(regeneratorRuntime.mark(function m(){var y;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,i.$axios.get("/api/financial/taxes/0",{params:{name:s}});case 2:return y=P.sent,P.abrupt("return",y.data.data.rows);case 4:case"end":return P.stop()}},m)}))()},getDataAtRowPro:function(s,i){return this.$refs.details.hotInstance.getDataAtRowProp(s,i)},countRows:function(){return this.$refs.details.hotInstance.countRows()},checkIfEmptyRow:function(s){return this.$refs.details.hotInstance.isEmptyRow(s)},getAddData:function(s){if(s==="0")for(var i=this.$refs.details.hotInstance.countRows(),m=0;m<i;m++)this.$refs.details.hotInstance.setDataAtRowProp(m,"id",null);return this.$refs.details.hotInstance.getSourceData()}}},D=lt,c=t(50),u=Object(c.a)(D,K,Q,!1,null,null,null),f=W.default=u.exports;installComponents(u,{AccountingDialogAccount:t(666).default})},598:function(ut,W,t){"use strict";var K=t(7),Q=t.n(K),$=t(10),F=t.n($),B=t(12),dt=t.n(B),X=t(13),ot=t.n(X),z=t(2),q=t(4),rt=t.n(q),H=t(34),S=t.n(H),A=t(51),U=t.n(A),j=t(28),x=t.n(j),nt=t(8),N=t.n(nt),tt=t(21),M=t.n(tt),at=t(64),ft=t.n(at),st=t(269),et=t.n(st),it=t(33),ht=t.n(it),G=t(270),J=t.n(G),lt=t(271),D=t.n(lt),c=t(272),u=t.n(c),f=t(273),v=t.n(f),s=t(274),i=t.n(s),m=t(275),y=t.n(m),C=t(276),P=t.n(C),O=t(277),R=t.n(O),p=t(278),T=t.n(p),L=t(279),w=t.n(L),I=t(280),_t=t.n(I),vt=t(281),Rt=t.n(vt),It=t(282),yt=t.n(It),ct=t(35),Et=t.n(ct),Ot=t(9),Ct=t.n(Ot),Dt=t(283),xt=t.n(Dt),At=t(3),jt=t(77),Tt=t(1);function Z(o,n){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);n&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable})),a.push.apply(a,e)}return a}function pt(o){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Z(Object(a),!0).forEach(function(e){Object(z.a)(o,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}var Ut=["sm","md","lg","xl"],gt=["start","end","center"];function St(o,n){return Ut.reduce(function(a,e){return a[o+Object(Tt.I)(e)]=n(),a},{})}var Lt=function(n){return[].concat(gt,["baseline","stretch"]).includes(n)},Mt=St("align",function(){return{type:String,default:null,validator:Lt}}),Wt=function(n){return[].concat(gt,["space-between","space-around"]).includes(n)},k=St("justify",function(){return{type:String,default:null,validator:Wt}}),mt=function(n){return[].concat(gt,["space-between","space-around","stretch"]).includes(n)},Bt=St("alignContent",function(){return{type:String,default:null,validator:mt}}),bt={align:Object.keys(Mt),justify:Object.keys(k),alignContent:Object.keys(Bt)},Vt={align:"align",justify:"justify",alignContent:"align-content"};function Kt(o,n,a){var e=Vt[o];if(a!=null){if(n){var l=n.replace(o,"");e+="-".concat(l)}return e+="-".concat(a),e.toLowerCase()}}var r=new Map;W.a=At.default.extend({name:"v-row",functional:!0,props:pt(pt(pt({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:Lt}},Mt),{},{justify:{type:String,default:null,validator:Wt}},k),{},{alignContent:{type:String,default:null,validator:mt}},Bt),render:function(n,a){var e=a.props,l=a.data,d=a.children,h="";for(var g in e)h+=String(e[g]);var _=r.get(h);return _||function(){var E;_=[];var b;for(b in bt)bt[b].forEach(function(V){var Pt=e[V],Y=Kt(b,V,Pt);Y&&_.push(Y)});_.push((E={"no-gutters":e.noGutters,"row--dense":e.dense},Object(z.a)(E,"align-".concat(e.align),e.align),Object(z.a)(E,"justify-".concat(e.justify),e.justify),Object(z.a)(E,"align-content-".concat(e.alignContent),e.alignContent),E)),r.set(h,_)}(),n(e.tag,Object(jt.a)(l,{staticClass:"row",class:_}),d)}})},599:function(ut,W,t){var K=t(375),Q=t(47);ut.exports=function($,F,B){return B.get&&K(B.get,F,{getter:!0}),B.set&&K(B.set,F,{setter:!0}),Q.f($,F,B)}},600:function(ut,W,t){"use strict";t.r(W);var K=t(165),Q=t(249),$=t(87),F=t(594),B=t(575),dt=t(247),X=t(589),ot=function(){var j=this,x=j._self._c;return x(F.a,{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:j.original,"max-width":j.maxWidth,transition:"dialog-top-transition"},model:{value:j.dialog,callback:function(N){j.dialog=N},expression:"dialog"}},[x(Q.a,[x($.c,[x("span",{staticClass:"subtitle-2"},[j._v(j._s(j.dialogTitle))]),j._v(" "),x(X.a),j._v(" "),x(K.a,{attrs:{icon:"",color:"red",dark:""},on:{click:function(N){return j.closeDialog()}}},[x(dt.a,[j._v("mdi-close-circle")])],1)],1),j._v(" "),x(B.a),j._v(" "),x($.b,{staticClass:"pr-0 pl-0"},[j._t("content")],2),j._v(" "),x(B.a),j._v(" "),x($.a,[j._t("addLine"),j._v(" "),x(X.a),j._v(" "),j._t("saveData")],2)],1)],1)},z=[],q={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},rt=q,H=t(50),S=Object(H.a)(rt,ot,z,!1,null,null,null),A=W.default=S.exports},644:function(ut,W,t){"use strict";t.r(W);var K=t(165),Q=t(587),$=t(908),F=t(247),B=t(248),dt=t(166),X=t(31),ot=t(576),z=t(598),q=t(592),rt=t(573),H=t(21),S=t(268),A=function(){var c=this,u=c._self._c;return u(z.a,[u(Q.a,{staticClass:"mt-0",attrs:{cols:"12"}},[u(q.a,{directives:[{name:"show",rawName:"v-show",value:c.loading,expression:"loading"}],attrs:{type:"table"}}),c._v(" "),u($.a,{directives:[{name:"show",rawName:"v-show",value:!c.loading,expression:"!loading"}],class:c.viewData?"elevation-0":"elevation-1",attrs:{"mobile-breakpoint":0,headers:c.headers,items:c.allData,loading:c.loading,"single-select":c.viewData,"show-select":"","fixed-header":"",search:c.search,height:c.viewData?"60vh":"70vh",dense:"","footer-props":{"items-per-page-options":[250,500,-1]}},scopedSlots:c._u([{key:"top",fn:function(){return[c.viewData?c._e():u("div",{staticClass:"pl-4 pt-2"},[u("span",{staticClass:"font-weight-medium text-h6"},[c._v(c._s(c.$t("Chart Of Accounts"))+`
          `)])]),c._v(" "),u("LazyMainToolbar",{attrs:{"document-status":c.documentStatus,"search-status":c.searchStatus,"item-search":c.itemSearch,"search-item":c.searchItem,search:c.search,"show-zero-qty":!0,title:"Chart of Accounts","show-batch-action":"","show-new-data":"","show-filter":"","show-search-filter":!1,"new-data-text":"New Account"},on:{emitData:c.emitData,newData:c.newData,getDataFromApi:c.getDataFromApi},scopedSlots:c._u([{key:"search",fn:function(){return[u(rt.a,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:c.search,callback:function(i){c.search=i},expression:"search"}})]},proxy:!0}])})]},proxy:!0},{key:"item.balance",fn:function(v){var s=v.item;return[c._v(`
        `+c._s(s.currency.currency_code+" "+c.$formatter.formatPrice(s.balance))+`
      `)]}},{key:"item.code",fn:function(v){var s=v.item;return[u("a",{on:{click:function(m){return c.viewItem(s)}}},[u("strong",{domProps:{textContent:c._s(s.code)}})])]}},{key:"item.id",fn:function(v){var s=v.item;return[u(K.a,{staticClass:"font-weight-bold text-right",attrs:{color:"secondary",text:"",small:""},on:{click:function(m){return c.actions(c.itemAction,s)}}},[c._v(`
          `+c._s(c.itemText)+`
        `)]),c._v(" "),u(ot.a,{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:c._u([{key:"activator",fn:function(m){var y=m.on,C=m.attrs;return[u(K.a,c._g(c._b({attrs:{color:"black",dark:"",icon:""}},"v-btn",C,!1),y),[u(F.a,[c._v("mdi-menu-down")])],1)]}}],null,!0)},[c._v(" "),u(B.a,c._l(c.items,function(i,m){return u(dt.a,{key:m,on:{click:function(C){return c.actions(i.action,s)}}},[u(X.a,[u(X.c,[c._v(c._s(i.text))])],1)],1)}),1)],1)]}}],null,!0),model:{value:c.selected,callback:function(v){c.selected=v},expression:"selected"}}),c._v(" "),u("LazyAccountingFormAccount",{ref:"forms",attrs:{"form-data":c.form,"form-title":c.formTitle,"button-title":c.buttonTitle,url:c.url},on:{getDataFromApi:c.getDataFromApi}})],1)],1)},U=[],j=t(8),x=t(7),nt=t(12),N=t(9),tt=t(13),M=t(2),at=t(10),ft=t(4);function st(D,c){var u=Object.keys(D);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(D);c&&(f=f.filter(function(v){return Object.getOwnPropertyDescriptor(D,v).enumerable})),u.push.apply(u,f)}return u}function et(D){for(var c=1;c<arguments.length;c++){var u=arguments[c]!=null?arguments[c]:{};c%2?st(Object(u),!0).forEach(function(f){Object(M.a)(D,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(u)):st(Object(u)).forEach(function(f){Object.defineProperty(D,f,Object.getOwnPropertyDescriptor(u,f))})}return D}var it={name:"ChartOfAccount",props:{viewData:{type:Boolean,default:!1},formType:{type:String,default:""}},data:function(){return{selected:[],totalData:0,editedIndex:-1,loading:!0,allData:[],documentStatus:[],itemSearch:[],searchStatus:"",searchItem:"",search:"",show_zero_balance:null,form:{},defaultItem:{},options:{},items:[{text:"Edit",action:"edit"},{text:"Delete",action:"delete"}],itemText:"Edit",itemAction:"edit",url:"/api/financial/accounts",headers:[],title:"Chart Of Accounts",formTypeData:null}},head:function(){return{title:this.title}},computed:{formTitle:function(){return this.editedIndex===-1?"New Account":"Edit Account"},buttonTitle:function(){return this.editedIndex===-1?"Save":"Update"}},activated:function(){this.getDataFromApi()},mounted:function(){this.mappingHeader()},methods:{returnSelected:function(){return this.selected},viewItem:function(c){this.$router.push({path:"/app/accounting/detail",query:{id:c.id}})},setEmptyToSelected:function(c){this.selected=[],this.formTypeData=this.$auth.$storage.getState("formType"),this.getDataFromApi()},newData:function(){this.editedIndex=-1,this.$refs.forms.newData(this.form)},actions:function(c,u){c==="edit"?this.editItem(u):this.deleteItem(u)},editItem:function(c){this.editedIndex=this.allData.indexOf(c),this.$refs.forms.editItem(c,this.form)},deleteItem:function(c){var u=this,f=this;this.$swal({title:"Are you sure?",text:"The data will be permanently deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(v){v.value&&u.$axios.delete(f.url+"/"+c.id).then(function(s){u.$swal({type:"success",title:"Success...",text:"Row Deleted!"}),u.getDataFromApi()}).catch(function(s){u.$swal({type:"error",title:"Oops...",text:s.response.data.message})})})},emitData:function(c){this.documentStatus=c.documentStatus,this.itemSearch=c.itemSearch,this.searchStatus=c.searchStatus,this.searchItem=c.searchItem,this.search=c.search,this.filters=c.filters,this.show_zero_balance=c.show_zero_balance,this.getDataFromApi()},mappingHeader:function(){this.viewData?this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name",cellClass:"disable-wrap"},{text:"Account Type",value:"account_type",cellClass:"disable-wrap"},{text:"Category",value:"category.name"}]:this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name"},{text:"Account Type",value:"account_type"},{text:"Category",value:"category.name"},{text:"Balance",value:"balance",cellClass:"disable-wrap",sortable:!1,filterable:!1},{text:"Actions",value:"id",align:"right",cellClass:"disable-wrap",sortable:!1,filterable:!1}]},searchData:function(c){this.search=c.search},getDataFromApi:function(){var c=this;this.loading=!0;var u=this,f="";this.formTypeData==="CS"?f="OPERATING_REVENUE":this.formTypeData==="CP"&&(f="OPERATING_EXPENSE, DIRECT_EXPENSE, OVERHEAD_EXPENSE, OTHER_EXPENSE, NON_CURRENT_ASSET, CURRENT_ASSET, INVENTORY");var v={searchItem:u.searchItem,documentStatus:u.documentStatus,searchStatus:u.searchStatus,search:u.search,show_zero_balance:u.show_zero_balance,type:f};this.$axios.get(this.url,{params:et(et({},u.options),v)}).then(function(s){c.loading=!1;var i=s.data;c.allData=i.data,c.totalData=i.total,c.itemSearch=i.filter,c.form=Object.assign({},i.form),c.defaultItem=Object.assign({},i.form)}).catch(function(s){c.loading=!1,c.$swal({type:"error",title:"Error",text:s.response.data.message})})}}},ht=it,G=t(50),J=Object(G.a)(ht,A,U,!1,null,null,null),lt=W.default=J.exports},666:function(ut,W,t){"use strict";t.r(W);var K=t(165),Q=t(585),$=t(247),F=function(){var S=this,A=S._self._c;return A("div",[A("DialogForm",{ref:"dialogForm",attrs:{"max-width":"1000px","dialog-title":S.$t("Chart Of Accounts"),"button-title":"Save",original:"top"},scopedSlots:S._u([{key:"content",fn:function(){return[A(Q.a,[A("AccountingTableAccount",{ref:"tableItem",attrs:{"view-data":S.viewData,"form-type":S.formType,"show-add-btn":S.showAddBtn}})],1)]},proxy:!0},{key:"saveData",fn:function(){return[A(K.a,{attrs:{color:"green darken-1",dark:"",small:""},on:{click:S.selectData}},[S._v(`
        Select Item
        `),A($.a,[S._v("mdi-arrow-down-right")])],1)]},proxy:!0}])})],1)},B=[],dt=t(58),X={name:"DialogItem",props:{viewData:{type:Boolean,default:!0},showAddBtn:{type:Boolean,default:!0},formType:{type:String,default:""}},data:function(){return{row:null}},methods:{openDialog:function(S,A){var U=this;this.$refs.dialogForm.openDialog(),setTimeout(function(){U.$refs.tableItem.setEmptyToSelected(A)},150),this.row=S},selectData:function(){this.$emit("selectItems",{row:this.row,selected:this.$refs.tableItem.returnSelected()}),this.$refs.dialogForm.closeDialog()}}},ot=X,z=t(50),q=Object(z.a)(ot,F,B,!1,null,null,null),rt=W.default=q.exports;installComponents(q,{AccountingTableAccount:t(644).default,DialogForm:t(600).default})},670:function(ut,W,t){"use strict";t.d(W,"a",function(){return c});var K=t(606),Q=t(604),$=t(4),F=t(111),B=t(625),dt=t(12),X=t(7),ot=t(46),z=t(52),q=t(212),rt=t(33),H=t(35),S=t(871),A=t(605),U=t(601);function j(u){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},j(u)}function x(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function nt(u,f){for(var v=0;v<f.length;v++){var s=f[v];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(u,s.key,s)}}function N(u,f,v){return f&&nt(u.prototype,f),v&&nt(u,v),Object.defineProperty(u,"prototype",{writable:!1}),u}function tt(){return typeof Reflect!="undefined"&&Reflect.get?tt=Reflect.get.bind():tt=function(f,v,s){var i=M(f,v);if(!!i){var m=Object.getOwnPropertyDescriptor(i,v);return m.get?m.get.call(arguments.length<3?f:s):m.value}},tt.apply(this,arguments)}function M(u,f){for(;!Object.prototype.hasOwnProperty.call(u,f)&&(u=G(u),u!==null););return u}function at(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),f&&ft(u,f)}function ft(u,f){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},ft(u,f)}function st(u){var f=ht();return function(){var s=G(u),i;if(f){var m=G(this).constructor;i=Reflect.construct(s,arguments,m)}else i=s.apply(this,arguments);return et(this,i)}}function et(u,f){if(f&&(j(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return it(u)}function it(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function ht(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(u){return!1}}function G(u){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},G(u)}var J="ht_editor_visible",lt="selectEditor",D="select",c=function(u){at(v,u);var f=st(v);function v(){return x(this,v),f.apply(this,arguments)}return N(v,[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),Object(A.a)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(i){this.select.value=i}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="";var i=this.hot.getShortcutManager();i.setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",Object(A.v)(this.select,J)&&Object(A.K)(this.select,J),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var i=this;this.addHook("afterScrollHorizontally",function(){return i.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return i.refreshDimensions()}),this.addHook("afterColumnResize",function(){return i.refreshDimensions()}),this.addHook("afterRowResize",function(){return i.refreshDimensions()})}},{key:"prepare",value:function(i,m,y,C,P,O){var R=this;tt(G(v.prototype),"prepare",this).call(this,i,m,y,C,P,O);var p=this.cellProperties.selectOptions,T;typeof p=="function"?T=this.prepareOptions(p(this.row,this.col,this.prop)):T=this.prepareOptions(p),Object(A.e)(this.select),Object(U.o)(T,function(L,w){var I=R.hot.rootDocument.createElement("OPTION");I.value=w,Object(A.f)(I,L),R.select.appendChild(I)})}},{key:"prepareOptions",value:function(i){var m={};if(Array.isArray(i))for(var y=0,C=i.length;y<C;y++)m[i[y]]=i[y];else j(i)==="object"&&(m=i);return m}},{key:"refreshValue",value:function(){var i=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=i,this.setValue(i),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===S.b.EDITING){if(this.TD=this.getEditedCell(),!this.TD){this.close();return}var i=this.getEditedCellRect(),m=i.top,y=i.start,C=i.width,P=i.height,O=this.select.style;O.height="".concat(P,"px"),O.width="".concat(C,"px"),O.top="".concat(m,"px"),O[this.hot.isRtl()?"right":"left"]="".concat(y,"px"),O.margin="0px",Object(A.a)(this.select,J)}}},{key:"registerShortcuts",value:function(){var i=this,m=this.hot.getShortcutManager(),y=m.getContext("editor"),C={group:lt};this.isInFullEditMode()!==!1&&y.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var O=i.select.selectedIndex-1;O>=0&&(i.select[O].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var O=i.select.selectedIndex+1;O<=i.select.length-1&&(i.select[O].selected=!0)}}],C)}},{key:"unregisterShortcuts",value:function(){var i=this.hot.getShortcutManager(),m=i.getContext("editor");m.removeShortcutsByGroup(lt)}}],[{key:"EDITOR_TYPE",get:function(){return D}}]),v}(S.a)},686:function(ut,W,t){"use strict";t.d(W,"a",function(){return Kt});var K=t(212),Q=t(4),$=t(33),F=t(628),B=t(35),dt=t(36),X=t(58),ot=t(42),z=t(636),q=t(606),rt=t(604),H=t(111),S=t(625),A=t(12),U=t(7),j=t(46),x=t(52),nt=t(27),N=t(21),tt=t(896),M=t(607),at=t(663),ft=t(9),st=t(79),et=t(605);function it(r,o){return D(r)||lt(r,o)||G(r,o)||ht()}function ht(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G(r,o){if(!!r){if(typeof r=="string")return J(r,o);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(r,o)}}function J(r,o){(o==null||o>r.length)&&(o=r.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=r[n];return a}function lt(r,o){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a=[],e=!0,l=!1,d,h;try{for(n=n.call(r);!(e=(d=n.next()).done)&&(a.push(d.value),!(o&&a.length===o));e=!0);}catch(g){l=!0,h=g}finally{try{!e&&n.return!=null&&n.return()}finally{if(l)throw h}}return a}}function D(r){if(Array.isArray(r))return r}function c(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function u(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function f(r,o,n){return o&&u(r.prototype,o),n&&u(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}var v=function(){function r(o){c(this,r),this.hot=o,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}return f(r,[{key:"addRow",value:function(n,a){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={row:n};this.rows.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"addColumnHeadersRow",value:function(n){var a=this.hot.getColHeader(0);if(a!=null){var e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=n,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}},{key:"addColumn",value:function(n,a){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={col:n};this.columns.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(n)!==null&&this.hot.view.appendColHeader(n,this.table.th),this.table.tBody.appendChild(this.createCol(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"getHeights",value:function(n){this.injected||this.injectTable(),Object(M.a)(this.rows,function(a){n(a.row,Object(et.H)(a.table)-1)})}},{key:"getWidths",value:function(n){this.injected||this.injectTable(),Object(M.a)(this.columns,function(a){var e=a.table.getBoundingClientRect(),l=e.width;n(a.col,Math.ceil(l))})}},{key:"setSettings",value:function(n){this.settings=n}},{key:"setSetting",value:function(n,a){this.settings||(this.settings={}),this.settings[n]=a}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(n){return this.settings?this.settings[n]:null}},{key:"createColGroupsCol",value:function(){var n=this,a=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&a.appendChild(this.createColElement(-1)),this.samples.forEach(function(e){Object(M.a)(e.strings,function(l){a.appendChild(n.createColElement(l.col))})}),a}},{key:"createRow",value:function(n){var a=this,e=this.hot.rootDocument,l=e.createDocumentFragment(),d=e.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(n,d),l.appendChild(d)),this.samples.forEach(function(h){Object(M.a)(h.strings,function(g){var _=g.col,E=a.hot.getCellMeta(n,_);E.col=_,E.row=n;var b=a.hot.getCellRenderer(E),V=e.createElement("td");V.setAttribute("ghost-table",1),b(a.hot,V,n,_,a.hot.colToProp(_),g.value,E),l.appendChild(V)})}),l}},{key:"appendColumnHeadersRow",value:function(){var n=this,a=this.hot.rootDocument,e=a.createDocumentFragment(),l=[];if(this.hot.hasRowHeaders()){var d=a.createElement("th");l.push([-1,d]),e.appendChild(d)}this.samples.forEach(function(h){Object(M.a)(h.strings,function(g){var _=g.col,E=a.createElement("th");l.push([_,E]),e.appendChild(E)})}),this.table.tHead.appendChild(e),Object(M.a)(l,function(h){var g=it(h,2),_=g[0],E=g[1];n.hot.view.appendColHeader(_,E)})}},{key:"createCol",value:function(n){var a=this,e=this.hot.rootDocument,l=e.createDocumentFragment();return this.samples.forEach(function(d){Object(M.a)(d.strings,function(h){var g=h.row,_=a.hot.getCellMeta(g,n);_.col=n,_.row=g;var E=a.hot.getCellRenderer(_),b=e.createElement("td"),V=e.createElement("tr");b.setAttribute("ghost-table",1),E(a.hot,b,g,n,a.hot.colToProp(n),h.value,_),V.appendChild(b),l.appendChild(V)})}),l}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((n||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(n){var a=this.hot.rootDocument.createElement("col");return a.style.width="".concat(this.hot.view._wt.wtTable.getStretchedColumnWidth(n),"px"),a}},{key:"createTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),l=a.createElement("table"),d=a.createElement("thead"),h=a.createElement("tbody"),g=a.createElement("colgroup"),_=a.createElement("tr"),E=a.createElement("th");return this.isVertical()&&l.appendChild(g),this.isHorizontal()&&(_.appendChild(E),d.appendChild(_),l.style.tableLayout="auto",l.style.width="auto"),l.appendChild(d),this.isVertical()&&h.appendChild(_),l.appendChild(h),Object(et.a)(l,n),e.appendChild(l),{fragment:e,table:l,tHead:d,tBody:h,colGroup:g,tr:_,th:E}}},{key:"createContainer",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),l=a.createElement("div"),d="htGhostTable htAutoSize ".concat(n.trim());return Object(et.a)(l,d),e.appendChild(l),{fragment:e,container:l}}},{key:"isVertical",value:function(){return!!(this.rows.length&&!this.columns.length)}},{key:"isHorizontal",value:function(){return!!(this.columns.length&&!this.rows.length)}}]),r}(),s=v,i=t(639),m=t(601),y=t(632),C=t(269),P=t(8),O=t(623),R=t(617);function p(r,o,n){return o in r?Object.defineProperty(r,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[o]=n,r}function T(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function L(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function w(r,o,n){return o&&L(r.prototype,o),n&&L(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}var I=function(){function r(o){T(this,r),this.samples=null,this.dataFactory=o,this.customSampleCount=null,this.allowDuplicates=!1}return w(r,[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:r.SAMPLE_COUNT}},{key:"setSampleCount",value:function(n){this.customSampleCount=n}},{key:"setAllowDuplicates",value:function(n){this.allowDuplicates=n}},{key:"generateRowSamples",value:function(n,a){return this.generateSamples("row",a,n)}},{key:"generateColumnSamples",value:function(n,a){return this.generateSamples("col",a,n)}},{key:"generateSamples",value:function(n,a,e){var l=this,d=new Map,h=typeof e=="number"?{from:e,to:e}:e,g=h.from,_=h.to;return Object(y.c)(g,_,function(E){var b=l.generateSample(n,a,E);d.set(E,b)}),d}},{key:"generateSample",value:function(n,a,e){var l=this;if(n!=="row"&&n!=="col")throw new Error("Unsupported sample type");var d=new Map,h=n==="row"?"col":"row",g=[];return Object(y.c)(a.from,a.to,function(_){var E=n==="row"?l.dataFactory(e,_):l.dataFactory(_,e),b=E.value,V=E.bundleSeed,Pt=typeof V=="string"&&V.length>0,Y;Pt?Y=V:Object(m.l)(b)?Y="".concat(Object.keys(b).length):Array.isArray(b)?Y="".concat(b.length):Y="".concat(Object(R.f)(b).length),d.has(Y)||d.set(Y,{needed:l.getSampleCount(),strings:[]});var wt=d.get(Y);if(wt.needed){var $t=g.indexOf(b)>-1;(!$t||l.allowDuplicates||Pt)&&(wt.strings.push(p({value:b},h,_)),g.push(b),wt.needed-=1)}}),d}}],[{key:"SAMPLE_COUNT",get:function(){return 3}}]),r}(),_t=I,vt=t(642),Rt=t(889),It=t(693);function yt(r){return yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},yt(r)}function ct(r,o){return xt(r)||Dt(r,o)||Ot(r,o)||Et()}function Et(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ot(r,o){if(!!r){if(typeof r=="string")return Ct(r,o);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(r,o)}}function Ct(r,o){(o==null||o>r.length)&&(o=r.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=r[n];return a}function Dt(r,o){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a=[],e=!0,l=!1,d,h;try{for(n=n.call(r);!(e=(d=n.next()).done)&&(a.push(d.value),!(o&&a.length===o));e=!0);}catch(g){l=!0,h=g}finally{try{!e&&n.return!=null&&n.return()}finally{if(l)throw h}}return a}}function xt(r){if(Array.isArray(r))return r}function At(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function jt(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function Tt(r,o,n){return o&&jt(r.prototype,o),n&&jt(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Z(){return typeof Reflect!="undefined"&&Reflect.get?Z=Reflect.get.bind():Z=function(o,n,a){var e=pt(o,n);if(!!e){var l=Object.getOwnPropertyDescriptor(e,n);return l.get?l.get.call(arguments.length<3?o:a):l.value}},Z.apply(this,arguments)}function pt(r,o){for(;!Object.prototype.hasOwnProperty.call(r,o)&&(r=k(r),r!==null););return r}function Ut(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),o&&gt(r,o)}function gt(r,o){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},gt(r,o)}function St(r){var o=Wt();return function(){var a=k(r),e;if(o){var l=k(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return Lt(this,e)}}function Lt(r,o){if(o&&(yt(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mt(r)}function Mt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Wt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function k(r){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},k(r)}i.a.getSingleton().register("modifyAutoColumnSizeSeed");var mt="autoColumnSize",Bt=10,bt=new WeakMap,Vt="autoColumnSize",Kt=function(r){Ut(n,r);var o=St(n);function n(a){var e;return At(this,n),e=o.call(this,a),bt.set(Mt(e),{cachedColumnHeaders:[]}),e.ghostTable=new s(e.hot),e.samplesGenerator=new _t(function(l,d){var h=e.hot.getCellMeta(l,d),g="";h.spanned||(g=e.hot.getDataAtCell(l,d));var _="";return e.hot.hasHook("modifyAutoColumnSizeSeed")&&(_=e.hot.runHooks("modifyAutoColumnSizeSeed",_,h,g)),{value:g,bundleSeed:_}}),e.firstCalculation=!0,e.inProgress=!1,e.measuredColumns=0,e.columnWidthsMap=new It.a,e.hot.columnIndexMapper.registerMap(Vt,e.columnWidthsMap),e.addHook("beforeColumnResize",function(l,d,h){return e.onBeforeColumnResize(l,d,h)}),e}return Tt(n,[{key:"isEnabled",value:function(){return this.hot.getSettings()[mt]!==!1&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var l=this.hot.getSettings()[mt];l&&l.useHeaders!==null&&l.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",l.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("beforeChangeRender",function(d){return e.onBeforeChange(d)}),this.addHook("afterFormulasValuesUpdate",function(d){return e.onAfterFormulasValuesUpdate(d)}),this.addHook("beforeViewRender",function(d){return e.onBeforeViewRender(d)}),this.addHook("modifyColWidth",function(d,h){return e.getColumnWidth(h,d)}),this.addHook("afterInit",function(){return e.onAfterInit()}),Z(k(n.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var e=this.findColumnsWhereHeaderWasChanged();e.length&&(this.clearCache(e),this.calculateVisibleColumnsWidth()),Z(k(n.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var e=this;Z(k(n.prototype),"disablePlugin",this).call(this),this.addHook("beforeColumnResize",function(l,d,h){return e.onBeforeColumnResize(l,d,h)})}},{key:"calculateVisibleColumnsWidth",value:function(){var e=this.hot.countRows();if(!!e){var l=this.hot.renderCall,d=this.getFirstVisibleColumn(),h=this.getLastVisibleColumn();d===-1||h===-1||this.calculateColumnsWidth({from:d,to:h},void 0,l)}}},{key:"calculateColumnsWidth",value:function(){var e=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=typeof l=="number"?{from:l,to:l}:l,_=typeof d=="number"?{from:d,to:d}:d;Object(y.c)(g.from,g.to,function(E){var b=e.hot.toPhysicalColumn(E);if(b===null&&(b=E),h||e.columnWidthsMap.getValueAtIndex(b)===null&&!e.hot._getColWidthFromSettings(b)){var V=e.samplesGenerator.generateColumnSamples(E,_);Object(M.a)(V,function(Pt){var Y=ct(Pt,2),wt=Y[0],$t=Y[1];return e.ghostTable.addColumn(wt,$t)})}}),this.ghostTable.columns.length&&(this.hot.batchExecution(function(){e.ghostTable.getWidths(function(E,b){var V=e.hot.toPhysicalColumn(E);e.columnWidthsMap.setValueAtIndex(V,b)})},!0),this.measuredColumns=g.to+1,this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var e=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},d=0,h=this.hot.countCols()-1,g=null;this.inProgress=!0;var _=function b(){if(!e.hot){Object(at.a)(g),e.inProgress=!1;return}e.calculateColumnsWidth({from:d,to:Math.min(d+n.CALCULATION_STEP,h)},l),d=d+n.CALCULATION_STEP+1,d<h?g=Object(at.i)(b):(Object(at.a)(g),e.inProgress=!1,e.hot.view.adjustElementsSize())},E=this.getSyncCalculationLimit();this.firstCalculation&&E>=0&&(this.calculateColumnsWidth({from:0,to:E},l),this.firstCalculation=!1,d=E+1),d<h?_():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var e=this.hot.getSettings()[mt],l=e&&Object(m.j)(e,"samplingRatio")?e.samplingRatio:void 0,d=e&&Object(m.j)(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;l&&!isNaN(l)&&this.samplesGenerator.setSampleCount(parseInt(l,10)),d&&this.samplesGenerator.setAllowDuplicates(d)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&this.hot.view._wt.wtTable.isVisible()&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var e=this.hot.getSettings()[mt],l=n.SYNC_CALCULATION_LIMIT,d=this.hot.countCols()-1;return Object(m.l)(e)&&(l=e.syncLimit,Object(vt.a)(l)?l=Object(y.e)(d,l):l>>=0),Math.min(l,d)}},{key:"getColumnWidth",value:function(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=l;return h===void 0&&(h=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),d&&typeof h=="number"&&(h=Math.max(h,Rt.a.DEFAULT_WIDTH))),h}},{key:"getFirstVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var l=e.wtTable.getFirstVisibleColumn();if(l!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(l)}if(e.wtViewport.columnsRenderCalculator){var d=e.wtTable.getFirstRenderedColumn();if(d!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(d)}return-1}},{key:"getLastVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var l=e.wtTable.getLastVisibleColumn();if(l!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(l)}if(e.wtViewport.columnsRenderCalculator){var d=e.wtTable.getLastRenderedColumn();if(d!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(d)}return-1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var e=this.hot.getColHeader(),l=bt.get(this),d=l.cachedColumnHeaders,h=Object(M.d)(e,function(g,_,E){var b=d.length;return(b-1<E||d[E]!==_)&&g.push(E),b-1<E?d.push(_):d[E]=_,g},[]);return h}},{key:"clearCache",value:function(){var e=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];l.length?this.hot.batchExecution(function(){Object(M.a)(l,function(d){e.columnWidthsMap.setValueAtIndex(d,null)})},!0):this.columnWidthsMap.clear()}},{key:"isNeedRecalculate",value:function(){return!!Object(M.b)(this.columnWidthsMap.getValues().slice(0,this.measuredColumns),function(e){return e===null}).length}},{key:"onBeforeViewRender",value:function(){this.calculateVisibleColumnsWidth(),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()}},{key:"onAfterLoadData",value:function(){var e=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){e.hot&&e.recalculateAllColumnsWidth()},0)}},{key:"onBeforeChange",value:function(e){var l=this,d=Object(M.c)(e,function(h){var g=ct(h,2),_=g[1];return l.hot.toPhysicalColumn(l.hot.propToCol(_))});this.clearCache(Array.from(new Set(d)))}},{key:"onBeforeColumnResize",value:function(e,l,d){var h=e;return d&&(this.calculateColumnsWidth(l,void 0,!0),h=this.getColumnWidth(l,void 0,!1)),h}},{key:"onAfterInit",value:function(){bt.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"onAfterFormulasValuesUpdate",value:function(e){var l=Object(M.b)(e,function(h){var g;return Object(R.b)((g=h.address)===null||g===void 0?void 0:g.col)}),d=Object(M.c)(l,function(h){return h.address.col});this.clearCache(Array.from(new Set(d)))}},{key:"destroy",value:function(){this.ghostTable.clean(),Z(k(n.prototype),"destroy",this).call(this)}}],[{key:"PLUGIN_KEY",get:function(){return mt}},{key:"PLUGIN_PRIORITY",get:function(){return Bt}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}]),n}(tt.a)}}]);
