(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{1034:function(t,e,o){"use strict";o.r(e);o(59),o(4),o(32),o(35),o(668),o(293);var n={name:"ChartOfAccount",data:function(){return{title:"AR Credit Memo",items:[{text:"Edit",action:"edit"},{text:"Delete",action:"delete"}],breadcrumb:[],form:{},audits:{},defaultItem:{},url:"/api/documents/form",dialogLoading:!1,showLoading:!1,dialog:!0,itemAction:[],actionName:"Save"}},activated:function(){this.dialog=!0,this.getDataFromApi()},methods:{close:function(){this.$router.back(),this.$nuxt.$emit("getDataFromApi")},checkDisable:function(){return"closed"===this.form.status||"cancel"===this.form.status},arrowLink:function(t,e){var o=this;this.$axios.get(this.url+"/arrow",{params:{type:e,status:t,document:this.$route.query.document}}).then((function(t){o.$router.push({path:"/dashboard/documents/form",query:{document:t.data.data.id,type:e}}),setTimeout((function(){o.getDataFromApi()}),300)})).catch((function(t){o.$swal({type:"error",title:"Error",text:t.response.data.message})}))},getDataFromApi:function(t){var e=this;this.showLoading=!0;var o=this.$route.query.type;this.$axios.get(this.url+"/"+this.$route.query.document,{params:{type:o,copyFromId:t}}).then((function(t){var form="";e.audits=t.data.data.audits,t.data.data.count>0?(form=t.data.data.rows,e.actionName="Update"):(form=t.data.data.form,e.actionName="Save"),e.form=Object.assign({},form),e.defaultItem=Object.assign({},form),setTimeout((function(){e.$refs.formDocument.setData(e.form)}),30)})).catch((function(t){var o=void 0!==t.response?t.response.data.message:t;e.$swal({type:"error",title:"Error",text:o})})).finally((function(t){e.showLoading=!1}))},actionDocument:function(t){var e=this;switch(t){case"SQ":case"SO":case"PQ":case"PO":var o=this.$route.query.document;this.$router.push({path:"/dashboard/documents/form",query:{document:0,type:t}}),setTimeout((function(){e.actionName="Save",e.$refs.formDocument.changeValue("type",t),e.$refs.formDocument.changeValue("parent_id",o)}),300);break;case"C":this.$refs.formDocument.changeValue("status","cancel"),this.store();break;case"sendEmail":this.openDialogEmail()}},deleteDocument:function(t){var e=this,o=this;this.$swal({title:"Are you sure?",text:"The data will be deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(n){n.value&&e.$axios.delete(e.url+"/"+t).then((function(t){e.$swal({type:"success",title:"Success...",text:"Data Deleted!"}),e.$router.push({path:o.$helper.mappingAction(o.$route.query.type)})})).catch((function(t){e.$swal({type:"error",title:"Oops...",text:t.response.data.message})}))}))},printAction:function(t){switch(t){case"preview":this.previewDocument();break;case"sendEmail":this.openDialogEmail()}},openDialogEmail:function(){this.$refs.dialogSendEmail.openEmailDialog(this.form)},previewDocument:function(){var t=this,e=this;this.dialogLoading=!0,this.$axios.get("/api/documents/print",{params:{id:e.form.id},responseType:"arraybuffer"}).then((function(o){t.dialogLoading=!1;var n=window.URL.createObjectURL(new Blob([o.data])),link=document.createElement("a");link.href=n,link.setAttribute("download",e.form.document_number+".pdf"),document.body.appendChild(link),link.click()})).catch((function(e){t.dialogLoading=!1,t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},store:function(){var t=this,e="0"===this.$route.query.document?"post":"patch",o="0"===this.$route.query.document?this.url:this.url+"/"+this.$route.query.document,data=this.$refs.formDocument.returnData(this.$route.query.document);this.dialogLoading=!0,this.$axios({method:e,url:o,data:data}).then((function(e){t.$router.push({path:"/dashboard/documents/form",query:{document:e.data.data.id,type:e.data.data.type}}),t.$nuxt.$emit("snackbar",e.data.message),setTimeout((function(){t.getDataFromApi()}),50)})).catch((function(e){t.$swal({type:"error",title:"Error",text:e.response.data.message})})).finally((function(e){t.dialogLoading=!1}))}}},r=o(50),c=o(51),d=o.n(c),l=o(164),m=o(248),h=o(88),f=o(586),v=o(595),y=o(576),$=o(247),w=o(249),D=o(165),_=o(34),x=o(577),k=o(593),V=o(120),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",persistent:"",transition:"dialog-top-transition",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",{attrs:{tile:""}},[e("v-card-title",[e("v-toolbar-title",[e("v-btn",{attrs:{icon:""}},[e("v-icon",[t._v("mdi-progress-pencil")])],1),t._v(" "),e("span",{domProps:{textContent:t._s(t.title)}})],1),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:"",dark:"",color:"red"},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",{staticClass:"pl-0 pr-0"},[e("v-container",{attrs:{fluid:""}},[e("LazyDocumentFormDocument",{ref:"formDocument"})],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"mr-3",attrs:{color:"green darken-1",dark:"",rounded:""},on:{click:t.close}},[t._v("\n          Save\n\n          "),e("v-menu",{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(o){var n=o.on,r=o.attrs;return[e("v-btn",t._g(t._b({attrs:{dark:"",icon:""}},"v-btn",r,!1),n),[e("v-icon",[t._v("mdi-menu-down")])],1)]}}])},[t._v(" "),e("v-list",t._l(t.items,(function(o,i){return e("v-list-item",{key:i},[e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(o.text))])],1)],1)})),1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;d()(component,{VBtn:l.a,VCard:m.a,VCardActions:h.a,VCardText:h.b,VCardTitle:h.c,VContainer:f.a,VDialog:v.a,VDivider:y.a,VIcon:$.a,VList:w.a,VListItem:D.a,VListItemContent:_.a,VListItemTitle:_.c,VMenu:x.a,VSpacer:k.a,VToolbarTitle:V.a})}}]);