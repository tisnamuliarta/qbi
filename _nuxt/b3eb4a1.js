(window.webpackJsonp=window.webpackJsonp||[]).push([[86,7,17,23,31],{1127:function(ut,B,t){"use strict";t.r(B);var $=function(){var s=this,l=s._self._c;return l("div",{staticClass:"scroll-container-min",attrs:{id:"parentContainer"}},[l("hot-table",{ref:"details",attrs:{root:s.detailsRoot,settings:s.settings}}),s._v(" "),l("LazyInventoryDialogResource",{ref:"dialogResource",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:s.selectItems}}),s._v(" "),l("LazyInventoryDialogItem",{ref:"dialogItem",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:s.selectItems}}),s._v(" "),l("AccountingDialogAccount",{ref:"dialogAccount",on:{selectItems:s.selectAccount}})],1)},X=[],H=t(24),z=t(17),U=t(73),dt=t(4),J=t(9),st=t(7),G=t(46),tt=t(27),ft=t(653),N=t(689),M=t(1163),T=t(894),V=t(1157),b=t(1160),W=t(710),nt=t(670),F=t(777),Z=t(895),L=t(912),at=t(1165),ot=t(1161),it=t(1162),rt=t(897),lt=t(686),ht=t(712),Y=t(655);Object(N.c)(M.a),Object(N.c)(T.a),Object(N.c)(V.a),Object(N.c)(b.a),Object(W.c)(nt.a),Object(F.d)(Z.a),Object(F.d)(L.a),Object(F.d)(at.a),Object(F.d)(ot.a),Object(F.d)(it.a),Object(F.d)(rt.a),Object(F.d)(lt.a),Object(ht.c)("ButtonAddAccountRenderer",function(h,s,l,v,E,j,R){var C=null,I=window.detailProduction;if(I.form.status!=="closed"&&I.form.status!=="cancel")return C=document.createElement("button"),C.type="button",C.innerHTML='<span class="mdi mdi-arrow-right-bold"></span>',C.className="btnNPB",C.value="Details",C.addEventListener("mousedown",function(g){g.preventDefault(),I.$refs.dialogAccount.openDialog(l)}),s.innerText="",s.appendChild(C),s});var et=function(s,l){l.row===-1&&s.target.nodeName==="TD"&&(s.stopImmediatePropagation(),s.stopPropagation(),this.deselectCell())},D={name:"TableDetailProduction",components:{HotTable:ft.a},data:function(){return{commissionRate:1,plannedQty:1,settings:{licenseKey:"non-commercial-and-evaluation",currentRowClassName:"currentRow",currentColClassName:"currentCol",startRows:1,rowHeaders:!0,manualColumnResize:!0,rowHeights:28,viewportRowRenderingOffset:1e3,viewportColumnRenderingOffset:100,colWidths:80,persistentState:!0,width:"100%",height:"auto",stretchH:"all",hiddenColumns:{copyPasteEnabled:!1,indicator:!1,columns:[0,1,2]},beforeOnCellMouseDown:et,colHeaders:["Id","Base ID","account ID","Type","","Item Code","Description","Qty","Units","Unit Price","Warehouse","Amount",""],columns:[{data:"id",wordWrap:!1},{data:"item_id",width:150,readOnly:!0,wordWrap:!1},{data:"account_id",width:150,readOnly:!0,wordWrap:!1},{data:"item_type",width:60,height:26,wordWrap:!1,editor:"select",selectOptions:["item","resource"],visibleRows:5,strict:!0,filter:!1,allowInvalid:!1},{width:20,wordWrap:!1,renderer:function(l,v,E,j,R,C,I){var g=null,S=window.detailProduction;if(S.form.status==="planned")return g=document.createElement("button"),g.type="button",g.innerHTML='<span class="mdi mdi-arrow-right-bold"></span>',g.className="btnNPB",g.value="Details",g.addEventListener("mousedown",function(x){x.preventDefault();var w=S.$refs.details.hotInstance.getDataAtRowProp(E,"item_type");w||S.$swal({type:"error",title:"Error",text:"Please select item type first!"}),w==="item"?S.$refs.dialogItem.openDialog(E,S.form.warehouse_id):w==="resource"&&S.$refs.dialogResource.openDialog(E)}),v.innerText="",v.appendChild(g),v}},{data:"item_code",width:120,readOnly:!0,wordWrap:!1},{data:"narration",width:250,wordWrap:!1},{data:"base_qty",width:80,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"unit",className:"htCenter",width:60,readOnly:!0,wordWrap:!1},{data:"amount",width:100,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"whs_code",width:100,height:26,wordWrap:!1,editor:"select",className:"htCenter",selectOptions:function(){var l=window.detailProduction;return l.$auth.$storage.getState("warehouse")},visibleRows:5,strict:!0,filter:!1,allowInvalid:!1},{data:"sub_total",width:100,wordWrap:!1,type:"numeric",readOnly:!0,numericFormat:{pattern:"0,0.00"}},{width:20,wordWrap:!1,renderer:function(l,v,E,j,R,C,I){var g=null,S=window.detailProduction;return S.form.status==="planned"&&(g=document.createElement("button"),g.type="button",g.innerHTML='<span class="mdi mdi-delete"></span>',g.className="btnDelete",g.value="Details2",g.addEventListener("mousedown",function(x){x.preventDefault(),S.removeRow(E)}),v.innerText="",v.appendChild(g)),v}}]},detailsRoot:"detailsRoot",colHeaders:[],form:{}}},created:function(){this.setInstance()},methods:{setInstance:function(){window.detailProduction=this},removeRow:function(s){this.$refs.details.hotInstance.alter("remove_row",s)},addLine:function(){var s=this.$refs.details.hotInstance.countRows();this.$refs.details.hotInstance.alter("insert_row",s+1,1),this.$refs.details.hotInstance.setDataAtRowProp([[s,"item_type","item","edit"]])},updateTableSettings:function(s){var l=this;this.$refs.details.hotInstance.batch(function(){l.$refs.details.hotInstance.updateSettings({licenseKey:"non-commercial-and-evaluation",height:"auto",beforeRefreshDimensions:function(){return!1},beforeOnCellMouseDown:et,afterRemoveRow:function(E,j,R,C){var I=window.detailProduction;I.calculateTotal()},beforeRemoveRow:function(E,j,R,C){var I=window.detailProduction,g=[];R.forEach(function(x,w){var A=I.$refs.details.hotInstance.getDataAtCell(x,0);A&&g.push(A)});var S=I.$refs.details.hotInstance.countRows();return S===1&&I.$emit("calcTotal",{subTotal:0,amount:0,discountAmount:0,taxDetail:[]}),g.length>0&&I.$emit("removeData",{id:g}),!0},afterChange:function(E,j){var R=window.detailProduction;if(E){var C=0,I,g=[];if(E.forEach(function(yt){var ct=Object(z.a)(yt,4),Et=ct[0],Ot=ct[1],Ct=ct[2],Dt=ct[3];if(C=Ot,C==="base_qty"||C==="amount"){var Lt=R.$refs.details.hotInstance.getDataAtCell(Et,7),At=Lt||0,jt=R.$refs.details.hotInstance.getDataAtCell(Et,9),Tt=jt||0,k=At*Tt,pt=[Et,Ot,Ct,Dt,k];Ct!==Dt&&(I=E[0][0],g.push(pt))}}),C==="base_qty"||C==="amount"){for(var S=[],x=0,w=!1,A=0,_t=g.length;A<_t;A++){var vt=g[A][0];vt!=="10"&&(w=!0,I===vt?x=x+1:(I=vt,x=0),x===1&&S.push(g[A]))}if(w)for(var Rt=0,It=S.length;Rt<It;Rt++)R.calculateTotal()}}}})})},selectItems:function(s){var l=s.row,v=s.selected,E=this;this.$refs.details.hotInstance.batch(function(){v.forEach(function(j,R){var C=j.description?j.description:j.name,I=j.resource_type===void 0?"item":"resource",g=I==="item"?j.purchase_price:0;E.$refs.details.hotInstance.setDataAtRowProp([[l,"item_type",I,"edit"],[l,"amount",g,"edit"],[l,"item_code",j.code,"edit"],[l,"item_id",j.id,"edit"],[l,"unit",j.unit,"edit"],[l,"whs_code",j.whs_code,"edit"],[l,"narration",C,"edit"],[l,"base_qty",1,"edit"]]),l++})})},selectAccount:function(s){var l=s.row,v=s.selected;this.$refs.details.hotInstance.setDataAtRowProp(l,"account_id",v[0].id),this.$refs.details.hotInstance.setDataAtRowProp(l,"account_code",v[0].code)},setDataToDetails:function(s,l){var v=this,E=this;this.form=l,this.$refs.details.hotInstance.batch(function(){v.updateTableSettings();var j=l.line_items.length>0?l.line_items:s;E.$refs.details.hotInstance.loadData(j),v.$nuxt.$loading.finish()})},setCommission:function(s){var l=this;this.$refs.details.hotInstance.batch(function(){l.commissionRate=s,l.calculateTotal()})},setQty:function(s){var l=this;this.$refs.details.hotInstance.batch(function(){l.plannedQty=s,l.calculateTotal()})},calculateTotal:function(){var s=this,l=this.$refs.details.hotInstance.countRows(),v=0,E=0,j=0,R=0;l>0&&this.$refs.details.hotInstance.batch(function(){s.$refs.details.hotInstance.suspendExecution();for(var C=0;C<l;C++){var I=s.$refs.details.hotInstance.getDataAtRowProp(C,"item_type");I==="resource"&&R++}for(var g=0;g<l;g++){var S=s.$refs.details.hotInstance.getDataAtRowProp(g,"item_type"),x=s.$refs.details.hotInstance.getDataAtRowProp(g,"item_code"),w=0,A=0;S==="resource"?(x?(w=parseFloat(s.plannedQty/R),A=parseFloat(s.commissionRate/R),s.$refs.details.hotInstance.setDataAtCell([[g,7,w,"edit"],[g,9,A,"edit"]])):(w=s.$refs.details.hotInstance.getDataAtRowProp(g,"base_qty"),A=s.$refs.details.hotInstance.getDataAtRowProp(g,"amount")),j=j+w*A):(w=s.$refs.details.hotInstance.getDataAtRowProp(g,"base_qty"),A=s.$refs.details.hotInstance.getDataAtRowProp(g,"amount"),E=E+w*A);var _t=w*A;v=v+w*A,s.$refs.details.hotInstance.setDataAtRowProp([[g,"sub_total",_t,"edit"]])}s.$refs.details.hotInstance.resumeExecution()}),this.$emit("calcTotal",{subTotal:v,productCost:E,componentCost:j})},getTaxRate:function(s){var l=this;return Object(H.a)(regeneratorRuntime.mark(function v(){var E;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,l.$axios.get("/api/financial/taxes/0",{params:{name:s}});case 2:return E=R.sent,R.abrupt("return",E.data.data.rows);case 4:case"end":return R.stop()}},v)}))()},getDataAtRowPro:function(s,l){return this.$refs.details.hotInstance.getDataAtRowProp(s,l)},countRows:function(){return this.$refs.details.hotInstance.countRows()},checkIfEmptyRow:function(s){return this.$refs.details.hotInstance.isEmptyRow(s)},getAddData:function(s){if(s==="0")for(var l=this.$refs.details.hotInstance.countRows(),v=0;v<l;v++)this.$refs.details.hotInstance.setDataAtRowProp(v,"id",null);return this.$refs.details.hotInstance.getSourceData()}}},c=D,p=t(50),d=Object(p.a)(c,$,X,!1,null,null,null),m=B.default=d.exports;installComponents(d,{AccountingDialogAccount:t(666).default})},598:function(ut,B,t){"use strict";var $=t(7),X=t.n($),H=t(10),z=t.n(H),U=t(12),dt=t.n(U),J=t(13),st=t.n(J),G=t(2),tt=t(4),ft=t.n(tt),N=t(34),M=t.n(N),T=t(51),V=t.n(T),b=t(28),W=t.n(b),nt=t(8),F=t.n(nt),Z=t(21),L=t.n(Z),at=t(64),ot=t.n(at),it=t(269),rt=t.n(it),lt=t(33),ht=t.n(lt),Y=t(270),et=t.n(Y),D=t(271),c=t.n(D),p=t(272),d=t.n(p),m=t(273),h=t.n(m),s=t(274),l=t.n(s),v=t(275),E=t.n(v),j=t(276),R=t.n(j),C=t(277),I=t.n(C),g=t(278),S=t.n(g),x=t(279),w=t.n(x),A=t(280),_t=t.n(A),vt=t(281),Rt=t.n(vt),It=t(282),yt=t.n(It),ct=t(35),Et=t.n(ct),Ot=t(9),Ct=t.n(Ot),Dt=t(283),Lt=t.n(Dt),At=t(3),jt=t(77),Tt=t(1);function k(o,n){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);n&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),a.push.apply(a,e)}return a}function pt(o){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?k(Object(a),!0).forEach(function(e){Object(G.a)(o,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}var Ut=["sm","md","lg","xl"],gt=["start","end","center"];function St(o,n){return Ut.reduce(function(a,e){return a[o+Object(Tt.I)(e)]=n(),a},{})}var Wt=function(n){return[].concat(gt,["baseline","stretch"]).includes(n)},Mt=St("align",function(){return{type:String,default:null,validator:Wt}}),xt=function(n){return[].concat(gt,["space-between","space-around"]).includes(n)},q=St("justify",function(){return{type:String,default:null,validator:xt}}),mt=function(n){return[].concat(gt,["space-between","space-around","stretch"]).includes(n)},Bt=St("alignContent",function(){return{type:String,default:null,validator:mt}}),bt={align:Object.keys(Mt),justify:Object.keys(q),alignContent:Object.keys(Bt)},Kt={align:"align",justify:"justify",alignContent:"align-content"};function Vt(o,n,a){var e=Kt[o];if(a!=null){if(n){var i=n.replace(o,"");e+="-".concat(i)}return e+="-".concat(a),e.toLowerCase()}}var r=new Map;B.a=At.default.extend({name:"v-row",functional:!0,props:pt(pt(pt({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:Wt}},Mt),{},{justify:{type:String,default:null,validator:xt}},q),{},{alignContent:{type:String,default:null,validator:mt}},Bt),render:function(n,a){var e=a.props,i=a.data,u=a.children,f="";for(var _ in e)f+=String(e[_]);var y=r.get(f);return y||function(){var O;y=[];var P;for(P in bt)bt[P].forEach(function(K){var Pt=e[K],Q=Vt(P,K,Pt);Q&&y.push(Q)});y.push((O={"no-gutters":e.noGutters,"row--dense":e.dense},Object(G.a)(O,"align-".concat(e.align),e.align),Object(G.a)(O,"justify-".concat(e.justify),e.justify),Object(G.a)(O,"align-content-".concat(e.alignContent),e.alignContent),O)),r.set(f,y)}(),n(e.tag,Object(jt.a)(i,{staticClass:"row",class:y}),u)}})},599:function(ut,B,t){var $=t(376),X=t(47);ut.exports=function(H,z,U){return U.get&&$(U.get,z,{getter:!0}),U.set&&$(U.set,z,{setter:!0}),X.f(H,z,U)}},600:function(ut,B,t){"use strict";t.r(B);var $=t(165),X=t(249),H=t(88),z=t(594),U=t(575),dt=t(247),J=t(589),st=function(){var b=this,W=b._self._c;return W(z.a,{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:b.original,"max-width":b.maxWidth,transition:"dialog-top-transition"},model:{value:b.dialog,callback:function(F){b.dialog=F},expression:"dialog"}},[W(X.a,[W(H.c,[W("span",{staticClass:"subtitle-2"},[b._v(b._s(b.dialogTitle))]),b._v(" "),W(J.a),b._v(" "),W($.a,{attrs:{icon:"",color:"red",dark:""},on:{click:function(F){return b.closeDialog()}}},[W(dt.a,[b._v("mdi-close-circle")])],1)],1),b._v(" "),W(U.a),b._v(" "),W(H.b,{staticClass:"pr-0 pl-0"},[b._t("content")],2),b._v(" "),W(U.a),b._v(" "),W(H.a,[b._t("addLine"),b._v(" "),W(J.a),b._v(" "),b._t("saveData")],2)],1)],1)},G=[],tt={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},ft=tt,N=t(50),M=Object(N.a)(ft,st,G,!1,null,null,null),T=B.default=M.exports},644:function(ut,B,t){"use strict";t.r(B);var $=t(165),X=t(587),H=t(908),z=t(247),U=t(248),dt=t(166),J=t(31),st=t(576),G=t(598),tt=t(573),ft=t(21),N=t(268),M=function(){var c=this,p=c._self._c;return p(G.a,[p(X.a,{staticClass:"mt-0",attrs:{cols:"12"}},[p(H.a,{class:c.viewData?"elevation-0":"elevation-1",attrs:{"mobile-breakpoint":0,headers:c.headers,items:c.allData,loading:c.loading,"single-select":c.viewData,"show-select":"","fixed-header":"",search:c.search,height:c.viewData?"60vh":"70vh",dense:"","footer-props":{"items-per-page-options":[250,500,-1]}},scopedSlots:c._u([{key:"top",fn:function(){return[c.viewData?c._e():p("div",{staticClass:"pl-4 pt-2"},[p("span",{staticClass:"font-weight-medium text-h6"},[c._v(c._s(c.$t("Chart Of Accounts"))+`
          `)])]),c._v(" "),p("LazyMainToolbar",{attrs:{"document-status":c.documentStatus,"search-status":c.searchStatus,"item-search":c.itemSearch,"search-item":c.searchItem,search:c.search,"show-zero-qty":!0,title:"Chart of Accounts","show-batch-action":"","show-new-data":"","show-filter":"","show-search-filter":!1,"new-data-text":"New Account"},on:{emitData:c.emitData,newData:c.newData,getDataFromApi:c.getDataFromApi},scopedSlots:c._u([{key:"search",fn:function(){return[p(tt.a,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:c.search,callback:function(s){c.search=s},expression:"search"}})]},proxy:!0}])})]},proxy:!0},{key:"item.balance",fn:function(m){var h=m.item;return[c._v(`
        `+c._s(h.currency.currency_code+" "+c.$formatter.formatPrice(h.balance))+`
      `)]}},{key:"item.code",fn:function(m){var h=m.item;return[p("a",{on:{click:function(l){return c.viewItem(h)}}},[p("strong",{domProps:{textContent:c._s(h.code)}})])]}},{key:"item.id",fn:function(m){var h=m.item;return[p($.a,{staticClass:"font-weight-bold text-right",attrs:{color:"secondary",text:"",small:""},on:{click:function(l){return c.actions(c.itemAction,h)}}},[c._v(`
          `+c._s(c.itemText)+`
        `)]),c._v(" "),p(st.a,{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:c._u([{key:"activator",fn:function(l){var v=l.on,E=l.attrs;return[p($.a,c._g(c._b({attrs:{color:"black",dark:"",icon:""}},"v-btn",E,!1),v),[p(z.a,[c._v("mdi-menu-down")])],1)]}}],null,!0)},[c._v(" "),p(U.a,c._l(c.items,function(s,l){return p(dt.a,{key:l,on:{click:function(E){return c.actions(s.action,h)}}},[p(J.a,[p(J.c,[c._v(c._s(s.text))])],1)],1)}),1)],1)]}}],null,!0),model:{value:c.selected,callback:function(m){c.selected=m},expression:"selected"}}),c._v(" "),p("LazyAccountingFormAccount",{ref:"forms",attrs:{"form-data":c.form,"form-title":c.formTitle,"button-title":c.buttonTitle,url:c.url},on:{getDataFromApi:c.getDataFromApi}})],1)],1)},T=[],V=t(8),b=t(7),W=t(12),nt=t(9),F=t(13),Z=t(2),L=t(10),at=t(4);function ot(D,c){var p=Object.keys(D);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(D);c&&(d=d.filter(function(m){return Object.getOwnPropertyDescriptor(D,m).enumerable})),p.push.apply(p,d)}return p}function it(D){for(var c=1;c<arguments.length;c++){var p=arguments[c]!=null?arguments[c]:{};c%2?ot(Object(p),!0).forEach(function(d){Object(Z.a)(D,d,p[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(p)):ot(Object(p)).forEach(function(d){Object.defineProperty(D,d,Object.getOwnPropertyDescriptor(p,d))})}return D}var rt={name:"ChartOfAccount",props:{viewData:{type:Boolean,default:!1},formType:{type:String,default:""}},data:function(){return{selected:[],totalData:0,editedIndex:-1,loading:!0,allData:[],documentStatus:[],itemSearch:[],searchStatus:"",searchItem:"",search:"",show_zero_balance:null,form:{},defaultItem:{},options:{},items:[{text:"Edit",action:"edit"},{text:"Delete",action:"delete"}],itemText:"Edit",itemAction:"edit",url:"/api/financial/accounts",headers:[],title:"Chart Of Accounts",formTypeData:null}},head:function(){return{title:this.title}},computed:{formTitle:function(){return this.editedIndex===-1?"New Account":"Edit Account"},buttonTitle:function(){return this.editedIndex===-1?"Save":"Update"}},activated:function(){this.getDataFromApi()},mounted:function(){this.mappingHeader()},methods:{returnSelected:function(){return this.selected},viewItem:function(c){this.$router.push({path:"/app/accounting/detail",query:{id:c.id}})},setEmptyToSelected:function(c){this.selected=[],this.formTypeData=this.$auth.$storage.getState("formType"),this.getDataFromApi()},newData:function(){this.editedIndex=-1,this.$refs.forms.newData(this.form)},actions:function(c,p){c==="edit"?this.editItem(p):this.deleteItem(p)},editItem:function(c){this.editedIndex=this.allData.indexOf(c),this.$refs.forms.editItem(c,this.form)},deleteItem:function(c){var p=this,d=this;this.$swal({title:"Are you sure?",text:"The data will be permanently deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(m){m.value&&p.$axios.delete(d.url+"/"+c.id).then(function(h){p.$swal({type:"success",title:"Success...",text:"Row Deleted!"}),p.getDataFromApi()}).catch(function(h){p.$swal({type:"error",title:"Oops...",text:h.response.data.message})})})},emitData:function(c){this.documentStatus=c.documentStatus,this.itemSearch=c.itemSearch,this.searchStatus=c.searchStatus,this.searchItem=c.searchItem,this.search=c.search,this.filters=c.filters,this.show_zero_balance=c.show_zero_balance,this.getDataFromApi()},mappingHeader:function(){this.viewData?this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name",cellClass:"disable-wrap"},{text:"Account Type",value:"account_type",cellClass:"disable-wrap"},{text:"Category",value:"category.name"}]:this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name"},{text:"Account Type",value:"account_type"},{text:"Category",value:"category.name"},{text:"Balance",value:"balance",cellClass:"disable-wrap",sortable:!1,filterable:!1},{text:"Actions",value:"id",align:"right",cellClass:"disable-wrap",sortable:!1,filterable:!1}]},searchData:function(c){this.search=c.search},getDataFromApi:function(){var c=this;this.loading=!0;var p=this,d="";this.formTypeData==="CS"?d="OPERATING_REVENUE":this.formTypeData==="CP"&&(d="OPERATING_EXPENSE, DIRECT_EXPENSE, OVERHEAD_EXPENSE, OTHER_EXPENSE, NON_CURRENT_ASSET, CURRENT_ASSET, INVENTORY");var m={searchItem:p.searchItem,documentStatus:p.documentStatus,searchStatus:p.searchStatus,search:p.search,show_zero_balance:p.show_zero_balance,type:d};this.$axios.get(this.url,{params:it(it({},p.options),m)}).then(function(h){c.loading=!1;var s=h.data;c.allData=s.data,c.totalData=s.total,c.itemSearch=s.filter,c.form=Object.assign({},s.form),c.defaultItem=Object.assign({},s.form)}).catch(function(h){c.loading=!1,c.$swal({type:"error",title:"Error",text:h.response.data.message})})}}},lt=rt,ht=t(50),Y=Object(ht.a)(lt,M,T,!1,null,null,null),et=B.default=Y.exports},666:function(ut,B,t){"use strict";t.r(B);var $=t(165),X=t(585),H=t(247),z=function(){var M=this,T=M._self._c;return T("div",[T("DialogForm",{ref:"dialogForm",attrs:{"max-width":"1000px","dialog-title":M.$t("Chart Of Accounts"),"button-title":"Save",original:"top"},scopedSlots:M._u([{key:"content",fn:function(){return[T(X.a,[T("AccountingTableAccount",{ref:"tableItem",attrs:{"view-data":M.viewData,"form-type":M.formType,"show-add-btn":M.showAddBtn}})],1)]},proxy:!0},{key:"saveData",fn:function(){return[T($.a,{attrs:{color:"green darken-1",dark:"",small:""},on:{click:M.selectData}},[M._v(`
        Select Item
        `),T(H.a,[M._v("mdi-arrow-down-right")])],1)]},proxy:!0}])})],1)},U=[],dt=t(58),J={name:"DialogItem",props:{viewData:{type:Boolean,default:!0},showAddBtn:{type:Boolean,default:!0},formType:{type:String,default:""}},data:function(){return{row:null}},methods:{openDialog:function(M,T){var V=this;this.$refs.dialogForm.openDialog(),setTimeout(function(){V.$refs.tableItem.setEmptyToSelected(T)},150),this.row=M},selectData:function(){this.$emit("selectItems",{row:this.row,selected:this.$refs.tableItem.returnSelected()}),this.$refs.dialogForm.closeDialog()}}},st=J,G=t(50),tt=Object(G.a)(st,z,U,!1,null,null,null),ft=B.default=tt.exports;installComponents(tt,{AccountingTableAccount:t(644).default,DialogForm:t(600).default})},670:function(ut,B,t){"use strict";t.d(B,"a",function(){return p});var $=t(606),X=t(604),H=t(4),z=t(111),U=t(625),dt=t(12),J=t(7),st=t(46),G=t(52),tt=t(212),ft=t(33),N=t(35),M=t(871),T=t(605),V=t(601);function b(d){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},b(d)}function W(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}function nt(d,m){for(var h=0;h<m.length;h++){var s=m[h];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(d,s.key,s)}}function F(d,m,h){return m&&nt(d.prototype,m),h&&nt(d,h),Object.defineProperty(d,"prototype",{writable:!1}),d}function Z(){return typeof Reflect!="undefined"&&Reflect.get?Z=Reflect.get.bind():Z=function(m,h,s){var l=L(m,h);if(!!l){var v=Object.getOwnPropertyDescriptor(l,h);return v.get?v.get.call(arguments.length<3?m:s):v.value}},Z.apply(this,arguments)}function L(d,m){for(;!Object.prototype.hasOwnProperty.call(d,m)&&(d=Y(d),d!==null););return d}function at(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(m&&m.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),Object.defineProperty(d,"prototype",{writable:!1}),m&&ot(d,m)}function ot(d,m){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,l){return s.__proto__=l,s},ot(d,m)}function it(d){var m=ht();return function(){var s=Y(d),l;if(m){var v=Y(this).constructor;l=Reflect.construct(s,arguments,v)}else l=s.apply(this,arguments);return rt(this,l)}}function rt(d,m){if(m&&(b(m)==="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lt(d)}function lt(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function ht(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(d){return!1}}function Y(d){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},Y(d)}var et="ht_editor_visible",D="selectEditor",c="select",p=function(d){at(h,d);var m=it(h);function h(){return W(this,h),m.apply(this,arguments)}return F(h,[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),Object(T.a)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(l){this.select.value=l}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="";var l=this.hot.getShortcutManager();l.setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",Object(T.v)(this.select,et)&&Object(T.K)(this.select,et),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var l=this;this.addHook("afterScrollHorizontally",function(){return l.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return l.refreshDimensions()}),this.addHook("afterColumnResize",function(){return l.refreshDimensions()}),this.addHook("afterRowResize",function(){return l.refreshDimensions()})}},{key:"prepare",value:function(l,v,E,j,R,C){var I=this;Z(Y(h.prototype),"prepare",this).call(this,l,v,E,j,R,C);var g=this.cellProperties.selectOptions,S;typeof g=="function"?S=this.prepareOptions(g(this.row,this.col,this.prop)):S=this.prepareOptions(g),Object(T.e)(this.select),Object(V.o)(S,function(x,w){var A=I.hot.rootDocument.createElement("OPTION");A.value=w,Object(T.f)(A,x),I.select.appendChild(A)})}},{key:"prepareOptions",value:function(l){var v={};if(Array.isArray(l))for(var E=0,j=l.length;E<j;E++)v[l[E]]=l[E];else b(l)==="object"&&(v=l);return v}},{key:"refreshValue",value:function(){var l=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=l,this.setValue(l),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===M.b.EDITING){if(this.TD=this.getEditedCell(),!this.TD){this.close();return}var l=this.getEditedCellRect(),v=l.top,E=l.start,j=l.width,R=l.height,C=this.select.style;C.height="".concat(R,"px"),C.width="".concat(j,"px"),C.top="".concat(v,"px"),C[this.hot.isRtl()?"right":"left"]="".concat(E,"px"),C.margin="0px",Object(T.a)(this.select,et)}}},{key:"registerShortcuts",value:function(){var l=this,v=this.hot.getShortcutManager(),E=v.getContext("editor"),j={group:D};this.isInFullEditMode()!==!1&&E.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var C=l.select.selectedIndex-1;C>=0&&(l.select[C].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var C=l.select.selectedIndex+1;C<=l.select.length-1&&(l.select[C].selected=!0)}}],j)}},{key:"unregisterShortcuts",value:function(){var l=this.hot.getShortcutManager(),v=l.getContext("editor");v.removeShortcutsByGroup(D)}}],[{key:"EDITOR_TYPE",get:function(){return c}}]),h}(M.a)},686:function(ut,B,t){"use strict";t.d(B,"a",function(){return Vt});var $=t(212),X=t(4),H=t(33),z=t(628),U=t(35),dt=t(36),J=t(58),st=t(42),G=t(636),tt=t(606),ft=t(604),N=t(111),M=t(625),T=t(12),V=t(7),b=t(46),W=t(52),nt=t(27),F=t(21),Z=t(896),L=t(607),at=t(663),ot=t(9),it=t(79),rt=t(605);function lt(r,o){return c(r)||D(r,o)||Y(r,o)||ht()}function ht(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y(r,o){if(!!r){if(typeof r=="string")return et(r,o);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(r,o)}}function et(r,o){(o==null||o>r.length)&&(o=r.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=r[n];return a}function D(r,o){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a=[],e=!0,i=!1,u,f;try{for(n=n.call(r);!(e=(u=n.next()).done)&&(a.push(u.value),!(o&&a.length===o));e=!0);}catch(_){i=!0,f=_}finally{try{!e&&n.return!=null&&n.return()}finally{if(i)throw f}}return a}}function c(r){if(Array.isArray(r))return r}function p(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function d(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function m(r,o,n){return o&&d(r.prototype,o),n&&d(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}var h=function(){function r(o){p(this,r),this.hot=o,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}return m(r,[{key:"addRow",value:function(n,a){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={row:n};this.rows.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"addColumnHeadersRow",value:function(n){var a=this.hot.getColHeader(0);if(a!=null){var e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=n,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}},{key:"addColumn",value:function(n,a){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={col:n};this.columns.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(n)!==null&&this.hot.view.appendColHeader(n,this.table.th),this.table.tBody.appendChild(this.createCol(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"getHeights",value:function(n){this.injected||this.injectTable(),Object(L.a)(this.rows,function(a){n(a.row,Object(rt.H)(a.table)-1)})}},{key:"getWidths",value:function(n){this.injected||this.injectTable(),Object(L.a)(this.columns,function(a){var e=a.table.getBoundingClientRect(),i=e.width;n(a.col,Math.ceil(i))})}},{key:"setSettings",value:function(n){this.settings=n}},{key:"setSetting",value:function(n,a){this.settings||(this.settings={}),this.settings[n]=a}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(n){return this.settings?this.settings[n]:null}},{key:"createColGroupsCol",value:function(){var n=this,a=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&a.appendChild(this.createColElement(-1)),this.samples.forEach(function(e){Object(L.a)(e.strings,function(i){a.appendChild(n.createColElement(i.col))})}),a}},{key:"createRow",value:function(n){var a=this,e=this.hot.rootDocument,i=e.createDocumentFragment(),u=e.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(n,u),i.appendChild(u)),this.samples.forEach(function(f){Object(L.a)(f.strings,function(_){var y=_.col,O=a.hot.getCellMeta(n,y);O.col=y,O.row=n;var P=a.hot.getCellRenderer(O),K=e.createElement("td");K.setAttribute("ghost-table",1),P(a.hot,K,n,y,a.hot.colToProp(y),_.value,O),i.appendChild(K)})}),i}},{key:"appendColumnHeadersRow",value:function(){var n=this,a=this.hot.rootDocument,e=a.createDocumentFragment(),i=[];if(this.hot.hasRowHeaders()){var u=a.createElement("th");i.push([-1,u]),e.appendChild(u)}this.samples.forEach(function(f){Object(L.a)(f.strings,function(_){var y=_.col,O=a.createElement("th");i.push([y,O]),e.appendChild(O)})}),this.table.tHead.appendChild(e),Object(L.a)(i,function(f){var _=lt(f,2),y=_[0],O=_[1];n.hot.view.appendColHeader(y,O)})}},{key:"createCol",value:function(n){var a=this,e=this.hot.rootDocument,i=e.createDocumentFragment();return this.samples.forEach(function(u){Object(L.a)(u.strings,function(f){var _=f.row,y=a.hot.getCellMeta(_,n);y.col=n,y.row=_;var O=a.hot.getCellRenderer(y),P=e.createElement("td"),K=e.createElement("tr");P.setAttribute("ghost-table",1),O(a.hot,P,_,n,a.hot.colToProp(n),f.value,y),K.appendChild(P),i.appendChild(K)})}),i}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((n||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(n){var a=this.hot.rootDocument.createElement("col");return a.style.width="".concat(this.hot.view._wt.wtTable.getStretchedColumnWidth(n),"px"),a}},{key:"createTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),i=a.createElement("table"),u=a.createElement("thead"),f=a.createElement("tbody"),_=a.createElement("colgroup"),y=a.createElement("tr"),O=a.createElement("th");return this.isVertical()&&i.appendChild(_),this.isHorizontal()&&(y.appendChild(O),u.appendChild(y),i.style.tableLayout="auto",i.style.width="auto"),i.appendChild(u),this.isVertical()&&f.appendChild(y),i.appendChild(f),Object(rt.a)(i,n),e.appendChild(i),{fragment:e,table:i,tHead:u,tBody:f,colGroup:_,tr:y,th:O}}},{key:"createContainer",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),i=a.createElement("div"),u="htGhostTable htAutoSize ".concat(n.trim());return Object(rt.a)(i,u),e.appendChild(i),{fragment:e,container:i}}},{key:"isVertical",value:function(){return!!(this.rows.length&&!this.columns.length)}},{key:"isHorizontal",value:function(){return!!(this.columns.length&&!this.rows.length)}}]),r}(),s=h,l=t(639),v=t(601),E=t(632),j=t(269),R=t(8),C=t(623),I=t(617);function g(r,o,n){return o in r?Object.defineProperty(r,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[o]=n,r}function S(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function x(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function w(r,o,n){return o&&x(r.prototype,o),n&&x(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}var A=function(){function r(o){S(this,r),this.samples=null,this.dataFactory=o,this.customSampleCount=null,this.allowDuplicates=!1}return w(r,[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:r.SAMPLE_COUNT}},{key:"setSampleCount",value:function(n){this.customSampleCount=n}},{key:"setAllowDuplicates",value:function(n){this.allowDuplicates=n}},{key:"generateRowSamples",value:function(n,a){return this.generateSamples("row",a,n)}},{key:"generateColumnSamples",value:function(n,a){return this.generateSamples("col",a,n)}},{key:"generateSamples",value:function(n,a,e){var i=this,u=new Map,f=typeof e=="number"?{from:e,to:e}:e,_=f.from,y=f.to;return Object(E.c)(_,y,function(O){var P=i.generateSample(n,a,O);u.set(O,P)}),u}},{key:"generateSample",value:function(n,a,e){var i=this;if(n!=="row"&&n!=="col")throw new Error("Unsupported sample type");var u=new Map,f=n==="row"?"col":"row",_=[];return Object(E.c)(a.from,a.to,function(y){var O=n==="row"?i.dataFactory(e,y):i.dataFactory(y,e),P=O.value,K=O.bundleSeed,Pt=typeof K=="string"&&K.length>0,Q;Pt?Q=K:Object(v.l)(P)?Q="".concat(Object.keys(P).length):Array.isArray(P)?Q="".concat(P.length):Q="".concat(Object(I.f)(P).length),u.has(Q)||u.set(Q,{needed:i.getSampleCount(),strings:[]});var wt=u.get(Q);if(wt.needed){var $t=_.indexOf(P)>-1;(!$t||i.allowDuplicates||Pt)&&(wt.strings.push(g({value:P},f,y)),_.push(P),wt.needed-=1)}}),u}}],[{key:"SAMPLE_COUNT",get:function(){return 3}}]),r}(),_t=A,vt=t(642),Rt=t(889),It=t(693);function yt(r){return yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},yt(r)}function ct(r,o){return Lt(r)||Dt(r,o)||Ot(r,o)||Et()}function Et(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ot(r,o){if(!!r){if(typeof r=="string")return Ct(r,o);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(r,o)}}function Ct(r,o){(o==null||o>r.length)&&(o=r.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=r[n];return a}function Dt(r,o){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a=[],e=!0,i=!1,u,f;try{for(n=n.call(r);!(e=(u=n.next()).done)&&(a.push(u.value),!(o&&a.length===o));e=!0);}catch(_){i=!0,f=_}finally{try{!e&&n.return!=null&&n.return()}finally{if(i)throw f}}return a}}function Lt(r){if(Array.isArray(r))return r}function At(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function jt(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function Tt(r,o,n){return o&&jt(r.prototype,o),n&&jt(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function k(){return typeof Reflect!="undefined"&&Reflect.get?k=Reflect.get.bind():k=function(o,n,a){var e=pt(o,n);if(!!e){var i=Object.getOwnPropertyDescriptor(e,n);return i.get?i.get.call(arguments.length<3?o:a):i.value}},k.apply(this,arguments)}function pt(r,o){for(;!Object.prototype.hasOwnProperty.call(r,o)&&(r=q(r),r!==null););return r}function Ut(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),o&&gt(r,o)}function gt(r,o){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},gt(r,o)}function St(r){var o=xt();return function(){var a=q(r),e;if(o){var i=q(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return Wt(this,e)}}function Wt(r,o){if(o&&(yt(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mt(r)}function Mt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function xt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function q(r){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},q(r)}l.a.getSingleton().register("modifyAutoColumnSizeSeed");var mt="autoColumnSize",Bt=10,bt=new WeakMap,Kt="autoColumnSize",Vt=function(r){Ut(n,r);var o=St(n);function n(a){var e;return At(this,n),e=o.call(this,a),bt.set(Mt(e),{cachedColumnHeaders:[]}),e.ghostTable=new s(e.hot),e.samplesGenerator=new _t(function(i,u){var f=e.hot.getCellMeta(i,u),_="";f.spanned||(_=e.hot.getDataAtCell(i,u));var y="";return e.hot.hasHook("modifyAutoColumnSizeSeed")&&(y=e.hot.runHooks("modifyAutoColumnSizeSeed",y,f,_)),{value:_,bundleSeed:y}}),e.firstCalculation=!0,e.inProgress=!1,e.measuredColumns=0,e.columnWidthsMap=new It.a,e.hot.columnIndexMapper.registerMap(Kt,e.columnWidthsMap),e.addHook("beforeColumnResize",function(i,u,f){return e.onBeforeColumnResize(i,u,f)}),e}return Tt(n,[{key:"isEnabled",value:function(){return this.hot.getSettings()[mt]!==!1&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var i=this.hot.getSettings()[mt];i&&i.useHeaders!==null&&i.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",i.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("beforeChangeRender",function(u){return e.onBeforeChange(u)}),this.addHook("afterFormulasValuesUpdate",function(u){return e.onAfterFormulasValuesUpdate(u)}),this.addHook("beforeViewRender",function(u){return e.onBeforeViewRender(u)}),this.addHook("modifyColWidth",function(u,f){return e.getColumnWidth(f,u)}),this.addHook("afterInit",function(){return e.onAfterInit()}),k(q(n.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var e=this.findColumnsWhereHeaderWasChanged();e.length&&(this.clearCache(e),this.calculateVisibleColumnsWidth()),k(q(n.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var e=this;k(q(n.prototype),"disablePlugin",this).call(this),this.addHook("beforeColumnResize",function(i,u,f){return e.onBeforeColumnResize(i,u,f)})}},{key:"calculateVisibleColumnsWidth",value:function(){var e=this.hot.countRows();if(!!e){var i=this.hot.renderCall,u=this.getFirstVisibleColumn(),f=this.getLastVisibleColumn();u===-1||f===-1||this.calculateColumnsWidth({from:u,to:f},void 0,i)}}},{key:"calculateColumnsWidth",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=typeof i=="number"?{from:i,to:i}:i,y=typeof u=="number"?{from:u,to:u}:u;Object(E.c)(_.from,_.to,function(O){var P=e.hot.toPhysicalColumn(O);if(P===null&&(P=O),f||e.columnWidthsMap.getValueAtIndex(P)===null&&!e.hot._getColWidthFromSettings(P)){var K=e.samplesGenerator.generateColumnSamples(O,y);Object(L.a)(K,function(Pt){var Q=ct(Pt,2),wt=Q[0],$t=Q[1];return e.ghostTable.addColumn(wt,$t)})}}),this.ghostTable.columns.length&&(this.hot.batchExecution(function(){e.ghostTable.getWidths(function(O,P){var K=e.hot.toPhysicalColumn(O);e.columnWidthsMap.setValueAtIndex(K,P)})},!0),this.measuredColumns=_.to+1,this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},u=0,f=this.hot.countCols()-1,_=null;this.inProgress=!0;var y=function P(){if(!e.hot){Object(at.a)(_),e.inProgress=!1;return}e.calculateColumnsWidth({from:u,to:Math.min(u+n.CALCULATION_STEP,f)},i),u=u+n.CALCULATION_STEP+1,u<f?_=Object(at.i)(P):(Object(at.a)(_),e.inProgress=!1,e.hot.view.adjustElementsSize())},O=this.getSyncCalculationLimit();this.firstCalculation&&O>=0&&(this.calculateColumnsWidth({from:0,to:O},i),this.firstCalculation=!1,u=O+1),u<f?y():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var e=this.hot.getSettings()[mt],i=e&&Object(v.j)(e,"samplingRatio")?e.samplingRatio:void 0,u=e&&Object(v.j)(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;i&&!isNaN(i)&&this.samplesGenerator.setSampleCount(parseInt(i,10)),u&&this.samplesGenerator.setAllowDuplicates(u)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&this.hot.view._wt.wtTable.isVisible()&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var e=this.hot.getSettings()[mt],i=n.SYNC_CALCULATION_LIMIT,u=this.hot.countCols()-1;return Object(v.l)(e)&&(i=e.syncLimit,Object(vt.a)(i)?i=Object(E.e)(u,i):i>>=0),Math.min(i,u)}},{key:"getColumnWidth",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f=i;return f===void 0&&(f=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),u&&typeof f=="number"&&(f=Math.max(f,Rt.a.DEFAULT_WIDTH))),f}},{key:"getFirstVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var i=e.wtTable.getFirstVisibleColumn();if(i!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(i)}if(e.wtViewport.columnsRenderCalculator){var u=e.wtTable.getFirstRenderedColumn();if(u!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(u)}return-1}},{key:"getLastVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var i=e.wtTable.getLastVisibleColumn();if(i!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(i)}if(e.wtViewport.columnsRenderCalculator){var u=e.wtTable.getLastRenderedColumn();if(u!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(u)}return-1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var e=this.hot.getColHeader(),i=bt.get(this),u=i.cachedColumnHeaders,f=Object(L.d)(e,function(_,y,O){var P=u.length;return(P-1<O||u[O]!==y)&&_.push(O),P-1<O?u.push(y):u[O]=y,_},[]);return f}},{key:"clearCache",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];i.length?this.hot.batchExecution(function(){Object(L.a)(i,function(u){e.columnWidthsMap.setValueAtIndex(u,null)})},!0):this.columnWidthsMap.clear()}},{key:"isNeedRecalculate",value:function(){return!!Object(L.b)(this.columnWidthsMap.getValues().slice(0,this.measuredColumns),function(e){return e===null}).length}},{key:"onBeforeViewRender",value:function(){this.calculateVisibleColumnsWidth(),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()}},{key:"onAfterLoadData",value:function(){var e=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){e.hot&&e.recalculateAllColumnsWidth()},0)}},{key:"onBeforeChange",value:function(e){var i=this,u=Object(L.c)(e,function(f){var _=ct(f,2),y=_[1];return i.hot.toPhysicalColumn(i.hot.propToCol(y))});this.clearCache(Array.from(new Set(u)))}},{key:"onBeforeColumnResize",value:function(e,i,u){var f=e;return u&&(this.calculateColumnsWidth(i,void 0,!0),f=this.getColumnWidth(i,void 0,!1)),f}},{key:"onAfterInit",value:function(){bt.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"onAfterFormulasValuesUpdate",value:function(e){var i=Object(L.b)(e,function(f){var _;return Object(I.b)((_=f.address)===null||_===void 0?void 0:_.col)}),u=Object(L.c)(i,function(f){return f.address.col});this.clearCache(Array.from(new Set(u)))}},{key:"destroy",value:function(){this.ghostTable.clean(),k(q(n.prototype),"destroy",this).call(this)}}],[{key:"PLUGIN_KEY",get:function(){return mt}},{key:"PLUGIN_PRIORITY",get:function(){return Bt}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}]),n}(Z.a)}}]);
