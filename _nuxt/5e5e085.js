(window.webpackJsonp=window.webpackJsonp||[]).push([[42,7,17,23,31],{1097:function(lt,M,t){"use strict";t.r(M);var K=function(){var s=this,d=s._self._c;return d("div",{staticClass:"scroll-container-min",attrs:{id:"parentContainer"}},[d("hot-table",{ref:"details",attrs:{root:s.detailsRoot,settings:s.settings}}),s._v(" "),d("LazyInventoryDialogItem",{ref:"dialogItem",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:s.selectItems}}),s._v(" "),d("AccountingDialogAccount",{ref:"dialogAccount",attrs:{"form-type":s.formTypeData},on:{selectItems:s.selectItems}})],1)},J=[],N=t(24),W=t(17),L=t(74),ut=t(4),nt=t(10),at=t(27),F=t(290),H=t(654),z=t(690),G=t(1164),Y=t(895),R=t(1158),P=t(1161),T=t(711),w=t(671),C=t(778),A=t(896),B=t(913),j=t(1166),Q=t(1162),ot=t(1163),ct=t(898),tt=t(687),rt=t(656);Object(z.c)(G.a),Object(z.c)(Y.a),Object(z.c)(R.a),Object(z.c)(P.a),Object(T.c)(w.a),Object(C.d)(A.a),Object(C.d)(B.a),Object(C.d)(j.a),Object(C.d)(Q.a),Object(C.d)(ot.a),Object(C.d)(ct.a),Object(C.d)(tt.a);var st=function(s,d){d.row===-1&&s.target.nodeName==="TD"&&(s.stopImmediatePropagation(),s.stopPropagation(),this.deselectCell())},V={name:"TableDetail",components:{HotTable:H.a},props:{formType:{type:String,default:""}},data:function(){return{formTypeData:null,settings:{licenseKey:"non-commercial-and-evaluation",currentRowClassName:"currentRow",currentColClassName:"currentCol",startRows:1,rowHeaders:!0,manualColumnResize:!0,rowHeights:28,viewportRowRenderingOffset:1e3,viewportColumnRenderingOffset:100,colWidths:80,persistentState:!0,width:"100%",height:"auto",stretchH:"all",hiddenColumns:{copyPasteEnabled:!1,indicator:!1,columns:[1,2,3]},beforeOnCellMouseDown:st,dataSchema:{id:null,item_id:null,sku:null,name:null,description:null,quantity:0,unit:null,default_currency_symbol:null,vat_inclusive:0,price:0,discount_rate:0,tax_name:"",total:0},colHeaders:["#","Id","Account ID","Base Line","Description","Qty","Currency","Unit Price","Amount","Total",""],columns:[{width:"10px",wordWrap:!1,renderer:function(d,f,c,m,g,D,b){var y=null,I=window.details;if(I.form.status!=="closed"&&I.form.status!=="cancel")return y=document.createElement("button"),y.type="button",y.innerHTML='<span class="mdi mdi-arrow-right-bold"></span>',y.className="btnNPB",y.value="Details",y.addEventListener("mousedown",function(S){S.preventDefault(),I.$refs.dialogAccount.openDialog(c,I.form.transaction_type)}),f.innerText="",f.appendChild(y),f}},{data:"id",wordWrap:!1},{data:"account_id",wordWrap:!1},{data:"base_line_id",width:150,readOnly:!0,wordWrap:!1},{data:"narration",width:250,wordWrap:!1},{data:"quantity",width:80,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0"}},{data:"default_currency_symbol",width:60,readOnly:!0,wordWrap:!1,className:"htCenter"},{data:"amount",width:100,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"sub_total",width:100,wordWrap:!1,type:"numeric",readOnly:!0,numericFormat:{pattern:"0,0.00"}},{width:"10px",wordWrap:!1,renderer:function(d,f,c,m,g,D,b){var y=null,I=window.details;return I.form.status!=="closed"&&I.form.status!=="cancel"&&(y=document.createElement("button"),y.type="button",y.innerHTML='<span class="mdi mdi-delete"></span>',y.className="btnDelete",y.value="Details2",y.addEventListener("mousedown",function(S){S.preventDefault(),I.removeRow(c)}),f.innerText="",f.appendChild(y)),f}}]},detailsRoot:"detailsRoot",colHeaders:[],form:{}}},created:function(){this.setInstance()},methods:{setInstance:function(){window.details=this},removeRow:function(s){this.$refs.details.hotInstance.alter("remove_row",s)},addLine:function(){var s=this;this.$refs.details.hotInstance.batch(function(){var d=s.$refs.details.hotInstance.countRows();s.$refs.details.hotInstance.alter("insert_row",d+1,1)})},updateTableSettings:function(s){this.$refs.details.hotInstance.updateSettings({licenseKey:"non-commercial-and-evaluation",height:"auto",beforeRefreshDimensions:function(){return!1},beforeOnCellMouseDown:st,afterRemoveRow:function(f,c,m,g){var D=window.details;D.calculateTotal()},beforeRemoveRow:function(f,c,m,g){var D=window.details,b=[];m.forEach(function(I,S){var U=D.$refs.details.hotInstance.getDataAtCell(I,0);U&&b.push(U)});var y=D.$refs.details.hotInstance.countRows();return y===1&&D.$emit("calcTotal",{subTotal:0,amount:0,discountAmount:0,taxDetail:[]}),b.length>0&&D.$emit("removeData",{id:b}),!0},afterChange:function(f,c){var m=window.details;if(f){var g=0;f.forEach(function(D){var b=Object(W.a)(D,4),y=b[0],I=b[1],S=b[2],U=b[3];g=I,(g==="quantity"||g==="amount"||g==="discount_rate"||g==="tax_name")&&S!==U&&m.calculateTotal()})}},beforeRender:function(f){var c=window.details;c.$nuxt.$loading.start()},afterRender:function(f){var c=window.details;c.$nuxt.$loading.finish()},afterLoadData:function(f,c,m){}})},selectItems:function(s){var d=s.row,f=s.selected,c=this;this.$refs.details.hotInstance.batch(function(){f.forEach(function(m,g){c.$refs.details.hotInstance.setDataAtRowProp([[d,"base_line_id",0],[d,"narration",m.name],[d,"default_currency_symbol",c.form.default_currency_code],[d,"account_id",m.id],[d,"amount",0],[d,"quantity",1]]),d++})})},setDataToDetails:function(s,d){var f=this,c=this;this.form=d,this.formTypeData=d.transaction_type,this.$refs.details.hotInstance.batch(function(){f.updateTableSettings();var m=d.line_items.length>0?d.line_items:s;c.$refs.details.hotInstance.loadData(m),f.$nuxt.$loading.finish()})},calculateTotal:function(){var s=this,d=this.$refs.details.hotInstance.countRows(),f=0,c=0,m=[],g=0,D=0;if(d>0)for(var b=function(S){s.$refs.details.hotInstance.batch(function(){var U=s.$refs.details.hotInstance.getDataAtRowProp(S,"quantity"),it=s.$refs.details.hotInstance.getDataAtRowProp(S,"amount"),gt=s.$refs.details.hotInstance.getDataAtRowProp(S,"discount_rate"),q=s.$refs.details.hotInstance.getDataAtRowProp(S,"tax_name"),pt=U*it;f=f+U*it;var ht=parseFloat(gt/100*pt).toFixed(2);if(c=parseFloat(c)+parseFloat(ht),D=pt-ht,q){var Ct=0;s.$auth.$storage.getState("tax_row").forEach(function(mt,Ot){mt.name===q&&(Ct=parseFloat(mt.rate))});var Et=parseFloat(Ct)/100*D;m.push({name:q,amount:Et})}g=g+(pt-ht),s.$refs.details.hotInstance.setDataAtRowProp(S,"sub_total",D)})},y=0;y<d;y++)b(y);this.$emit("calcTotal",{subTotal:f,amount:g,discountAmount:c,taxDetail:m})},getTaxRate:function(s){var d=this;return Object(N.a)(regeneratorRuntime.mark(function f(){var c;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,d.$axios.get("/api/financial/taxes/0",{params:{name:s}});case 2:return c=g.sent,g.abrupt("return",c.data.data.rows);case 4:case"end":return g.stop()}},f)}))()},getDataAtRowPro:function(s,d){return this.$refs.details.hotInstance.getDataAtRowProp(s,d)},countRows:function(){return this.$refs.details.hotInstance.countRows()},checkIfEmptyRow:function(s){return this.$refs.details.hotInstance.isEmptyRow(s)},getAddData:function(s){if(s==="0")for(var d=this.$refs.details.hotInstance.countRows(),f=0;f<d;f++)this.$refs.details.hotInstance.setDataAtRowProp(f,"id",null);return this.$refs.details.hotInstance.getSourceData()}}},Z=V,k=t(50),dt=Object(k.a)(Z,K,J,!1,null,null,null),E=M.default=dt.exports;installComponents(dt,{AccountingDialogAccount:t(667).default})},599:function(lt,M,t){"use strict";var K=t(7),J=t.n(K),N=t(9),W=t.n(N),L=t(12),ut=t.n(L),nt=t(13),at=t.n(nt),F=t(2),H=t(4),z=t.n(H),G=t(33),Y=t.n(G),R=t(52),P=t.n(R),T=t(28),w=t.n(T),C=t(8),A=t.n(C),B=t(21),j=t.n(B),Q=t(65),ot=t.n(Q),ct=t(269),tt=t.n(ct),rt=t(32),st=t.n(rt),V=t(270),Z=t.n(V),k=t(271),dt=t.n(k),E=t(272),o=t.n(E),s=t(273),d=t.n(s),f=t(274),c=t.n(f),m=t(275),g=t.n(m),D=t(276),b=t.n(D),y=t(277),I=t.n(y),S=t(278),U=t.n(S),it=t(279),gt=t.n(it),q=t(280),pt=t.n(q),ht=t(281),Ct=t.n(ht),Et=t(282),mt=t.n(Et),Ot=t(34),Kt=t.n(Ot),St=t(10),Mt=t.n(St),wt=t(283),Ht=t.n(wt),xt=t(3),Tt=t(78),Lt=t(1);function et(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);n&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),a.push.apply(a,e)}return a}function Dt(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?et(Object(a),!0).forEach(function(e){Object(F.a)(r,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):et(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}var Wt=["sm","md","lg","xl"],vt=["start","end","center"];function jt(r,n){return Wt.reduce(function(a,e){return a[r+Object(Lt.I)(e)]=n(),a},{})}var Rt=function(n){return[].concat(vt,["baseline","stretch"]).includes(n)},bt=jt("align",function(){return{type:String,default:null,validator:Rt}}),At=function(n){return[].concat(vt,["space-between","space-around"]).includes(n)},X=jt("justify",function(){return{type:String,default:null,validator:At}}),ft=function(n){return[].concat(vt,["space-between","space-around","stretch"]).includes(n)},It=jt("alignContent",function(){return{type:String,default:null,validator:ft}}),_t={align:Object.keys(bt),justify:Object.keys(X),alignContent:Object.keys(It)},Bt={align:"align",justify:"justify",alignContent:"align-content"};function Vt(r,n,a){var e=Bt[r];if(a!=null){if(n){var l=n.replace(r,"");e+="-".concat(l)}return e+="-".concat(a),e.toLowerCase()}}var i=new Map;M.a=xt.default.extend({name:"v-row",functional:!0,props:Dt(Dt(Dt({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:Rt}},bt),{},{justify:{type:String,default:null,validator:At}},X),{},{alignContent:{type:String,default:null,validator:ft}},It),render:function(n,a){var e=a.props,l=a.data,u=a.children,h="";for(var v in e)h+=String(e[v]);var p=i.get(h);return p||function(){var _;p=[];var O;for(O in _t)_t[O].forEach(function(x){var yt=e[x],$=Vt(O,x,yt);$&&p.push($)});p.push((_={"no-gutters":e.noGutters,"row--dense":e.dense},Object(F.a)(_,"align-".concat(e.align),e.align),Object(F.a)(_,"justify-".concat(e.justify),e.justify),Object(F.a)(_,"align-content-".concat(e.alignContent),e.alignContent),_)),i.set(h,p)}(),n(e.tag,Object(Tt.a)(l,{staticClass:"row",class:p}),u)}})},600:function(lt,M,t){var K=t(375),J=t(47);lt.exports=function(N,W,L){return L.get&&K(L.get,W,{getter:!0}),L.set&&K(L.set,W,{setter:!0}),J.f(N,W,L)}},601:function(lt,M,t){"use strict";t.r(M);var K=function(){var C=this,A=C._self._c;return A("v-dialog",{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:C.original,"max-width":C.maxWidth,transition:"dialog-top-transition"},model:{value:C.dialog,callback:function(j){C.dialog=j},expression:"dialog"}},[A("v-card",[A("v-card-title",[A("span",{staticClass:"subtitle-2"},[C._v(C._s(C.dialogTitle))]),C._v(" "),A("v-spacer"),C._v(" "),A("v-btn",{attrs:{icon:"",color:"red",dark:""},on:{click:function(j){return C.closeDialog()}}},[A("v-icon",[C._v("mdi-close-circle")])],1)],1),C._v(" "),A("v-divider"),C._v(" "),A("v-card-text",{staticClass:"pr-0 pl-0"},[C._t("content")],2),C._v(" "),A("v-divider"),C._v(" "),A("v-card-actions",[C._t("addLine"),C._v(" "),A("v-spacer"),C._v(" "),C._t("saveData")],2)],1)],1)},J=[],N={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},W=N,L=t(50),ut=t(51),nt=t.n(ut),at=t(164),F=t(248),H=t(88),z=t(595),G=t(576),Y=t(247),R=t(593),P=Object(L.a)(W,K,J,!1,null,null,null),T=M.default=P.exports;nt()(P,{VBtn:at.a,VCard:F.a,VCardActions:H.a,VCardText:H.b,VCardTitle:H.c,VDialog:z.a,VDivider:G.a,VIcon:Y.a,VSpacer:R.a})},645:function(lt,M,t){"use strict";t.r(M);var K=t(21),J=t(268),N=function(){var o=this,s=o._self._c;return s("v-row",[s("v-col",{staticClass:"mt-0",attrs:{cols:"12"}},[s("v-data-table",{class:o.viewData?"elevation-0":"elevation-1",attrs:{"mobile-breakpoint":0,headers:o.headers,items:o.allData,loading:o.loading,"single-select":o.viewData,"show-select":"","fixed-header":"",search:o.search,height:o.viewData?"60vh":"70vh",dense:"","footer-props":{"items-per-page-options":[250,500,-1]}},scopedSlots:o._u([{key:"top",fn:function(){return[o.viewData?o._e():s("div",{staticClass:"pl-4 pt-2"},[s("span",{staticClass:"font-weight-medium text-h6"},[o._v(o._s(o.$t("Chart Of Accounts"))+`
            `)])]),o._v(" "),s("LazyMainToolbar",{attrs:{"document-status":o.documentStatus,"search-status":o.searchStatus,"item-search":o.itemSearch,"search-item":o.searchItem,search:o.search,"show-zero-qty":!0,title:"Chart of Accounts","show-batch-action":"","show-new-data":"","show-filter":"","show-search-filter":!1,"new-data-text":"New Account"},on:{emitData:o.emitData,newData:o.newData,getDataFromApi:o.getDataFromApi},scopedSlots:o._u([{key:"search",fn:function(){return[s("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:o.search,callback:function(m){o.search=m},expression:"search"}})]},proxy:!0}])})]},proxy:!0},{key:"item.balance",fn:function(f){var c=f.item;return[o._v(`
          `+o._s(c.currency.currency_code+" "+o.$formatter.formatPrice(c.balance))+`
        `)]}},{key:"item.code",fn:function(f){var c=f.item;return[s("a",{on:{click:function(g){return o.viewItem(c)}}},[s("strong",{domProps:{textContent:o._s(c.code)}})])]}},{key:"item.id",fn:function(f){var c=f.item;return[s("v-btn",{staticClass:"font-weight-bold text-right",attrs:{color:"secondary",text:"",small:""},on:{click:function(g){return o.actions(o.itemAction,c)}}},[o._v(`
            `+o._s(o.itemText)+`
          `)]),o._v(" "),s("v-menu",{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:o._u([{key:"activator",fn:function(g){var D=g.on,b=g.attrs;return[s("v-btn",o._g(o._b({attrs:{color:"black",dark:"",icon:""}},"v-btn",b,!1),D),[s("v-icon",[o._v("mdi-menu-down")])],1)]}}],null,!0)},[o._v(" "),s("v-list",o._l(o.items,function(m,g){return s("v-list-item",{key:g,on:{click:function(b){return o.actions(m.action,c)}}},[s("v-list-item-content",[s("v-list-item-title",[o._v(o._s(m.text))])],1)],1)}),1)],1)]}}],null,!0),model:{value:o.selected,callback:function(f){o.selected=f},expression:"selected"}}),o._v(" "),s("LazyAccountingFormAccount",{ref:"forms",attrs:{"form-data":o.form,"form-title":o.formTitle,"button-title":o.buttonTitle,url:o.url},on:{getDataFromApi:o.getDataFromApi}})],1)],1)},W=[],L=t(8),ut=t(7),nt=t(12),at=t(10),F=t(13),H=t(2),z=t(9),G=t(4);function Y(E,o){var s=Object.keys(E);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(E);o&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(E,f).enumerable})),s.push.apply(s,d)}return s}function R(E){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?arguments[o]:{};o%2?Y(Object(s),!0).forEach(function(d){Object(H.a)(E,d,s[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(s)):Y(Object(s)).forEach(function(d){Object.defineProperty(E,d,Object.getOwnPropertyDescriptor(s,d))})}return E}var P={name:"ChartOfAccount",props:{viewData:{type:Boolean,default:!1},formType:{type:String,default:""}},data:function(){return{selected:[],totalData:0,editedIndex:-1,loading:!0,allData:[],documentStatus:[],itemSearch:[],searchStatus:"",searchItem:"",search:"",show_zero_balance:null,form:{},defaultItem:{},options:{},items:[{text:"Edit",action:"edit"},{text:"Delete",action:"delete"}],itemText:"Edit",itemAction:"edit",url:"/api/financial/accounts",headers:[],title:"Chart Of Accounts",formTypeData:null}},head:function(){return{title:this.title}},computed:{formTitle:function(){return this.editedIndex===-1?"New Account":"Edit Account"},buttonTitle:function(){return this.editedIndex===-1?"Save":"Update"}},activated:function(){this.getDataFromApi()},mounted:function(){this.mappingHeader()},methods:{returnSelected:function(){return this.selected},viewItem:function(o){this.$router.push({path:"/app/accounting/detail",query:{id:o.id}})},setEmptyToSelected:function(o){this.selected=[],this.formTypeData=this.$auth.$storage.getState("formType"),this.getDataFromApi()},newData:function(){this.editedIndex=-1,this.$refs.forms.newData(this.form)},actions:function(o,s){o==="edit"?this.editItem(s):this.deleteItem(s)},editItem:function(o){this.editedIndex=this.allData.indexOf(o),this.$refs.forms.editItem(o,this.form)},deleteItem:function(o){var s=this,d=this;this.$swal({title:"Are you sure?",text:"The data will be permanently deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(f){f.value&&s.$axios.delete(d.url+"/"+o.id).then(function(c){s.$swal({type:"success",title:"Success...",text:"Row Deleted!"}),s.getDataFromApi()}).catch(function(c){s.$swal({type:"error",title:"Oops...",text:c.response.data.message})})})},emitData:function(o){this.documentStatus=o.documentStatus,this.itemSearch=o.itemSearch,this.searchStatus=o.searchStatus,this.searchItem=o.searchItem,this.search=o.search,this.filters=o.filters,this.show_zero_balance=o.show_zero_balance,this.getDataFromApi()},mappingHeader:function(){this.viewData?this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name",cellClass:"disable-wrap"},{text:"Account Type",value:"account_type",cellClass:"disable-wrap"},{text:"Category",value:"category.name"}]:this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name"},{text:"Account Type",value:"account_type"},{text:"Category",value:"category.name"},{text:"Balance",value:"balance",cellClass:"disable-wrap",sortable:!1,filterable:!1},{text:"Actions",value:"id",align:"right",cellClass:"disable-wrap",sortable:!1,filterable:!1}]},searchData:function(o){this.search=o.search},getDataFromApi:function(){var o=this;this.loading=!0;var s=this,d="";this.formTypeData==="CS"?d="OPERATING_REVENUE":this.formTypeData==="CP"&&(d="OPERATING_EXPENSE, DIRECT_EXPENSE, OVERHEAD_EXPENSE, OTHER_EXPENSE, NON_CURRENT_ASSET, CURRENT_ASSET, INVENTORY");var f={searchItem:s.searchItem,documentStatus:s.documentStatus,searchStatus:s.searchStatus,search:s.search,show_zero_balance:s.show_zero_balance,type:d};this.$axios.get(this.url,{params:R(R({},s.options),f)}).then(function(c){o.loading=!1;var m=c.data;o.allData=m.data,o.totalData=m.total,o.itemSearch=m.filter,o.form=Object.assign({},m.form),o.defaultItem=Object.assign({},m.form)}).catch(function(c){o.loading=!1,o.$swal({type:"error",title:"Error",text:c.response.data.message})})}}},T=P,w=t(50),C=t(51),A=t.n(C),B=t(164),j=t(585),Q=t(909),ot=t(247),ct=t(249),tt=t(165),rt=t(35),st=t(577),V=t(599),Z=t(574),k=Object(w.a)(T,N,W,!1,null,null,null),dt=M.default=k.exports;A()(k,{VBtn:B.a,VCol:j.a,VDataTable:Q.a,VIcon:ot.a,VList:ct.a,VListItem:tt.a,VListItemContent:rt.a,VListItemTitle:rt.c,VMenu:st.a,VRow:V.a,VTextField:Z.a})},667:function(lt,M,t){"use strict";t.r(M);var K=function(){var P=this,T=P._self._c;return T("div",[T("DialogForm",{ref:"dialogForm",attrs:{"max-width":"1000px","dialog-title":P.$t("Chart Of Accounts"),"button-title":"Save",original:"top"},scopedSlots:P._u([{key:"content",fn:function(){return[T("v-container",[T("AccountingTableAccount",{ref:"tableItem",attrs:{"view-data":P.viewData,"form-type":P.formType,"show-add-btn":P.showAddBtn}})],1)]},proxy:!0},{key:"saveData",fn:function(){return[T("v-btn",{attrs:{color:"green darken-1",dark:"",small:""},on:{click:P.selectData}},[P._v(`
          Select Item
          `),T("v-icon",[P._v("mdi-arrow-down-right")])],1)]},proxy:!0}])})],1)},J=[],N=t(59),W={name:"DialogItem",props:{viewData:{type:Boolean,default:!0},showAddBtn:{type:Boolean,default:!0},formType:{type:String,default:""}},data:function(){return{row:null}},methods:{openDialog:function(P,T){var w=this;this.$refs.dialogForm.openDialog(),setTimeout(function(){w.$refs.tableItem.setEmptyToSelected(T)},150),this.row=P},selectData:function(){this.$emit("selectItems",{row:this.row,selected:this.$refs.tableItem.returnSelected()}),this.$refs.dialogForm.closeDialog()}}},L=W,ut=t(50),nt=t(51),at=t.n(nt),F=t(164),H=t(586),z=t(247),G=Object(ut.a)(L,K,J,!1,null,null,null),Y=M.default=G.exports;at()(G,{AccountingTableAccount:t(645).default,DialogForm:t(601).default}),at()(G,{VBtn:F.a,VContainer:H.a,VIcon:z.a})},671:function(lt,M,t){"use strict";t.d(M,"a",function(){return E});var K=t(607),J=t(605),N=t(4),W=t(110),L=t(626),ut=t(12),nt=t(7),at=t(46),F=t(53),H=t(212),z=t(32),G=t(34),Y=t(872),R=t(606),P=t(602);function T(o){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},T(o)}function w(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function C(o,s){for(var d=0;d<s.length;d++){var f=s[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(o,f.key,f)}}function A(o,s,d){return s&&C(o.prototype,s),d&&C(o,d),Object.defineProperty(o,"prototype",{writable:!1}),o}function B(){return typeof Reflect!="undefined"&&Reflect.get?B=Reflect.get.bind():B=function(s,d,f){var c=j(s,d);if(!!c){var m=Object.getOwnPropertyDescriptor(c,d);return m.get?m.get.call(arguments.length<3?s:f):m.value}},B.apply(this,arguments)}function j(o,s){for(;!Object.prototype.hasOwnProperty.call(o,s)&&(o=V(o),o!==null););return o}function Q(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),s&&ot(o,s)}function ot(o,s){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,c){return f.__proto__=c,f},ot(o,s)}function ct(o){var s=st();return function(){var f=V(o),c;if(s){var m=V(this).constructor;c=Reflect.construct(f,arguments,m)}else c=f.apply(this,arguments);return tt(this,c)}}function tt(o,s){if(s&&(T(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rt(o)}function rt(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function st(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}function V(o){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},V(o)}var Z="ht_editor_visible",k="selectEditor",dt="select",E=function(o){Q(d,o);var s=ct(d);function d(){return w(this,d),s.apply(this,arguments)}return A(d,[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),Object(R.a)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(c){this.select.value=c}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="";var c=this.hot.getShortcutManager();c.setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",Object(R.v)(this.select,Z)&&Object(R.K)(this.select,Z),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var c=this;this.addHook("afterScrollHorizontally",function(){return c.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return c.refreshDimensions()}),this.addHook("afterColumnResize",function(){return c.refreshDimensions()}),this.addHook("afterRowResize",function(){return c.refreshDimensions()})}},{key:"prepare",value:function(c,m,g,D,b,y){var I=this;B(V(d.prototype),"prepare",this).call(this,c,m,g,D,b,y);var S=this.cellProperties.selectOptions,U;typeof S=="function"?U=this.prepareOptions(S(this.row,this.col,this.prop)):U=this.prepareOptions(S),Object(R.e)(this.select),Object(P.o)(U,function(it,gt){var q=I.hot.rootDocument.createElement("OPTION");q.value=gt,Object(R.f)(q,it),I.select.appendChild(q)})}},{key:"prepareOptions",value:function(c){var m={};if(Array.isArray(c))for(var g=0,D=c.length;g<D;g++)m[c[g]]=c[g];else T(c)==="object"&&(m=c);return m}},{key:"refreshValue",value:function(){var c=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=c,this.setValue(c),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===Y.b.EDITING){if(this.TD=this.getEditedCell(),!this.TD){this.close();return}var c=this.getEditedCellRect(),m=c.top,g=c.start,D=c.width,b=c.height,y=this.select.style;y.height="".concat(b,"px"),y.width="".concat(D,"px"),y.top="".concat(m,"px"),y[this.hot.isRtl()?"right":"left"]="".concat(g,"px"),y.margin="0px",Object(R.a)(this.select,Z)}}},{key:"registerShortcuts",value:function(){var c=this,m=this.hot.getShortcutManager(),g=m.getContext("editor"),D={group:k};this.isInFullEditMode()!==!1&&g.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var y=c.select.selectedIndex-1;y>=0&&(c.select[y].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var y=c.select.selectedIndex+1;y<=c.select.length-1&&(c.select[y].selected=!0)}}],D)}},{key:"unregisterShortcuts",value:function(){var c=this.hot.getShortcutManager(),m=c.getContext("editor");m.removeShortcutsByGroup(k)}}],[{key:"EDITOR_TYPE",get:function(){return dt}}]),d}(Y.a)},687:function(lt,M,t){"use strict";t.d(M,"a",function(){return Vt});var K=t(212),J=t(4),N=t(32),W=t(629),L=t(34),ut=t(36),nt=t(59),at=t(42),F=t(637),H=t(607),z=t(605),G=t(110),Y=t(626),R=t(12),P=t(7),T=t(46),w=t(53),C=t(27),A=t(21),B=t(897),j=t(608),Q=t(664),ot=t(10),ct=t(80),tt=t(606);function rt(i,r){return dt(i)||k(i,r)||V(i,r)||st()}function st(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V(i,r){if(!!i){if(typeof i=="string")return Z(i,r);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(i,r)}}function Z(i,r){(r==null||r>i.length)&&(r=i.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=i[n];return a}function k(i,r){var n=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var a=[],e=!0,l=!1,u,h;try{for(n=n.call(i);!(e=(u=n.next()).done)&&(a.push(u.value),!(r&&a.length===r));e=!0);}catch(v){l=!0,h=v}finally{try{!e&&n.return!=null&&n.return()}finally{if(l)throw h}}return a}}function dt(i){if(Array.isArray(i))return i}function E(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}function o(i,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}function s(i,r,n){return r&&o(i.prototype,r),n&&o(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}var d=function(){function i(r){E(this,i),this.hot=r,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}return s(i,[{key:"addRow",value:function(n,a){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={row:n};this.rows.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"addColumnHeadersRow",value:function(n){var a=this.hot.getColHeader(0);if(a!=null){var e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=n,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}},{key:"addColumn",value:function(n,a){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={col:n};this.columns.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(n)!==null&&this.hot.view.appendColHeader(n,this.table.th),this.table.tBody.appendChild(this.createCol(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"getHeights",value:function(n){this.injected||this.injectTable(),Object(j.a)(this.rows,function(a){n(a.row,Object(tt.H)(a.table)-1)})}},{key:"getWidths",value:function(n){this.injected||this.injectTable(),Object(j.a)(this.columns,function(a){var e=a.table.getBoundingClientRect(),l=e.width;n(a.col,Math.ceil(l))})}},{key:"setSettings",value:function(n){this.settings=n}},{key:"setSetting",value:function(n,a){this.settings||(this.settings={}),this.settings[n]=a}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(n){return this.settings?this.settings[n]:null}},{key:"createColGroupsCol",value:function(){var n=this,a=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&a.appendChild(this.createColElement(-1)),this.samples.forEach(function(e){Object(j.a)(e.strings,function(l){a.appendChild(n.createColElement(l.col))})}),a}},{key:"createRow",value:function(n){var a=this,e=this.hot.rootDocument,l=e.createDocumentFragment(),u=e.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(n,u),l.appendChild(u)),this.samples.forEach(function(h){Object(j.a)(h.strings,function(v){var p=v.col,_=a.hot.getCellMeta(n,p);_.col=p,_.row=n;var O=a.hot.getCellRenderer(_),x=e.createElement("td");x.setAttribute("ghost-table",1),O(a.hot,x,n,p,a.hot.colToProp(p),v.value,_),l.appendChild(x)})}),l}},{key:"appendColumnHeadersRow",value:function(){var n=this,a=this.hot.rootDocument,e=a.createDocumentFragment(),l=[];if(this.hot.hasRowHeaders()){var u=a.createElement("th");l.push([-1,u]),e.appendChild(u)}this.samples.forEach(function(h){Object(j.a)(h.strings,function(v){var p=v.col,_=a.createElement("th");l.push([p,_]),e.appendChild(_)})}),this.table.tHead.appendChild(e),Object(j.a)(l,function(h){var v=rt(h,2),p=v[0],_=v[1];n.hot.view.appendColHeader(p,_)})}},{key:"createCol",value:function(n){var a=this,e=this.hot.rootDocument,l=e.createDocumentFragment();return this.samples.forEach(function(u){Object(j.a)(u.strings,function(h){var v=h.row,p=a.hot.getCellMeta(v,n);p.col=n,p.row=v;var _=a.hot.getCellRenderer(p),O=e.createElement("td"),x=e.createElement("tr");O.setAttribute("ghost-table",1),_(a.hot,O,v,n,a.hot.colToProp(n),h.value,p),x.appendChild(O),l.appendChild(x)})}),l}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((n||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(n){var a=this.hot.rootDocument.createElement("col");return a.style.width="".concat(this.hot.view._wt.wtTable.getStretchedColumnWidth(n),"px"),a}},{key:"createTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),l=a.createElement("table"),u=a.createElement("thead"),h=a.createElement("tbody"),v=a.createElement("colgroup"),p=a.createElement("tr"),_=a.createElement("th");return this.isVertical()&&l.appendChild(v),this.isHorizontal()&&(p.appendChild(_),u.appendChild(p),l.style.tableLayout="auto",l.style.width="auto"),l.appendChild(u),this.isVertical()&&h.appendChild(p),l.appendChild(h),Object(tt.a)(l,n),e.appendChild(l),{fragment:e,table:l,tHead:u,tBody:h,colGroup:v,tr:p,th:_}}},{key:"createContainer",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),l=a.createElement("div"),u="htGhostTable htAutoSize ".concat(n.trim());return Object(tt.a)(l,u),e.appendChild(l),{fragment:e,container:l}}},{key:"isVertical",value:function(){return!!(this.rows.length&&!this.columns.length)}},{key:"isHorizontal",value:function(){return!!(this.columns.length&&!this.rows.length)}}]),i}(),f=d,c=t(640),m=t(602),g=t(633),D=t(269),b=t(8),y=t(624),I=t(618);function S(i,r,n){return r in i?Object.defineProperty(i,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[r]=n,i}function U(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}function it(i,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}function gt(i,r,n){return r&&it(i.prototype,r),n&&it(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}var q=function(){function i(r){U(this,i),this.samples=null,this.dataFactory=r,this.customSampleCount=null,this.allowDuplicates=!1}return gt(i,[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:i.SAMPLE_COUNT}},{key:"setSampleCount",value:function(n){this.customSampleCount=n}},{key:"setAllowDuplicates",value:function(n){this.allowDuplicates=n}},{key:"generateRowSamples",value:function(n,a){return this.generateSamples("row",a,n)}},{key:"generateColumnSamples",value:function(n,a){return this.generateSamples("col",a,n)}},{key:"generateSamples",value:function(n,a,e){var l=this,u=new Map,h=typeof e=="number"?{from:e,to:e}:e,v=h.from,p=h.to;return Object(g.c)(v,p,function(_){var O=l.generateSample(n,a,_);u.set(_,O)}),u}},{key:"generateSample",value:function(n,a,e){var l=this;if(n!=="row"&&n!=="col")throw new Error("Unsupported sample type");var u=new Map,h=n==="row"?"col":"row",v=[];return Object(g.c)(a.from,a.to,function(p){var _=n==="row"?l.dataFactory(e,p):l.dataFactory(p,e),O=_.value,x=_.bundleSeed,yt=typeof x=="string"&&x.length>0,$;yt?$=x:Object(m.l)(O)?$="".concat(Object.keys(O).length):Array.isArray(O)?$="".concat(O.length):$="".concat(Object(I.f)(O).length),u.has($)||u.set($,{needed:l.getSampleCount(),strings:[]});var Pt=u.get($);if(Pt.needed){var Ut=v.indexOf(O)>-1;(!Ut||l.allowDuplicates||yt)&&(Pt.strings.push(S({value:O},h,p)),v.push(O),Pt.needed-=1)}}),u}}],[{key:"SAMPLE_COUNT",get:function(){return 3}}]),i}(),pt=q,ht=t(643),Ct=t(890),Et=t(694);function mt(i){return mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},mt(i)}function Ot(i,r){return Ht(i)||wt(i,r)||St(i,r)||Kt()}function Kt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function St(i,r){if(!!i){if(typeof i=="string")return Mt(i,r);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(i,r)}}function Mt(i,r){(r==null||r>i.length)&&(r=i.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=i[n];return a}function wt(i,r){var n=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var a=[],e=!0,l=!1,u,h;try{for(n=n.call(i);!(e=(u=n.next()).done)&&(a.push(u.value),!(r&&a.length===r));e=!0);}catch(v){l=!0,h=v}finally{try{!e&&n.return!=null&&n.return()}finally{if(l)throw h}}return a}}function Ht(i){if(Array.isArray(i))return i}function xt(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}function Tt(i,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}function Lt(i,r,n){return r&&Tt(i.prototype,r),n&&Tt(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}function et(){return typeof Reflect!="undefined"&&Reflect.get?et=Reflect.get.bind():et=function(r,n,a){var e=Dt(r,n);if(!!e){var l=Object.getOwnPropertyDescriptor(e,n);return l.get?l.get.call(arguments.length<3?r:a):l.value}},et.apply(this,arguments)}function Dt(i,r){for(;!Object.prototype.hasOwnProperty.call(i,r)&&(i=X(i),i!==null););return i}function Wt(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),r&&vt(i,r)}function vt(i,r){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},vt(i,r)}function jt(i){var r=At();return function(){var a=X(i),e;if(r){var l=X(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return Rt(this,e)}}function Rt(i,r){if(r&&(mt(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bt(i)}function bt(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function At(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function X(i){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},X(i)}c.a.getSingleton().register("modifyAutoColumnSizeSeed");var ft="autoColumnSize",It=10,_t=new WeakMap,Bt="autoColumnSize",Vt=function(i){Wt(n,i);var r=jt(n);function n(a){var e;return xt(this,n),e=r.call(this,a),_t.set(bt(e),{cachedColumnHeaders:[]}),e.ghostTable=new f(e.hot),e.samplesGenerator=new pt(function(l,u){var h=e.hot.getCellMeta(l,u),v="";h.spanned||(v=e.hot.getDataAtCell(l,u));var p="";return e.hot.hasHook("modifyAutoColumnSizeSeed")&&(p=e.hot.runHooks("modifyAutoColumnSizeSeed",p,h,v)),{value:v,bundleSeed:p}}),e.firstCalculation=!0,e.inProgress=!1,e.measuredColumns=0,e.columnWidthsMap=new Et.a,e.hot.columnIndexMapper.registerMap(Bt,e.columnWidthsMap),e.addHook("beforeColumnResize",function(l,u,h){return e.onBeforeColumnResize(l,u,h)}),e}return Lt(n,[{key:"isEnabled",value:function(){return this.hot.getSettings()[ft]!==!1&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var l=this.hot.getSettings()[ft];l&&l.useHeaders!==null&&l.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",l.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("beforeChangeRender",function(u){return e.onBeforeChange(u)}),this.addHook("afterFormulasValuesUpdate",function(u){return e.onAfterFormulasValuesUpdate(u)}),this.addHook("beforeViewRender",function(u){return e.onBeforeViewRender(u)}),this.addHook("modifyColWidth",function(u,h){return e.getColumnWidth(h,u)}),this.addHook("afterInit",function(){return e.onAfterInit()}),et(X(n.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var e=this.findColumnsWhereHeaderWasChanged();e.length&&(this.clearCache(e),this.calculateVisibleColumnsWidth()),et(X(n.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var e=this;et(X(n.prototype),"disablePlugin",this).call(this),this.addHook("beforeColumnResize",function(l,u,h){return e.onBeforeColumnResize(l,u,h)})}},{key:"calculateVisibleColumnsWidth",value:function(){var e=this.hot.countRows();if(!!e){var l=this.hot.renderCall,u=this.getFirstVisibleColumn(),h=this.getLastVisibleColumn();u===-1||h===-1||this.calculateColumnsWidth({from:u,to:h},void 0,l)}}},{key:"calculateColumnsWidth",value:function(){var e=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,v=typeof l=="number"?{from:l,to:l}:l,p=typeof u=="number"?{from:u,to:u}:u;Object(g.c)(v.from,v.to,function(_){var O=e.hot.toPhysicalColumn(_);if(O===null&&(O=_),h||e.columnWidthsMap.getValueAtIndex(O)===null&&!e.hot._getColWidthFromSettings(O)){var x=e.samplesGenerator.generateColumnSamples(_,p);Object(j.a)(x,function(yt){var $=Ot(yt,2),Pt=$[0],Ut=$[1];return e.ghostTable.addColumn(Pt,Ut)})}}),this.ghostTable.columns.length&&(this.hot.batchExecution(function(){e.ghostTable.getWidths(function(_,O){var x=e.hot.toPhysicalColumn(_);e.columnWidthsMap.setValueAtIndex(x,O)})},!0),this.measuredColumns=v.to+1,this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var e=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},u=0,h=this.hot.countCols()-1,v=null;this.inProgress=!0;var p=function O(){if(!e.hot){Object(Q.a)(v),e.inProgress=!1;return}e.calculateColumnsWidth({from:u,to:Math.min(u+n.CALCULATION_STEP,h)},l),u=u+n.CALCULATION_STEP+1,u<h?v=Object(Q.i)(O):(Object(Q.a)(v),e.inProgress=!1,e.hot.view.adjustElementsSize())},_=this.getSyncCalculationLimit();this.firstCalculation&&_>=0&&(this.calculateColumnsWidth({from:0,to:_},l),this.firstCalculation=!1,u=_+1),u<h?p():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var e=this.hot.getSettings()[ft],l=e&&Object(m.j)(e,"samplingRatio")?e.samplingRatio:void 0,u=e&&Object(m.j)(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;l&&!isNaN(l)&&this.samplesGenerator.setSampleCount(parseInt(l,10)),u&&this.samplesGenerator.setAllowDuplicates(u)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&this.hot.view._wt.wtTable.isVisible()&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var e=this.hot.getSettings()[ft],l=n.SYNC_CALCULATION_LIMIT,u=this.hot.countCols()-1;return Object(m.l)(e)&&(l=e.syncLimit,Object(ht.a)(l)?l=Object(g.e)(u,l):l>>=0),Math.min(l,u)}},{key:"getColumnWidth",value:function(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=l;return h===void 0&&(h=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),u&&typeof h=="number"&&(h=Math.max(h,Ct.a.DEFAULT_WIDTH))),h}},{key:"getFirstVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var l=e.wtTable.getFirstVisibleColumn();if(l!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(l)}if(e.wtViewport.columnsRenderCalculator){var u=e.wtTable.getFirstRenderedColumn();if(u!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(u)}return-1}},{key:"getLastVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var l=e.wtTable.getLastVisibleColumn();if(l!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(l)}if(e.wtViewport.columnsRenderCalculator){var u=e.wtTable.getLastRenderedColumn();if(u!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(u)}return-1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var e=this.hot.getColHeader(),l=_t.get(this),u=l.cachedColumnHeaders,h=Object(j.d)(e,function(v,p,_){var O=u.length;return(O-1<_||u[_]!==p)&&v.push(_),O-1<_?u.push(p):u[_]=p,v},[]);return h}},{key:"clearCache",value:function(){var e=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];l.length?this.hot.batchExecution(function(){Object(j.a)(l,function(u){e.columnWidthsMap.setValueAtIndex(u,null)})},!0):this.columnWidthsMap.clear()}},{key:"isNeedRecalculate",value:function(){return!!Object(j.b)(this.columnWidthsMap.getValues().slice(0,this.measuredColumns),function(e){return e===null}).length}},{key:"onBeforeViewRender",value:function(){this.calculateVisibleColumnsWidth(),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()}},{key:"onAfterLoadData",value:function(){var e=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){e.hot&&e.recalculateAllColumnsWidth()},0)}},{key:"onBeforeChange",value:function(e){var l=this,u=Object(j.c)(e,function(h){var v=Ot(h,2),p=v[1];return l.hot.toPhysicalColumn(l.hot.propToCol(p))});this.clearCache(Array.from(new Set(u)))}},{key:"onBeforeColumnResize",value:function(e,l,u){var h=e;return u&&(this.calculateColumnsWidth(l,void 0,!0),h=this.getColumnWidth(l,void 0,!1)),h}},{key:"onAfterInit",value:function(){_t.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"onAfterFormulasValuesUpdate",value:function(e){var l=Object(j.b)(e,function(h){var v;return Object(I.b)((v=h.address)===null||v===void 0?void 0:v.col)}),u=Object(j.c)(l,function(h){return h.address.col});this.clearCache(Array.from(new Set(u)))}},{key:"destroy",value:function(){this.ghostTable.clean(),et(X(n.prototype),"destroy",this).call(this)}}],[{key:"PLUGIN_KEY",get:function(){return ft}},{key:"PLUGIN_PRIORITY",get:function(){return It}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}]),n}(B.a)}}]);
