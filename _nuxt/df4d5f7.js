(window.webpackJsonp=window.webpackJsonp||[]).push([[42,7,17,23,31],{1096:function(lt,M,t){"use strict";t.r(M);var B=function(){var s=this,h=s._self._c;return h("div",{staticClass:"scroll-container-min",attrs:{id:"parentContainer"}},[h("hot-table",{ref:"details",attrs:{root:s.detailsRoot,settings:s.settings}}),s._v(" "),h("LazyInventoryDialogItem",{ref:"dialogItem",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:s.selectItems}}),s._v(" "),h("AccountingDialogAccount",{ref:"dialogAccount",attrs:{"form-type":s.formTypeData},on:{selectItems:s.selectItems}})],1)},F=[],U=t(24),V=t(17),w=t(73),ut=t(4),z=t(9),nt=t(27),N=t(290),G=t(653),Y=t(689),X=t(1164),P=t(894),b=t(1158),x=t(1161),O=t(710),S=t(670),W=t(777),at=t(895),Q=t(912),R=t(1166),tt=t(1162),ct=t(1163),ot=t(897),Z=t(686),dt=t(655);Object(Y.c)(X.a),Object(Y.c)(P.a),Object(Y.c)(b.a),Object(Y.c)(x.a),Object(O.c)(S.a),Object(W.d)(at.a),Object(W.d)(Q.a),Object(W.d)(R.a),Object(W.d)(tt.a),Object(W.d)(ct.a),Object(W.d)(ot.a),Object(W.d)(Z.a);var rt=function(s,h){h.row===-1&&s.target.nodeName==="TD"&&(s.stopImmediatePropagation(),s.stopPropagation(),this.deselectCell())},K={name:"TableDetail",components:{HotTable:G.a},props:{formType:{type:String,default:""}},data:function(){return{formTypeData:null,settings:{licenseKey:"non-commercial-and-evaluation",currentRowClassName:"currentRow",currentColClassName:"currentCol",startRows:1,rowHeaders:!0,manualColumnResize:!0,rowHeights:28,viewportRowRenderingOffset:1e3,viewportColumnRenderingOffset:100,colWidths:80,persistentState:!0,width:"100%",height:"auto",stretchH:"all",hiddenColumns:{copyPasteEnabled:!1,indicator:!1,columns:[1,2,3]},beforeOnCellMouseDown:rt,dataSchema:{id:null,item_id:null,sku:null,name:null,description:null,quantity:0,unit:null,default_currency_symbol:null,vat_inclusive:0,price:0,discount_rate:0,tax_name:"",total:0},colHeaders:["#","Id","Account ID","Base Line","Description","Qty","Currency","Unit Price","Amount","Total",""],columns:[{width:"10px",wordWrap:!1,renderer:function(h,f,d,v,y,j,T){var E=null,A=window.details;if(A.form.status!=="closed"&&A.form.status!=="cancel")return E=document.createElement("button"),E.type="button",E.innerHTML='<span class="mdi mdi-arrow-right-bold"></span>',E.className="btnNPB",E.value="Details",E.addEventListener("mousedown",function(I){I.preventDefault(),A.$refs.dialogAccount.openDialog(d,A.form.transaction_type)}),f.innerText="",f.appendChild(E),f}},{data:"id",wordWrap:!1},{data:"account_id",wordWrap:!1},{data:"base_line_id",width:150,readOnly:!0,wordWrap:!1},{data:"narration",width:250,wordWrap:!1},{data:"quantity",width:80,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0"}},{data:"default_currency_symbol",width:60,readOnly:!0,wordWrap:!1,className:"htCenter"},{data:"amount",width:100,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"sub_total",width:100,wordWrap:!1,type:"numeric",readOnly:!0,numericFormat:{pattern:"0,0.00"}},{width:"10px",wordWrap:!1,renderer:function(h,f,d,v,y,j,T){var E=null,A=window.details;return A.form.status!=="closed"&&A.form.status!=="cancel"&&(E=document.createElement("button"),E.type="button",E.innerHTML='<span class="mdi mdi-delete"></span>',E.className="btnDelete",E.value="Details2",E.addEventListener("mousedown",function(I){I.preventDefault(),A.removeRow(d)}),f.innerText="",f.appendChild(E)),f}}]},detailsRoot:"detailsRoot",colHeaders:[],form:{}}},created:function(){this.setInstance()},methods:{setInstance:function(){window.details=this},removeRow:function(s){this.$refs.details.hotInstance.alter("remove_row",s)},addLine:function(){var s=this;this.$refs.details.hotInstance.batch(function(){var h=s.$refs.details.hotInstance.countRows();s.$refs.details.hotInstance.alter("insert_row",h+1,1)})},updateTableSettings:function(s){this.$refs.details.hotInstance.updateSettings({licenseKey:"non-commercial-and-evaluation",height:"auto",beforeRefreshDimensions:function(){return!1},beforeOnCellMouseDown:rt,afterRemoveRow:function(f,d,v,y){var j=window.details;j.calculateTotal()},beforeRemoveRow:function(f,d,v,y){var j=window.details,T=[];v.forEach(function(A,I){var H=j.$refs.details.hotInstance.getDataAtCell(A,0);H&&T.push(H)});var E=j.$refs.details.hotInstance.countRows();return E===1&&j.$emit("calcTotal",{subTotal:0,amount:0,discountAmount:0,taxDetail:[]}),T.length>0&&j.$emit("removeData",{id:T}),!0},afterChange:function(f,d){var v=window.details;if(f){var y=0;f.forEach(function(j){var T=Object(V.a)(j,4),E=T[0],A=T[1],I=T[2],H=T[3];y=A,(y==="quantity"||y==="amount"||y==="discount_rate"||y==="tax_name")&&I!==H&&v.calculateTotal()})}},beforeRender:function(f){var d=window.details;d.$nuxt.$loading.start()},afterRender:function(f){var d=window.details;d.$nuxt.$loading.finish()},afterLoadData:function(f,d,v){}})},selectItems:function(s){var h=s.row,f=s.selected,d=this;this.$refs.details.hotInstance.batch(function(){f.forEach(function(v,y){d.$refs.details.hotInstance.setDataAtRowProp([[h,"base_line_id",0],[h,"narration",v.name],[h,"default_currency_symbol",d.form.default_currency_code],[h,"account_id",v.id],[h,"amount",0],[h,"quantity",1]]),h++})})},setDataToDetails:function(s,h){var f=this,d=this;this.form=h,this.formTypeData=h.transaction_type,this.$refs.details.hotInstance.batch(function(){f.updateTableSettings();var v=h.line_items.length>0?h.line_items:s;d.$refs.details.hotInstance.loadData(v),f.$nuxt.$loading.finish()})},calculateTotal:function(){var s=this,h=this.$refs.details.hotInstance.countRows(),f=0,d=0,v=[],y=0,j=0;if(h>0)for(var T=function(I){s.$refs.details.hotInstance.batch(function(){var H=s.$refs.details.hotInstance.getDataAtRowProp(I,"quantity"),it=s.$refs.details.hotInstance.getDataAtRowProp(I,"amount"),gt=s.$refs.details.hotInstance.getDataAtRowProp(I,"discount_rate"),q=s.$refs.details.hotInstance.getDataAtRowProp(I,"tax_name"),pt=H*it;f=f+H*it;var ht=parseFloat(gt/100*pt).toFixed(2);if(d=parseFloat(d)+parseFloat(ht),j=pt-ht,q){var Et=0;s.$auth.$storage.getState("tax_row").forEach(function(mt,Ot){mt.name===q&&(Et=parseFloat(mt.rate))});var Ct=parseFloat(Et)/100*j;v.push({name:q,amount:Ct})}y=y+(pt-ht),s.$refs.details.hotInstance.setDataAtRowProp(I,"sub_total",j)})},E=0;E<h;E++)T(E);this.$emit("calcTotal",{subTotal:f,amount:y,discountAmount:d,taxDetail:v})},getTaxRate:function(s){var h=this;return Object(U.a)(regeneratorRuntime.mark(function f(){var d;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,h.$axios.get("/api/financial/taxes/0",{params:{name:s}});case 2:return d=y.sent,y.abrupt("return",d.data.data.rows);case 4:case"end":return y.stop()}},f)}))()},getDataAtRowPro:function(s,h){return this.$refs.details.hotInstance.getDataAtRowProp(s,h)},countRows:function(){return this.$refs.details.hotInstance.countRows()},checkIfEmptyRow:function(s){return this.$refs.details.hotInstance.isEmptyRow(s)},getAddData:function(s){if(s==="0")for(var h=this.$refs.details.hotInstance.countRows(),f=0;f<h;f++)this.$refs.details.hotInstance.setDataAtRowProp(f,"id",null);return this.$refs.details.hotInstance.getSourceData()}}},k=K,st=t(50),C=Object(st.a)(k,B,F,!1,null,null,null),l=M.default=C.exports;installComponents(C,{AccountingDialogAccount:t(666).default})},598:function(lt,M,t){"use strict";var B=t(7),F=t.n(B),U=t(10),V=t.n(U),w=t(12),ut=t.n(w),z=t(13),nt=t.n(z),N=t(2),G=t(4),Y=t.n(G),X=t(34),P=t.n(X),b=t(51),x=t.n(b),O=t(28),S=t.n(O),W=t(8),at=t.n(W),Q=t(21),R=t.n(Q),tt=t(64),ct=t.n(tt),ot=t(269),Z=t.n(ot),dt=t(33),rt=t.n(dt),K=t(270),k=t.n(K),st=t(271),C=t.n(st),l=t(272),u=t.n(l),s=t(273),h=t.n(s),f=t(274),d=t.n(f),v=t(275),y=t.n(v),j=t(276),T=t.n(j),E=t(277),A=t.n(E),I=t(278),H=t.n(I),it=t(279),gt=t.n(it),q=t(280),pt=t.n(q),ht=t(281),Et=t.n(ht),Ct=t(282),mt=t.n(Ct),Ot=t(35),Kt=t.n(Ot),St=t(9),Mt=t.n(St),wt=t(283),Ht=t.n(wt),xt=t(3),Rt=t(77),Lt=t(1);function et(o,n){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);n&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),a.push.apply(a,e)}return a}function Dt(o){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?et(Object(a),!0).forEach(function(e){Object(N.a)(o,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):et(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}var Wt=["sm","md","lg","xl"],vt=["start","end","center"];function jt(o,n){return Wt.reduce(function(a,e){return a[o+Object(Lt.I)(e)]=n(),a},{})}var Tt=function(n){return[].concat(vt,["baseline","stretch"]).includes(n)},bt=jt("align",function(){return{type:String,default:null,validator:Tt}}),At=function(n){return[].concat(vt,["space-between","space-around"]).includes(n)},J=jt("justify",function(){return{type:String,default:null,validator:At}}),ft=function(n){return[].concat(vt,["space-between","space-around","stretch"]).includes(n)},It=jt("alignContent",function(){return{type:String,default:null,validator:ft}}),_t={align:Object.keys(bt),justify:Object.keys(J),alignContent:Object.keys(It)},Bt={align:"align",justify:"justify",alignContent:"align-content"};function Ut(o,n,a){var e=Bt[o];if(a!=null){if(n){var i=n.replace(o,"");e+="-".concat(i)}return e+="-".concat(a),e.toLowerCase()}}var r=new Map;M.a=xt.default.extend({name:"v-row",functional:!0,props:Dt(Dt(Dt({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:Tt}},bt),{},{justify:{type:String,default:null,validator:At}},J),{},{alignContent:{type:String,default:null,validator:ft}},It),render:function(n,a){var e=a.props,i=a.data,c=a.children,m="";for(var g in e)m+=String(e[g]);var p=r.get(m);return p||function(){var _;p=[];var D;for(D in _t)_t[D].forEach(function(L){var yt=e[L],$=Ut(D,L,yt);$&&p.push($)});p.push((_={"no-gutters":e.noGutters,"row--dense":e.dense},Object(N.a)(_,"align-".concat(e.align),e.align),Object(N.a)(_,"justify-".concat(e.justify),e.justify),Object(N.a)(_,"align-content-".concat(e.alignContent),e.alignContent),_)),r.set(m,p)}(),n(e.tag,Object(Rt.a)(i,{staticClass:"row",class:p}),c)}})},599:function(lt,M,t){var B=t(375),F=t(47);lt.exports=function(U,V,w){return w.get&&B(w.get,V,{getter:!0}),w.set&&B(w.set,V,{setter:!0}),F.f(U,V,w)}},600:function(lt,M,t){"use strict";t.r(M);var B=t(165),F=t(249),U=t(87),V=t(594),w=t(575),ut=t(247),z=t(589),nt=function(){var O=this,S=O._self._c;return S(V.a,{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:O.original,"max-width":O.maxWidth,transition:"dialog-top-transition"},model:{value:O.dialog,callback:function(at){O.dialog=at},expression:"dialog"}},[S(F.a,[S(U.c,[S("span",{staticClass:"subtitle-2"},[O._v(O._s(O.dialogTitle))]),O._v(" "),S(z.a),O._v(" "),S(B.a,{attrs:{icon:"",color:"red",dark:""},on:{click:function(at){return O.closeDialog()}}},[S(ut.a,[O._v("mdi-close-circle")])],1)],1),O._v(" "),S(w.a),O._v(" "),S(U.b,{staticClass:"pr-0 pl-0"},[O._t("content")],2),O._v(" "),S(w.a),O._v(" "),S(U.a,[O._t("addLine"),O._v(" "),S(z.a),O._v(" "),O._t("saveData")],2)],1)],1)},N=[],G={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},Y=G,X=t(50),P=Object(X.a)(Y,nt,N,!1,null,null,null),b=M.default=P.exports},644:function(lt,M,t){"use strict";t.r(M);var B=t(165),F=t(587),U=t(908),V=t(247),w=t(248),ut=t(166),z=t(31),nt=t(576),N=t(598),G=t(592),Y=t(573),X=t(21),P=t(268),b=function(){var l=this,u=l._self._c;return u(N.a,[u(F.a,{staticClass:"mt-0",attrs:{cols:"12"}},[u(G.a,{directives:[{name:"show",rawName:"v-show",value:l.loading,expression:"loading"}],attrs:{type:"table"}}),l._v(" "),u(U.a,{directives:[{name:"show",rawName:"v-show",value:!l.loading,expression:"!loading"}],class:l.viewData?"elevation-0":"elevation-1",attrs:{"mobile-breakpoint":0,headers:l.headers,items:l.allData,loading:l.loading,"single-select":l.viewData,"show-select":"","fixed-header":"",search:l.search,height:l.viewData?"60vh":"70vh",dense:"","footer-props":{"items-per-page-options":[250,500,-1]}},scopedSlots:l._u([{key:"top",fn:function(){return[l.viewData?l._e():u("div",{staticClass:"pl-4 pt-2"},[u("span",{staticClass:"font-weight-medium text-h6"},[l._v(l._s(l.$t("Chart Of Accounts"))+`
          `)])]),l._v(" "),u("LazyMainToolbar",{attrs:{"document-status":l.documentStatus,"search-status":l.searchStatus,"item-search":l.itemSearch,"search-item":l.searchItem,search:l.search,"show-zero-qty":!0,title:"Chart of Accounts","show-batch-action":"","show-new-data":"","show-filter":"","show-search-filter":!1,"new-data-text":"New Account"},on:{emitData:l.emitData,newData:l.newData,getDataFromApi:l.getDataFromApi},scopedSlots:l._u([{key:"search",fn:function(){return[u(Y.a,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:l.search,callback:function(d){l.search=d},expression:"search"}})]},proxy:!0}])})]},proxy:!0},{key:"item.balance",fn:function(h){var f=h.item;return[l._v(`
        `+l._s(f.currency.currency_code+" "+l.$formatter.formatPrice(f.balance))+`
      `)]}},{key:"item.code",fn:function(h){var f=h.item;return[u("a",{on:{click:function(v){return l.viewItem(f)}}},[u("strong",{domProps:{textContent:l._s(f.code)}})])]}},{key:"item.id",fn:function(h){var f=h.item;return[u(B.a,{staticClass:"font-weight-bold text-right",attrs:{color:"secondary",text:"",small:""},on:{click:function(v){return l.actions(l.itemAction,f)}}},[l._v(`
          `+l._s(l.itemText)+`
        `)]),l._v(" "),u(nt.a,{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:l._u([{key:"activator",fn:function(v){var y=v.on,j=v.attrs;return[u(B.a,l._g(l._b({attrs:{color:"black",dark:"",icon:""}},"v-btn",j,!1),y),[u(V.a,[l._v("mdi-menu-down")])],1)]}}],null,!0)},[l._v(" "),u(w.a,l._l(l.items,function(d,v){return u(ut.a,{key:v,on:{click:function(j){return l.actions(d.action,f)}}},[u(z.a,[u(z.c,[l._v(l._s(d.text))])],1)],1)}),1)],1)]}}],null,!0),model:{value:l.selected,callback:function(h){l.selected=h},expression:"selected"}}),l._v(" "),u("LazyAccountingFormAccount",{ref:"forms",attrs:{"form-data":l.form,"form-title":l.formTitle,"button-title":l.buttonTitle,url:l.url},on:{getDataFromApi:l.getDataFromApi}})],1)],1)},x=[],O=t(8),S=t(7),W=t(12),at=t(9),Q=t(13),R=t(2),tt=t(10),ct=t(4);function ot(C,l){var u=Object.keys(C);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(C);l&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(C,h).enumerable})),u.push.apply(u,s)}return u}function Z(C){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?ot(Object(u),!0).forEach(function(s){Object(R.a)(C,s,u[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(u)):ot(Object(u)).forEach(function(s){Object.defineProperty(C,s,Object.getOwnPropertyDescriptor(u,s))})}return C}var dt={name:"ChartOfAccount",props:{viewData:{type:Boolean,default:!1},formType:{type:String,default:""}},data:function(){return{selected:[],totalData:0,editedIndex:-1,loading:!0,allData:[],documentStatus:[],itemSearch:[],searchStatus:"",searchItem:"",search:"",show_zero_balance:null,form:{},defaultItem:{},options:{},items:[{text:"Edit",action:"edit"},{text:"Delete",action:"delete"}],itemText:"Edit",itemAction:"edit",url:"/api/financial/accounts",headers:[],title:"Chart Of Accounts",formTypeData:null}},head:function(){return{title:this.title}},computed:{formTitle:function(){return this.editedIndex===-1?"New Account":"Edit Account"},buttonTitle:function(){return this.editedIndex===-1?"Save":"Update"}},activated:function(){this.getDataFromApi()},mounted:function(){this.mappingHeader()},methods:{returnSelected:function(){return this.selected},viewItem:function(l){this.$router.push({path:"/app/accounting/detail",query:{id:l.id}})},setEmptyToSelected:function(l){this.selected=[],this.formTypeData=this.$auth.$storage.getState("formType"),this.getDataFromApi()},newData:function(){this.editedIndex=-1,this.$refs.forms.newData(this.form)},actions:function(l,u){l==="edit"?this.editItem(u):this.deleteItem(u)},editItem:function(l){this.editedIndex=this.allData.indexOf(l),this.$refs.forms.editItem(l,this.form)},deleteItem:function(l){var u=this,s=this;this.$swal({title:"Are you sure?",text:"The data will be permanently deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(h){h.value&&u.$axios.delete(s.url+"/"+l.id).then(function(f){u.$swal({type:"success",title:"Success...",text:"Row Deleted!"}),u.getDataFromApi()}).catch(function(f){u.$swal({type:"error",title:"Oops...",text:f.response.data.message})})})},emitData:function(l){this.documentStatus=l.documentStatus,this.itemSearch=l.itemSearch,this.searchStatus=l.searchStatus,this.searchItem=l.searchItem,this.search=l.search,this.filters=l.filters,this.show_zero_balance=l.show_zero_balance,this.getDataFromApi()},mappingHeader:function(){this.viewData?this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name",cellClass:"disable-wrap"},{text:"Account Type",value:"account_type",cellClass:"disable-wrap"},{text:"Category",value:"category.name"}]:this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name"},{text:"Account Type",value:"account_type"},{text:"Category",value:"category.name"},{text:"Balance",value:"balance",cellClass:"disable-wrap",sortable:!1,filterable:!1},{text:"Actions",value:"id",align:"right",cellClass:"disable-wrap",sortable:!1,filterable:!1}]},searchData:function(l){this.search=l.search},getDataFromApi:function(){var l=this;this.loading=!0;var u=this,s="";this.formTypeData==="CS"?s="OPERATING_REVENUE":this.formTypeData==="CP"&&(s="OPERATING_EXPENSE, DIRECT_EXPENSE, OVERHEAD_EXPENSE, OTHER_EXPENSE, NON_CURRENT_ASSET, CURRENT_ASSET, INVENTORY");var h={searchItem:u.searchItem,documentStatus:u.documentStatus,searchStatus:u.searchStatus,search:u.search,show_zero_balance:u.show_zero_balance,type:s};this.$axios.get(this.url,{params:Z(Z({},u.options),h)}).then(function(f){l.loading=!1;var d=f.data;l.allData=d.data,l.totalData=d.total,l.itemSearch=d.filter,l.form=Object.assign({},d.form),l.defaultItem=Object.assign({},d.form)}).catch(function(f){l.loading=!1,l.$swal({type:"error",title:"Error",text:f.response.data.message})})}}},rt=dt,K=t(50),k=Object(K.a)(rt,b,x,!1,null,null,null),st=M.default=k.exports},666:function(lt,M,t){"use strict";t.r(M);var B=t(165),F=t(585),U=t(247),V=function(){var P=this,b=P._self._c;return b("div",[b("DialogForm",{ref:"dialogForm",attrs:{"max-width":"1000px","dialog-title":P.$t("Chart Of Accounts"),"button-title":"Save",original:"top"},scopedSlots:P._u([{key:"content",fn:function(){return[b(F.a,[b("AccountingTableAccount",{ref:"tableItem",attrs:{"view-data":P.viewData,"form-type":P.formType,"show-add-btn":P.showAddBtn}})],1)]},proxy:!0},{key:"saveData",fn:function(){return[b(B.a,{attrs:{color:"green darken-1",dark:"",small:""},on:{click:P.selectData}},[P._v(`
        Select Item
        `),b(U.a,[P._v("mdi-arrow-down-right")])],1)]},proxy:!0}])})],1)},w=[],ut=t(58),z={name:"DialogItem",props:{viewData:{type:Boolean,default:!0},showAddBtn:{type:Boolean,default:!0},formType:{type:String,default:""}},data:function(){return{row:null}},methods:{openDialog:function(P,b){var x=this;this.$refs.dialogForm.openDialog(),setTimeout(function(){x.$refs.tableItem.setEmptyToSelected(b)},150),this.row=P},selectData:function(){this.$emit("selectItems",{row:this.row,selected:this.$refs.tableItem.returnSelected()}),this.$refs.dialogForm.closeDialog()}}},nt=z,N=t(50),G=Object(N.a)(nt,V,w,!1,null,null,null),Y=M.default=G.exports;installComponents(G,{AccountingTableAccount:t(644).default,DialogForm:t(600).default})},670:function(lt,M,t){"use strict";t.d(M,"a",function(){return l});var B=t(606),F=t(604),U=t(4),V=t(111),w=t(625),ut=t(12),z=t(7),nt=t(46),N=t(52),G=t(212),Y=t(33),X=t(35),P=t(871),b=t(605),x=t(601);function O(u){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},O(u)}function S(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")}function W(u,s){for(var h=0;h<s.length;h++){var f=s[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}function at(u,s,h){return s&&W(u.prototype,s),h&&W(u,h),Object.defineProperty(u,"prototype",{writable:!1}),u}function Q(){return typeof Reflect!="undefined"&&Reflect.get?Q=Reflect.get.bind():Q=function(s,h,f){var d=R(s,h);if(!!d){var v=Object.getOwnPropertyDescriptor(d,h);return v.get?v.get.call(arguments.length<3?s:f):v.value}},Q.apply(this,arguments)}function R(u,s){for(;!Object.prototype.hasOwnProperty.call(u,s)&&(u=K(u),u!==null););return u}function tt(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(s&&s.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),s&&ct(u,s)}function ct(u,s){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,d){return f.__proto__=d,f},ct(u,s)}function ot(u){var s=rt();return function(){var f=K(u),d;if(s){var v=K(this).constructor;d=Reflect.construct(f,arguments,v)}else d=f.apply(this,arguments);return Z(this,d)}}function Z(u,s){if(s&&(O(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dt(u)}function dt(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function rt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(u){return!1}}function K(u){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},K(u)}var k="ht_editor_visible",st="selectEditor",C="select",l=function(u){tt(h,u);var s=ot(h);function h(){return S(this,h),s.apply(this,arguments)}return at(h,[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),Object(b.a)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(d){this.select.value=d}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="";var d=this.hot.getShortcutManager();d.setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",Object(b.v)(this.select,k)&&Object(b.K)(this.select,k),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var d=this;this.addHook("afterScrollHorizontally",function(){return d.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return d.refreshDimensions()}),this.addHook("afterColumnResize",function(){return d.refreshDimensions()}),this.addHook("afterRowResize",function(){return d.refreshDimensions()})}},{key:"prepare",value:function(d,v,y,j,T,E){var A=this;Q(K(h.prototype),"prepare",this).call(this,d,v,y,j,T,E);var I=this.cellProperties.selectOptions,H;typeof I=="function"?H=this.prepareOptions(I(this.row,this.col,this.prop)):H=this.prepareOptions(I),Object(b.e)(this.select),Object(x.o)(H,function(it,gt){var q=A.hot.rootDocument.createElement("OPTION");q.value=gt,Object(b.f)(q,it),A.select.appendChild(q)})}},{key:"prepareOptions",value:function(d){var v={};if(Array.isArray(d))for(var y=0,j=d.length;y<j;y++)v[d[y]]=d[y];else O(d)==="object"&&(v=d);return v}},{key:"refreshValue",value:function(){var d=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=d,this.setValue(d),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===P.b.EDITING){if(this.TD=this.getEditedCell(),!this.TD){this.close();return}var d=this.getEditedCellRect(),v=d.top,y=d.start,j=d.width,T=d.height,E=this.select.style;E.height="".concat(T,"px"),E.width="".concat(j,"px"),E.top="".concat(v,"px"),E[this.hot.isRtl()?"right":"left"]="".concat(y,"px"),E.margin="0px",Object(b.a)(this.select,k)}}},{key:"registerShortcuts",value:function(){var d=this,v=this.hot.getShortcutManager(),y=v.getContext("editor"),j={group:st};this.isInFullEditMode()!==!1&&y.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var E=d.select.selectedIndex-1;E>=0&&(d.select[E].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var E=d.select.selectedIndex+1;E<=d.select.length-1&&(d.select[E].selected=!0)}}],j)}},{key:"unregisterShortcuts",value:function(){var d=this.hot.getShortcutManager(),v=d.getContext("editor");v.removeShortcutsByGroup(st)}}],[{key:"EDITOR_TYPE",get:function(){return C}}]),h}(P.a)},686:function(lt,M,t){"use strict";t.d(M,"a",function(){return Ut});var B=t(212),F=t(4),U=t(33),V=t(628),w=t(35),ut=t(36),z=t(58),nt=t(42),N=t(636),G=t(606),Y=t(604),X=t(111),P=t(625),b=t(12),x=t(7),O=t(46),S=t(52),W=t(27),at=t(21),Q=t(896),R=t(607),tt=t(663),ct=t(9),ot=t(79),Z=t(605);function dt(r,o){return C(r)||st(r,o)||K(r,o)||rt()}function rt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K(r,o){if(!!r){if(typeof r=="string")return k(r,o);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(r,o)}}function k(r,o){(o==null||o>r.length)&&(o=r.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=r[n];return a}function st(r,o){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a=[],e=!0,i=!1,c,m;try{for(n=n.call(r);!(e=(c=n.next()).done)&&(a.push(c.value),!(o&&a.length===o));e=!0);}catch(g){i=!0,m=g}finally{try{!e&&n.return!=null&&n.return()}finally{if(i)throw m}}return a}}function C(r){if(Array.isArray(r))return r}function l(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function u(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function s(r,o,n){return o&&u(r.prototype,o),n&&u(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}var h=function(){function r(o){l(this,r),this.hot=o,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}return s(r,[{key:"addRow",value:function(n,a){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={row:n};this.rows.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"addColumnHeadersRow",value:function(n){var a=this.hot.getColHeader(0);if(a!=null){var e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=n,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}},{key:"addColumn",value:function(n,a){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={col:n};this.columns.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(n)!==null&&this.hot.view.appendColHeader(n,this.table.th),this.table.tBody.appendChild(this.createCol(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"getHeights",value:function(n){this.injected||this.injectTable(),Object(R.a)(this.rows,function(a){n(a.row,Object(Z.H)(a.table)-1)})}},{key:"getWidths",value:function(n){this.injected||this.injectTable(),Object(R.a)(this.columns,function(a){var e=a.table.getBoundingClientRect(),i=e.width;n(a.col,Math.ceil(i))})}},{key:"setSettings",value:function(n){this.settings=n}},{key:"setSetting",value:function(n,a){this.settings||(this.settings={}),this.settings[n]=a}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(n){return this.settings?this.settings[n]:null}},{key:"createColGroupsCol",value:function(){var n=this,a=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&a.appendChild(this.createColElement(-1)),this.samples.forEach(function(e){Object(R.a)(e.strings,function(i){a.appendChild(n.createColElement(i.col))})}),a}},{key:"createRow",value:function(n){var a=this,e=this.hot.rootDocument,i=e.createDocumentFragment(),c=e.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(n,c),i.appendChild(c)),this.samples.forEach(function(m){Object(R.a)(m.strings,function(g){var p=g.col,_=a.hot.getCellMeta(n,p);_.col=p,_.row=n;var D=a.hot.getCellRenderer(_),L=e.createElement("td");L.setAttribute("ghost-table",1),D(a.hot,L,n,p,a.hot.colToProp(p),g.value,_),i.appendChild(L)})}),i}},{key:"appendColumnHeadersRow",value:function(){var n=this,a=this.hot.rootDocument,e=a.createDocumentFragment(),i=[];if(this.hot.hasRowHeaders()){var c=a.createElement("th");i.push([-1,c]),e.appendChild(c)}this.samples.forEach(function(m){Object(R.a)(m.strings,function(g){var p=g.col,_=a.createElement("th");i.push([p,_]),e.appendChild(_)})}),this.table.tHead.appendChild(e),Object(R.a)(i,function(m){var g=dt(m,2),p=g[0],_=g[1];n.hot.view.appendColHeader(p,_)})}},{key:"createCol",value:function(n){var a=this,e=this.hot.rootDocument,i=e.createDocumentFragment();return this.samples.forEach(function(c){Object(R.a)(c.strings,function(m){var g=m.row,p=a.hot.getCellMeta(g,n);p.col=n,p.row=g;var _=a.hot.getCellRenderer(p),D=e.createElement("td"),L=e.createElement("tr");D.setAttribute("ghost-table",1),_(a.hot,D,g,n,a.hot.colToProp(n),m.value,p),L.appendChild(D),i.appendChild(L)})}),i}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((n||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(n){var a=this.hot.rootDocument.createElement("col");return a.style.width="".concat(this.hot.view._wt.wtTable.getStretchedColumnWidth(n),"px"),a}},{key:"createTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),i=a.createElement("table"),c=a.createElement("thead"),m=a.createElement("tbody"),g=a.createElement("colgroup"),p=a.createElement("tr"),_=a.createElement("th");return this.isVertical()&&i.appendChild(g),this.isHorizontal()&&(p.appendChild(_),c.appendChild(p),i.style.tableLayout="auto",i.style.width="auto"),i.appendChild(c),this.isVertical()&&m.appendChild(p),i.appendChild(m),Object(Z.a)(i,n),e.appendChild(i),{fragment:e,table:i,tHead:c,tBody:m,colGroup:g,tr:p,th:_}}},{key:"createContainer",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),i=a.createElement("div"),c="htGhostTable htAutoSize ".concat(n.trim());return Object(Z.a)(i,c),e.appendChild(i),{fragment:e,container:i}}},{key:"isVertical",value:function(){return!!(this.rows.length&&!this.columns.length)}},{key:"isHorizontal",value:function(){return!!(this.columns.length&&!this.rows.length)}}]),r}(),f=h,d=t(639),v=t(601),y=t(632),j=t(269),T=t(8),E=t(623),A=t(617);function I(r,o,n){return o in r?Object.defineProperty(r,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[o]=n,r}function H(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function it(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function gt(r,o,n){return o&&it(r.prototype,o),n&&it(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}var q=function(){function r(o){H(this,r),this.samples=null,this.dataFactory=o,this.customSampleCount=null,this.allowDuplicates=!1}return gt(r,[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:r.SAMPLE_COUNT}},{key:"setSampleCount",value:function(n){this.customSampleCount=n}},{key:"setAllowDuplicates",value:function(n){this.allowDuplicates=n}},{key:"generateRowSamples",value:function(n,a){return this.generateSamples("row",a,n)}},{key:"generateColumnSamples",value:function(n,a){return this.generateSamples("col",a,n)}},{key:"generateSamples",value:function(n,a,e){var i=this,c=new Map,m=typeof e=="number"?{from:e,to:e}:e,g=m.from,p=m.to;return Object(y.c)(g,p,function(_){var D=i.generateSample(n,a,_);c.set(_,D)}),c}},{key:"generateSample",value:function(n,a,e){var i=this;if(n!=="row"&&n!=="col")throw new Error("Unsupported sample type");var c=new Map,m=n==="row"?"col":"row",g=[];return Object(y.c)(a.from,a.to,function(p){var _=n==="row"?i.dataFactory(e,p):i.dataFactory(p,e),D=_.value,L=_.bundleSeed,yt=typeof L=="string"&&L.length>0,$;yt?$=L:Object(v.l)(D)?$="".concat(Object.keys(D).length):Array.isArray(D)?$="".concat(D.length):$="".concat(Object(A.f)(D).length),c.has($)||c.set($,{needed:i.getSampleCount(),strings:[]});var Pt=c.get($);if(Pt.needed){var Vt=g.indexOf(D)>-1;(!Vt||i.allowDuplicates||yt)&&(Pt.strings.push(I({value:D},m,p)),g.push(D),Pt.needed-=1)}}),c}}],[{key:"SAMPLE_COUNT",get:function(){return 3}}]),r}(),pt=q,ht=t(642),Et=t(889),Ct=t(693);function mt(r){return mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},mt(r)}function Ot(r,o){return Ht(r)||wt(r,o)||St(r,o)||Kt()}function Kt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function St(r,o){if(!!r){if(typeof r=="string")return Mt(r,o);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(r,o)}}function Mt(r,o){(o==null||o>r.length)&&(o=r.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=r[n];return a}function wt(r,o){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a=[],e=!0,i=!1,c,m;try{for(n=n.call(r);!(e=(c=n.next()).done)&&(a.push(c.value),!(o&&a.length===o));e=!0);}catch(g){i=!0,m=g}finally{try{!e&&n.return!=null&&n.return()}finally{if(i)throw m}}return a}}function Ht(r){if(Array.isArray(r))return r}function xt(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function Rt(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function Lt(r,o,n){return o&&Rt(r.prototype,o),n&&Rt(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function et(){return typeof Reflect!="undefined"&&Reflect.get?et=Reflect.get.bind():et=function(o,n,a){var e=Dt(o,n);if(!!e){var i=Object.getOwnPropertyDescriptor(e,n);return i.get?i.get.call(arguments.length<3?o:a):i.value}},et.apply(this,arguments)}function Dt(r,o){for(;!Object.prototype.hasOwnProperty.call(r,o)&&(r=J(r),r!==null););return r}function Wt(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),o&&vt(r,o)}function vt(r,o){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},vt(r,o)}function jt(r){var o=At();return function(){var a=J(r),e;if(o){var i=J(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return Tt(this,e)}}function Tt(r,o){if(o&&(mt(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bt(r)}function bt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function At(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function J(r){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},J(r)}d.a.getSingleton().register("modifyAutoColumnSizeSeed");var ft="autoColumnSize",It=10,_t=new WeakMap,Bt="autoColumnSize",Ut=function(r){Wt(n,r);var o=jt(n);function n(a){var e;return xt(this,n),e=o.call(this,a),_t.set(bt(e),{cachedColumnHeaders:[]}),e.ghostTable=new f(e.hot),e.samplesGenerator=new pt(function(i,c){var m=e.hot.getCellMeta(i,c),g="";m.spanned||(g=e.hot.getDataAtCell(i,c));var p="";return e.hot.hasHook("modifyAutoColumnSizeSeed")&&(p=e.hot.runHooks("modifyAutoColumnSizeSeed",p,m,g)),{value:g,bundleSeed:p}}),e.firstCalculation=!0,e.inProgress=!1,e.measuredColumns=0,e.columnWidthsMap=new Ct.a,e.hot.columnIndexMapper.registerMap(Bt,e.columnWidthsMap),e.addHook("beforeColumnResize",function(i,c,m){return e.onBeforeColumnResize(i,c,m)}),e}return Lt(n,[{key:"isEnabled",value:function(){return this.hot.getSettings()[ft]!==!1&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var i=this.hot.getSettings()[ft];i&&i.useHeaders!==null&&i.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",i.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("beforeChangeRender",function(c){return e.onBeforeChange(c)}),this.addHook("afterFormulasValuesUpdate",function(c){return e.onAfterFormulasValuesUpdate(c)}),this.addHook("beforeViewRender",function(c){return e.onBeforeViewRender(c)}),this.addHook("modifyColWidth",function(c,m){return e.getColumnWidth(m,c)}),this.addHook("afterInit",function(){return e.onAfterInit()}),et(J(n.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var e=this.findColumnsWhereHeaderWasChanged();e.length&&(this.clearCache(e),this.calculateVisibleColumnsWidth()),et(J(n.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var e=this;et(J(n.prototype),"disablePlugin",this).call(this),this.addHook("beforeColumnResize",function(i,c,m){return e.onBeforeColumnResize(i,c,m)})}},{key:"calculateVisibleColumnsWidth",value:function(){var e=this.hot.countRows();if(!!e){var i=this.hot.renderCall,c=this.getFirstVisibleColumn(),m=this.getLastVisibleColumn();c===-1||m===-1||this.calculateColumnsWidth({from:c,to:m},void 0,i)}}},{key:"calculateColumnsWidth",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=typeof i=="number"?{from:i,to:i}:i,p=typeof c=="number"?{from:c,to:c}:c;Object(y.c)(g.from,g.to,function(_){var D=e.hot.toPhysicalColumn(_);if(D===null&&(D=_),m||e.columnWidthsMap.getValueAtIndex(D)===null&&!e.hot._getColWidthFromSettings(D)){var L=e.samplesGenerator.generateColumnSamples(_,p);Object(R.a)(L,function(yt){var $=Ot(yt,2),Pt=$[0],Vt=$[1];return e.ghostTable.addColumn(Pt,Vt)})}}),this.ghostTable.columns.length&&(this.hot.batchExecution(function(){e.ghostTable.getWidths(function(_,D){var L=e.hot.toPhysicalColumn(_);e.columnWidthsMap.setValueAtIndex(L,D)})},!0),this.measuredColumns=g.to+1,this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},c=0,m=this.hot.countCols()-1,g=null;this.inProgress=!0;var p=function D(){if(!e.hot){Object(tt.a)(g),e.inProgress=!1;return}e.calculateColumnsWidth({from:c,to:Math.min(c+n.CALCULATION_STEP,m)},i),c=c+n.CALCULATION_STEP+1,c<m?g=Object(tt.i)(D):(Object(tt.a)(g),e.inProgress=!1,e.hot.view.adjustElementsSize())},_=this.getSyncCalculationLimit();this.firstCalculation&&_>=0&&(this.calculateColumnsWidth({from:0,to:_},i),this.firstCalculation=!1,c=_+1),c<m?p():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var e=this.hot.getSettings()[ft],i=e&&Object(v.j)(e,"samplingRatio")?e.samplingRatio:void 0,c=e&&Object(v.j)(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;i&&!isNaN(i)&&this.samplesGenerator.setSampleCount(parseInt(i,10)),c&&this.samplesGenerator.setAllowDuplicates(c)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&this.hot.view._wt.wtTable.isVisible()&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var e=this.hot.getSettings()[ft],i=n.SYNC_CALCULATION_LIMIT,c=this.hot.countCols()-1;return Object(v.l)(e)&&(i=e.syncLimit,Object(ht.a)(i)?i=Object(y.e)(c,i):i>>=0),Math.min(i,c)}},{key:"getColumnWidth",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=i;return m===void 0&&(m=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),c&&typeof m=="number"&&(m=Math.max(m,Et.a.DEFAULT_WIDTH))),m}},{key:"getFirstVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var i=e.wtTable.getFirstVisibleColumn();if(i!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(i)}if(e.wtViewport.columnsRenderCalculator){var c=e.wtTable.getFirstRenderedColumn();if(c!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(c)}return-1}},{key:"getLastVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var i=e.wtTable.getLastVisibleColumn();if(i!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(i)}if(e.wtViewport.columnsRenderCalculator){var c=e.wtTable.getLastRenderedColumn();if(c!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(c)}return-1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var e=this.hot.getColHeader(),i=_t.get(this),c=i.cachedColumnHeaders,m=Object(R.d)(e,function(g,p,_){var D=c.length;return(D-1<_||c[_]!==p)&&g.push(_),D-1<_?c.push(p):c[_]=p,g},[]);return m}},{key:"clearCache",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];i.length?this.hot.batchExecution(function(){Object(R.a)(i,function(c){e.columnWidthsMap.setValueAtIndex(c,null)})},!0):this.columnWidthsMap.clear()}},{key:"isNeedRecalculate",value:function(){return!!Object(R.b)(this.columnWidthsMap.getValues().slice(0,this.measuredColumns),function(e){return e===null}).length}},{key:"onBeforeViewRender",value:function(){this.calculateVisibleColumnsWidth(),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()}},{key:"onAfterLoadData",value:function(){var e=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){e.hot&&e.recalculateAllColumnsWidth()},0)}},{key:"onBeforeChange",value:function(e){var i=this,c=Object(R.c)(e,function(m){var g=Ot(m,2),p=g[1];return i.hot.toPhysicalColumn(i.hot.propToCol(p))});this.clearCache(Array.from(new Set(c)))}},{key:"onBeforeColumnResize",value:function(e,i,c){var m=e;return c&&(this.calculateColumnsWidth(i,void 0,!0),m=this.getColumnWidth(i,void 0,!1)),m}},{key:"onAfterInit",value:function(){_t.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"onAfterFormulasValuesUpdate",value:function(e){var i=Object(R.b)(e,function(m){var g;return Object(A.b)((g=m.address)===null||g===void 0?void 0:g.col)}),c=Object(R.c)(i,function(m){return m.address.col});this.clearCache(Array.from(new Set(c)))}},{key:"destroy",value:function(){this.ghostTable.clean(),et(J(n.prototype),"destroy",this).call(this)}}],[{key:"PLUGIN_KEY",get:function(){return ft}},{key:"PLUGIN_PRIORITY",get:function(){return It}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}]),n}(Q.a)}}]);
