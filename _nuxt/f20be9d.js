(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{1109:function(F,_,a){"use strict";a.r(_);var L=function(){var s=this,t=s._self._c;return t("div",{staticClass:"scroll-container-min",attrs:{id:"parentContainer"}},[t("hot-table",{ref:"details",attrs:{root:s.detailsRoot,settings:s.settings}}),s._v(" "),t("LazyInventoryDialogItem",{ref:"dialogItem",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:s.selectItems}})],1)},W=[],B=a(24),K=a(17),G=a(74),k=a(4),J=a(10),U=a(655),g=a(689),H=a(1151),V=a(894),z=a(1145),D=a(1148),v=a(710),b=a(674),f=a(776),j=a(895),E=a(912),I=a(1153),y=a(1149),P=a(1150),T=a(897),O=a(697),N=a(658);Object(g.c)(H.a),Object(g.c)(V.a),Object(g.c)(z.a),Object(g.c)(D.a),Object(v.c)(b.a),Object(f.d)(j.a),Object(f.d)(E.a),Object(f.d)(I.a),Object(f.d)(y.a),Object(f.d)(P.a),Object(f.d)(T.a),Object(f.d)(O.a);var w=function(s,t){t.row===-1&&s.target.nodeName==="TD"&&(s.stopImmediatePropagation(),s.stopPropagation(),this.deselectCell())},C={name:"TableDetail",components:{HotTable:U.a},data:function(){return{settings:{licenseKey:"non-commercial-and-evaluation",currentRowClassName:"currentRow",currentColClassName:"currentCol",startRows:1,rowHeaders:!0,manualColumnResize:!0,rowHeights:28,viewportRowRenderingOffset:1e3,viewportColumnRenderingOffset:100,colWidths:80,persistentState:!0,width:"100%",height:"auto",stretchH:"all",hiddenColumns:{copyPasteEnabled:!1,indicator:!1,columns:[1]},beforeOnCellMouseDown:w,colHeaders:["#","Id","Transaction","Description","Due Date","Open Balance","Amount"],columns:[{data:"check_payment",width:10,type:"checkbox",className:"htCenter"},{data:"id",wordWrap:!1},{data:"classification",width:80,readOnly:!0,wordWrap:!1},{data:"narration",width:120,readOnly:!0,wordWrap:!1},{data:"service_date",width:60,readOnly:!0,wordWrap:!1,className:"htCenter"},{data:"sub_total",width:60,wordWrap:!1,type:"numeric",readOnly:!0,numericFormat:{pattern:"0,0.00"}},{data:"amount",width:60,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}}]},detailsRoot:"detailsRoot",colHeaders:[],form:{}}},created:function(){this.setInstance()},methods:{setInstance:function(){window.details=this},removeRow:function(s){this.$refs.details.hotInstance.alter("remove_row",s)},addLine:function(){var s=this.$refs.details.hotInstance.countRows();this.$refs.details.hotInstance.alter("insert_row",s+1,5)},updateTableSettings:function(s){this.$refs.details.hotInstance.updateSettings({licenseKey:"non-commercial-and-evaluation",height:"auto",beforeRefreshDimensions:function(){return!1},beforeOnCellMouseDown:w,afterRemoveRow:function(e,r,o,n){var i=window.details;i.calculateTotal()},beforeRemoveRow:function(e,r,o,n){var i=window.details,l=[];o.forEach(function(h,u){var p=i.$refs.details.hotInstance.getDataAtCell(h,0);p&&l.push(p)});var d=i.$refs.details.hotInstance.countRows();return d===1&&i.$emit("calcTotal",{subTotal:0,amount:0,discountAmount:0,taxDetail:[]}),l.length>0&&i.$emit("removeData",{id:l}),!0},afterChange:function(e,r){var o=window.details;if(e){var n=0;e.forEach(function(i){var l=Object(K.a)(i,4),d=l[0],h=l[1],u=l[2],p=l[3];n=h,(n==="check_payment"||n==="quantity"||n==="price"||n==="discount_rate"||n==="amount")&&u!==p&&o.calculateTotal()})}},beforeRender:function(e){var r=window.details;r.$nuxt.$loading.start()},afterRender:function(e){var r=window.details;r.$nuxt.$loading.finish()},afterLoadData:function(e,r,o){}})},selectItems:function(s){var t=s.row,e=s.selected,r=this;this.$refs.details.hotInstance.batch(function(){e.forEach(function(o,n){r.$refs.details.hotInstance.setDataAtRowProp([[t,"classification",o.classification],[t,"narration",o.narration],[t,"service_date",o.due_date],[t,"sub_total",o.sub_total],[t,"amount",0]]),t++})})},setDataToDetails:function(s,t){var e=this,r=this;this.form=t,this.$refs.details.hotInstance.batch(function(){e.updateTableSettings();var o=t.line_items.length>0?t.line_items:s;r.$refs.details.hotInstance.loadData(o),e.$nuxt.$loading.finish()})},calculateTotal:function(){var s=this,t=this.$refs.details.hotInstance.countRows(),e=0;if(t>0)for(var r=function(i){s.$refs.details.hotInstance.batch(function(){var l=s.$refs.details.hotInstance.getDataAtRowProp(i,"amount");e=e+l})},o=0;o<t;o++)r(o);this.$emit("calcTotal",{amount:e})},getTaxRate:function(s){var t=this;return Object(B.a)(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.get("/api/financial/taxes/0",{params:{name:s}});case 2:return r=n.sent,n.abrupt("return",r.data.data.rows);case 4:case"end":return n.stop()}},e)}))()},getDataAtRowPro:function(s,t){return this.$refs.details.hotInstance.getDataAtRowProp(s,t)},countRows:function(){return this.$refs.details.hotInstance.countRows()},checkIfEmptyRow:function(s){return this.$refs.details.hotInstance.isEmptyRow(s)},getAddData:function(s){if(s==="0")for(var t=this.$refs.details.hotInstance.countRows(),e=0;e<t;e++)this.$refs.details.hotInstance.setDataAtRowProp(e,"id",null);return this.$refs.details.hotInstance.getSourceData()}}},S=C,m=a(50),R=Object(m.a)(S,L,W,!1,null,null,null),M=_.default=R.exports},674:function(F,_,a){"use strict";a.d(_,"a",function(){return s});var L=a(607),W=a(605),B=a(4),K=a(110),G=a(626),k=a(12),J=a(7),U=a(46),g=a(53),H=a(212),V=a(32),z=a(34),D=a(871),v=a(606),b=a(601);function f(t){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(t)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function I(t,e,r){return e&&E(t.prototype,e),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(){return typeof Reflect!="undefined"&&Reflect.get?y=Reflect.get.bind():y=function(e,r,o){var n=P(e,r);if(!!n){var i=Object.getOwnPropertyDescriptor(n,r);return i.get?i.get.call(arguments.length<3?e:o):i.value}},y.apply(this,arguments)}function P(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=m(t),t!==null););return t}function T(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,n){return o.__proto__=n,o},O(t,e)}function N(t){var e=S();return function(){var o=m(t),n;if(e){var i=m(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return w(this,n)}}function w(t,e){if(e&&(f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(t)}function C(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},m(t)}var R="ht_editor_visible",M="selectEditor",c="select",s=function(t){T(r,t);var e=N(r);function r(){return j(this,r),e.apply(this,arguments)}return I(r,[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),Object(v.a)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(n){this.select.value=n}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="";var n=this.hot.getShortcutManager();n.setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",Object(v.v)(this.select,R)&&Object(v.K)(this.select,R),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var n=this;this.addHook("afterScrollHorizontally",function(){return n.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return n.refreshDimensions()}),this.addHook("afterColumnResize",function(){return n.refreshDimensions()}),this.addHook("afterRowResize",function(){return n.refreshDimensions()})}},{key:"prepare",value:function(n,i,l,d,h,u){var p=this;y(m(r.prototype),"prepare",this).call(this,n,i,l,d,h,u);var A=this.cellProperties.selectOptions,$;typeof A=="function"?$=this.prepareOptions(A(this.row,this.col,this.prop)):$=this.prepareOptions(A),Object(v.e)(this.select),Object(b.o)($,function(Y,Q){var x=p.hot.rootDocument.createElement("OPTION");x.value=Q,Object(v.f)(x,Y),p.select.appendChild(x)})}},{key:"prepareOptions",value:function(n){var i={};if(Array.isArray(n))for(var l=0,d=n.length;l<d;l++)i[n[l]]=n[l];else f(n)==="object"&&(i=n);return i}},{key:"refreshValue",value:function(){var n=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=n,this.setValue(n),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===D.b.EDITING){if(this.TD=this.getEditedCell(),!this.TD){this.close();return}var n=this.getEditedCellRect(),i=n.top,l=n.start,d=n.width,h=n.height,u=this.select.style;u.height="".concat(h,"px"),u.width="".concat(d,"px"),u.top="".concat(i,"px"),u[this.hot.isRtl()?"right":"left"]="".concat(l,"px"),u.margin="0px",Object(v.a)(this.select,R)}}},{key:"registerShortcuts",value:function(){var n=this,i=this.hot.getShortcutManager(),l=i.getContext("editor"),d={group:M};this.isInFullEditMode()!==!1&&l.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var u=n.select.selectedIndex-1;u>=0&&(n.select[u].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var u=n.select.selectedIndex+1;u<=n.select.length-1&&(n.select[u].selected=!0)}}],d)}},{key:"unregisterShortcuts",value:function(){var n=this.hot.getShortcutManager(),i=n.getContext("editor");i.removeShortcutsByGroup(M)}}],[{key:"EDITOR_TYPE",get:function(){return c}}]),r}(D.a)}}]);
