(window.webpackJsonp=window.webpackJsonp||[]).push([[287,72],{601:function(I,D,s){var h=s(378),E=s(47);I.exports=function(v,j,p){return p.get&&h(p.get,j,{getter:!0}),p.set&&h(p.set,j,{setter:!0}),E.f(v,j,p)}},618:function(I,D,s){"use strict";var h=s(286),E=s.n(h),v=s(287);D.a=Object(v.a)("layout")},622:function(I,D,s){"use strict";var h=s(286),E=s.n(h),v=s(287);D.a=Object(v.a)("flex")},626:function(I,D,s){"use strict";var h=s(2),E=s(34),v=s.n(E),j=s(51),p=s.n(j),O=s(290),$=s.n(O),L=s(10),B=s.n(L),U=s(4),b=s.n(U),T=s(9),K=s.n(T),V=s(58),_=s.n(V),a=s(78),i=s.n(a),r=s(8),g=s.n(r),W=s(7),A=s.n(W),C=s(12),Q=s.n(C),N=s(13),X=s.n(N),z=s(5),w=s(99),G=s(118);function S(c,n){var o=Object.keys(c);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(c);n&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable})),o.push.apply(o,u)}return o}function J(c){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?S(Object(o),!0).forEach(function(u){Object(h.a)(c,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(o)):S(Object(o)).forEach(function(u){Object.defineProperty(c,u,Object.getOwnPropertyDescriptor(o,u))})}return c}D.a=Object(z.a)(w.a,Object(G.b)("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(n){var o=Object.values(n).includes(!0);this.$emit("input",!o)},deep:!0,immediate:!0}},methods:{watchInput:function(n){var o=this,u=function(F){return F.$watch("hasError",function(l){o.$set(o.errorBag,F._uid,l)},{immediate:!0})},f={_uid:n._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?f.shouldValidate=n.$watch("shouldValidate",function(R){!R||o.errorBag.hasOwnProperty(n._uid)||(f.valid=u(n))}):f.valid=u(n),f},validate:function(){return this.inputs.filter(function(n){return!n.validate(!0)}).length===0},reset:function(){this.inputs.forEach(function(n){return n.reset()}),this.resetErrorBag()},resetErrorBag:function(){var n=this;this.lazyValidation&&setTimeout(function(){n.errorBag={}},0)},resetValidation:function(){this.inputs.forEach(function(n){return n.resetValidation()}),this.resetErrorBag()},register:function(n){this.inputs.push(n),this.watchers.push(this.watchInput(n))},unregister:function(n){var o=this.inputs.find(function(f){return f._uid===n._uid});if(!!o){var u=this.watchers.find(function(f){return f._uid===o._uid});u&&(u.valid(),u.shouldValidate()),this.watchers=this.watchers.filter(function(f){return f._uid!==o._uid}),this.inputs=this.inputs.filter(function(f){return f._uid!==o._uid}),this.$delete(this.errorBag,o._uid)}}},render:function(n){var o=this;return n("form",{staticClass:"v-form",attrs:J({novalidate:!0},this.attrs$),on:{submit:function(f){return o.$emit("submit",f)}}},this.$slots.default)}})},661:function(I,D,s){"use strict";s.r(D);var h=s(165),E=s(250),v=s(87),j=s(596),p=s(248),O=s(589),$=function(){var a=this,i=a._self._c;return i(j.a,{attrs:{persistent:"","no-click-animation":"",scrollable:"","max-width":"1000px",transition:"dialog-bottom-transition"},model:{value:a.dialogPermission,callback:function(g){a.dialogPermission=g},expression:"dialogPermission"}},[i(E.a,{attrs:{loading:a.loadingPermission}},[i(v.c,[i("span",{staticClass:"subtitle-2"},[a._v(`
        `+a._s(a.dialogTitle)+`
      `)]),a._v(" "),i(O.a),a._v(" "),i(h.a,{attrs:{color:"red darken-1",dark:"",icon:"",small:""},on:{click:a.closeDialogPermission}},[i(p.a,[a._v("mdi-close-circle")])],1)],1),a._v(" "),i(v.b,[i("div",[i("LazyMasterPermissionList",{ref:"childDetails"})],1)]),a._v(" "),i(v.a,[a.canAddData?i(h.a,{staticClass:"white--text",attrs:{small:"",color:"orange darken-1"},on:{click:function(g){return a.$refs.childDetails.addLine()}}},[a._v(`
        Add Line
      `)]):a._e(),a._v(" "),i(O.a),a._v(" "),a.canAddData?i(h.a,{attrs:{color:"green darken-1",dark:"",small:"",loading:a.loadingPermission},on:{click:function(g){return a.saveRolePermission()}}},[a._v(`
        Save
      `)]):a._e()],1)],1)],1)},L=[],B=s(4),U={name:"DialogPermission",data:function(){return{loadingPermission:!1,dialogPermission:!1,dialogTitle:"",role:"",userRole:[],form:{},canAddData:!1,type:""}},mounted:function(){this.getPermissionList()},methods:{getPermissionList:function(){var a=this;this.$axios.get("/api/master/permissions").then(function(i){a.$auth.$storage.setState("permission_list",i.data.simple)})},openDialogPermission:function(a,i){this.dialogTitle=i,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},a),this.canAddData=!0,this.getPermissionUser(a),this.type="user"},getPermissionUser:function(a){var i=this;this.userRole=null,this.$axios.get("/api/master/user/permission",{params:{form:a}}).then(function(r){i.$refs.childDetails.setDataToDetails(r.data.data)}).finally(function(r){i.loadingPermission=!1})},closeDialogPermission:function(){this.dialogPermission=!1,this.userRole=[],this.canAddData=!1},openRolePermissions:function(a,i,r){var g=this,W=this;this.type=r,this.dialogTitle=i,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},a);var A="";r==="user"?A="/api/master/user/roles":(this.canAddData=!0,A="/api/master/permission-role"),this.$axios.get(A,{params:{form:this.form}}).then(function(C){W.$refs.childDetails.setDataToDetails(C.data.data),g.loadingPermission=!1}).finally(function(C){g.loadingPermission=!1})},changeTab:function(a){var i=this;this.loadingPermission=!0,this.$axios.post("/api/master/permission-role",{form:a}).then(function(r){i.$refs.childDetails.setDataToDetails(r.data.data)}).finally(function(r){i.loadingPermission=!1})},getRolePermissionUser:function(a){var i=this;this.$axios.post("/api/master/user/role-permission",{item:a}).then(function(r){i.$refs.childDetails.setDataToDetails(r.data.data)}).finally(function(r){i.loadingPermission=!1})},getPermissionRole:function(a){var i=this;this.$axios.post("/api/master/permission-role",{form:this.form}).then(function(r){i.$refs.childDetails.setDataToDetails(r.data.data)}).finally(function(r){i.loadingPermission=!1})},saveRolePermission:function(){var a=this;this.loadingPermission=!0;var i=this.$refs.childDetails.getAddData(),r="";this.type==="user"?r="/api/master/user/permission":r="/api/master/permission-role",this.$axios.post(r,{details:i,form:this.form}).then(function(g){a.$swal({icon:"success",title:"Success",text:g.data.message}),a.type==="user"?a.getPermissionUser(a.form):a.getPermissionRole(a.form)}).catch(function(g){a.$swal({icon:"error",title:"Error",text:g.response.data.message})}).finally(function(g){a.loadingPermission=!1})}}},b=U,T=s(50),K=Object(T.a)(b,$,L,!1,null,null,null),V=D.default=K.exports},943:function(I,D,s){"use strict";s.r(D);var h=s(165),E=s(250),v=s(87),j=s(911),p=s(596),O=s(622),$=s(626),L=s(248),B=s(618),U=s(249),b=s(166),T=s(31),K=s(578),V=s(589),_=s(575),a=s(21),i=s(270),r=s(27),g=s(7),W=s(46),A=function(){var t=this,e=t._self._c;return e(B.a,[e(O.a,{attrs:{sm12:"",md12:""}},[e("div",{staticClass:"mt-0"},[e(j.a,{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,headers:t.headers,items:t.allData,"items-per-page":20,options:t.options,"server-items-length":t.totalData,loading:t.loading,"show-select":"",dense:"","fixed-header":"",height:"70vh","footer-props":{"items-per-page-options":[20,50,100,-1]}},on:{"update:options":function(m){t.options=m}},scopedSlots:t._u([{key:"top",fn:function(){return[e("div",{staticClass:"pl-4 pt-2"},[e("span",{staticClass:"font-weight-medium text-h6"},[t._v("Master Roles")])]),t._v(" "),e("LazyMainToolbar",{attrs:{"document-status":t.documentStatus,"search-status":t.searchStatus,"item-search":t.itemSearch,"search-item":t.searchItem,search:t.search,filter:!1,title:"Roles","title-button":"Roles","show-back-link":"","show-new-data":"","show-batch-action":"","new-data-text":"New Role"},on:{emitData:t.emitData,newData:t.newData,getDataFromApi:t.getDataFromApi}})]},proxy:!0},{key:"item.ACTIONS",fn:function(m){var P=m.item;return[e(h.a,{staticClass:"font-weight-bold text-right",attrs:{color:"secondary",text:"",small:""},on:{click:function(y){return t.actions(t.itemAction,P)}}},[t._v(`
            `+t._s(t.itemText)+`
          `)]),t._v(" "),e(K.a,{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(y){var x=y.on,H=y.attrs;return[e(h.a,t._g(t._b({attrs:{icon:""}},"v-btn",H,!1),x),[e(L.a,[t._v("mdi-menu-down")])],1)]}}],null,!0)},[t._v(" "),e(U.a,{attrs:{outlined:""}},t._l(t.items,function(M,y){return e(b.a,{key:y,on:{click:function(H){return t.actions(M.action,P)}}},[e(T.b,[e(T.d,[t._v(t._s(M.text))])],1)],1)}),1)],1)]}}],null,!0)})],1)]),t._v(" "),e(p.a,{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog,callback:function(m){t.dialog=m},expression:"dialog"}},[e(E.a,[e(v.c,[e("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),e(v.b,[e($.a,[e(B.a,{attrs:{wrap:""}},[t.message?e(O.a,{attrs:{xs12:""}},[e("div",{staticClass:"red darken-2 text-xs-center"},[e("span",{staticClass:"white--text"},[t._v(t._s(t.message))])])]):t._e(),t._v(" "),e(O.a,{staticClass:"d-flex",attrs:{md12:""}},[e(B.a,{attrs:{wrap:""}},[e(O.a,{staticClass:"pa-2",attrs:{md12:""}},[e(_.a,{attrs:{label:"Role Name",placeholder:"Role Name",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.name,callback:function(m){t.$set(t.form,"name",m)},expression:"form.name"}})],1),t._v(" "),e(O.a,{staticClass:"pa-2",attrs:{md12:""}},[e(_.a,{attrs:{label:"Description",placeholder:"Description",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.description,callback:function(m){t.$set(t.form,"description",m)},expression:"form.description"}})],1)],1)],1)],1)],1)],1),t._v(" "),e(v.a,[e(V.a),t._v(" "),e(h.a,{attrs:{color:"red darken-1",text:"",small:""},on:{click:function(m){t.dialog=!1}}},[t._v(`
          Close
        `)]),t._v(" "),e(h.a,{attrs:{color:"green darken-1",dark:"",small:"",loading:t.submitLoad},on:{click:function(m){return t.save()}}},[t._v(`
          Save
        `)])],1)],1)],1),t._v(" "),e("MasterDialogPermission",{ref:"dialogPermission"})],1)},C=[],Q=s(8),N=s(10),X=s(4),z=s(12),w=s(9),G=s(13),S=s(2),J=s(58);function c(l,t){var e=Object.keys(l);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(l);t&&(d=d.filter(function(m){return Object.getOwnPropertyDescriptor(l,m).enumerable})),e.push.apply(e,d)}return e}function n(l){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?c(Object(e),!0).forEach(function(d){Object(S.a)(l,d,e[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach(function(d){Object.defineProperty(l,d,Object.getOwnPropertyDescriptor(e,d))})}return l}var o={name:"MasterRole",data:function(){return{totalData:0,editedIndex:-1,loadNewBtn:!1,submitLoad:!1,dialogWindow:!1,statusProcessing:"insert",dialog:!1,message:!1,loading:!0,insertDivision:!0,insert:!0,items:[{text:"Edit",action:"edit"},{text:"Direct Permissions",action:"permissions"}],itemText:"",itemAction:"",documentStatus:[],itemSearch:[],searchStatus:"",searchItem:"",search:"",loadingPermission:!0,allData:[],department:{},form:{id:null,name:null,description:null},defaultItem:{id:null,name:null,description:null},url:"/api/master/roles",options:{},optionDivision:{},headers:[{text:"Role Name",value:"name"},{text:"Description",value:"description"},{text:"Guard",value:"guard_name"},{text:"Action",value:"ACTIONS",align:"center"}]}},head:function(){return{title:"Master Roles"}},computed:{formTitle:function(){return this.editedIndex===-1?"New":"Edit"}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},activated:function(){this.getDataFromApi(),this.itemText=this.items[0].text,this.itemAction=this.items[0].action},methods:{actions:function(t,e){t==="edit"?this.editItem(e):this.$refs.dialogPermission.openRolePermissions(e,"Role Permissions","role")},emitData:function(t){this.documentStatus=t.documentStatus,this.itemSearch=t.itemSearch,this.searchStatus=t.searchStatus,this.searchItem=t.searchItem,this.search=t.search,this.filters=t.filters,this.getDataFromApi()},getDataFromApi:function(){var t=this;this.loading=!0;var e=this,d={searchItem:e.searchItem,documentStatus:e.documentStatus,searchStatus:e.searchStatus,search:e.search};this.$axios.get(this.url,{params:n(n({},e.options),d)}).then(function(m){t.loading=!1,t.allData=m.data.data,t.totalData=m.data.total}).catch(function(m){t.loading=!1,t.$swal({type:"error",title:"Error",text:m.response.data.message})})},newData:function(){this.dialog=!0,this.statusProcessing="insert",this.form=Object.assign({},this.defaultItem),this.message=!1},editItem:function(t){this.editedIndex=this.allData.indexOf(t),this.form=Object.assign({},t),this.statusProcessing="update",this.dialog=!0,this.insert=!1},close:function(){var t=this;this.dialog=!1,this.statusProcessing="insert",setTimeout(function(){t.form=Object.assign({},t.defaultItem),t.editedIndex=-1},300)},save:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"all",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,d=this,m=this.form,P=this.statusProcessing,M={form:m,status:P};P==="insert"?(this.store("post","/api/master/roles",M,"insert",t),d.submitLoad=!1):P==="update"&&(this.store("put","/api/master/roles/"+this.form.id,M,"update",t),d.submitLoad=!1)},store:function(t,e,d,m){var P=this,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"all",y=this;y.submitLoad=!0,this.$axios({method:t,url:e,data:d}).then(function(x){x.data.status==="Error"?(P.$swal({type:"error",title:"Error",text:x.data.message}),y.submitLoad=!1):(P.dialog=!1,P.message=x.data.message,setTimeout(function(){return P.message=!1},8e3),P.getDataFromApi())}).catch(function(x){P.$swal({type:"error",title:"Error",text:x.response.data.message}),y.submitLoad=!1})}}},u=o,f=s(50),R=Object(f.a)(u,A,C,!1,null,null,null),F=D.default=R.exports;installComponents(R,{MasterDialogPermission:s(661).default})}}]);
