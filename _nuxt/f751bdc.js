(window.webpackJsonp=window.webpackJsonp||[]).push([[64,18,52],{613:function(j,c,i){"use strict";i.r(c);var D=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("v-dialog",{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:e.original,"max-width":e.maxWidth,transition:"dialog-top-transition"},model:{value:e.dialog,callback:function(l){e.dialog=l},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"subtitle-2"},[e._v(e._s(e.dialogTitle))]),e._v(" "),s("v-spacer"),e._v(" "),s("v-btn",{attrs:{icon:"",color:"red",dark:""},on:{click:function(l){return e.closeDialog()}}},[s("v-icon",[e._v("mdi-close-circle")])],1)],1),e._v(" "),s("v-divider"),e._v(" "),s("v-card-text",{staticClass:"pr-0 pl-0"},[e._t("content")],2),e._v(" "),s("v-divider"),e._v(" "),s("v-card-actions",[e._t("addLine"),e._v(" "),s("v-spacer"),e._v(" "),e._t("saveData")],2)],1)],1)},x=[],R={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},C=R,b=i(50),F=i(51),T=i.n(F),y=i(164),P=i(247),v=i(88),f=i(591),g=i(572),V=i(246),$=i(589),h=Object(b.a)(C,D,x,!1,null,null,null),I=c.default=h.exports;T()(h,{VBtn:y.a,VCard:P.a,VCardActions:v.a,VCardText:v.b,VCardTitle:v.c,VDialog:f.a,VDivider:g.a,VIcon:V.a,VSpacer:$.a})},639:function(j,c,i){"use strict";i.r(c);var D=function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("v-dialog",{attrs:{persistent:"","max-width":"1000px",transition:"dialog-bottom-transition"},model:{value:e.dialogPermission,callback:function(l){e.dialogPermission=l},expression:"dialogPermission"}},[s("v-card",{attrs:{loading:e.loadingPermission}},[s("v-card-title",[s("span",{staticClass:"subtitle-2"},[e._v(`
        `+e._s(e.dialogTitle)+`
      `)]),e._v(" "),s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"red darken-1",dark:"",icon:"",small:""},on:{click:e.closeDialogPermission}},[s("v-icon",[e._v("mdi-close-circle")])],1)],1),e._v(" "),s("v-card-text",[s("div",{staticClass:"scroll-container"},[s("LazyMasterPermissionList",{ref:"childDetails"})],1)]),e._v(" "),s("v-card-actions",[e.canAddData?s("v-btn",{staticClass:"white--text",attrs:{small:"",color:"orange darken-1"},on:{click:function(l){return e.$refs.childDetails.addLine()}}},[e._v(`
        Add Line
      `)]):e._e(),e._v(" "),s("v-spacer"),e._v(" "),e.canAddData?s("v-btn",{attrs:{color:"green darken-1",dark:"",small:"",loading:e.loadingPermission},on:{click:function(l){return e.saveRolePermission()}}},[e._v(`
        Save
      `)]):e._e()],1)],1)],1)},x=[],R=i(4),C={name:"DialogPermission",data:function(){return{loadingPermission:!1,dialogPermission:!1,dialogTitle:"",role:"",userRole:[],form:{},canAddData:!1,type:""}},mounted:function(){this.getPermissionList()},methods:{getPermissionList:function(){var n=this;this.$axios.get("/api/master/permissions").then(function(s){n.$auth.$storage.setLocalStorage("permission_list",s.data.data.simple)})},openDialogPermission:function(n,s){this.dialogTitle=s,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},n),this.canAddData=!0,this.getPermissionUser(n),this.type="user"},getPermissionUser:function(n){var s=this;this.userRole=null,this.$axios.get("/api/master/user/permission",{params:{form:n}}).then(function(l){s.$refs.childDetails.setDataToDetails(l.data.data.rows)}).finally(function(l){s.loadingPermission=!1})},closeDialogPermission:function(){this.dialogPermission=!1,this.userRole=[],this.canAddData=!1},openRolePermissions:function(n,s,l){var m=this,L=this;this.type=l,this.dialogTitle=s,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},n);var S="";l==="user"?S="/api/master/user/roles":(this.canAddData=!0,S="/api/master/permission-role"),this.$axios.get(S,{params:{form:this.form}}).then(function(p){L.$refs.childDetails.setDataToDetails(p.data.data.rows),m.loadingPermission=!1}).finally(function(p){m.loadingPermission=!1})},changeTab:function(n){var s=this;this.loadingPermission=!0,this.$axios.post("/api/master/permission-role",{form:n}).then(function(l){s.$refs.childDetails.setDataToDetails(l.data.data.rows)}).finally(function(l){s.loadingPermission=!1})},getRolePermissionUser:function(n){var s=this;this.$axios.post("/api/master/user/role-permission",{item:n}).then(function(l){s.$refs.childDetails.setDataToDetails(l.data.data.rows)}).finally(function(l){s.loadingPermission=!1})},getPermissionRole:function(n){var s=this;this.$axios.post("/api/master/permission-role",{form:this.form}).then(function(l){s.$refs.childDetails.setDataToDetails(l.data.data.rows)}).finally(function(l){s.loadingPermission=!1})},saveRolePermission:function(){var n=this;this.loadingPermission=!0;var s=this.$refs.childDetails.getAddData(),l="";this.type==="user"?l="/api/master/user/permission":l="/api/master/permission-role",this.$axios.post(l,{details:s,form:this.form}).then(function(m){n.$swal({icon:"success",title:"Success",text:m.data.message}),n.type==="user"?n.getPermissionUser(n.form):n.getPermissionRole(n.form)}).catch(function(m){n.$swal({icon:"error",title:"Error",text:m.response.data.message})}).finally(function(m){n.loadingPermission=!1})}}},b=C,F=i(50),T=i(51),y=i.n(T),P=i(164),v=i(247),f=i(88),g=i(591),V=i(246),$=i(589),h=Object(F.a)(b,D,x,!1,null,null,null),I=c.default=h.exports;y()(h,{VBtn:P.a,VCard:v.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VDialog:g.a,VIcon:V.a,VSpacer:$.a})},896:function(j,c,i){"use strict";i.r(c);var D=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("v-layout",[a("v-flex",{attrs:{sm12:""}},[a("div",{staticClass:"mt-0"},[a("v-skeleton-loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mx-auto",attrs:{type:"table"}}),t._v(" "),a("v-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,headers:t.headers,items:t.allData,"items-per-page":20,options:t.options,"server-items-length":t.totalData,loading:t.loading,dense:"","footer-props":{"items-per-page-options":[20,50,100,-1]}},on:{"update:options":function(r){t.options=r}},scopedSlots:t._u([{key:"top",fn:function(){return[a("LazyMainToolbar",{staticClass:"has-border-bottom",attrs:{"document-status":t.documentStatus,"search-status":t.searchStatus,"item-search":t.itemSearch,"search-item":t.searchItem,search:t.search,filter:!1,title:"Users","title-button":"User"},on:{emitData:t.emitData,newData:t.newData}})]},proxy:!0},{key:"item.Action",fn:function(r){var u=r.item;return[a("v-btn",{attrs:{value:"left",small:"",icon:""},on:{click:function(d){return t.editItem(u)}}},[a("v-icon",{attrs:{left:""}},[t._v(`
              mdi-pencil-circle
            `)])],1),t._v(" "),a("v-btn",{attrs:{value:"center",small:"",icon:""},on:{click:function(d){return t.copyItem(u)}}},[a("v-icon",{attrs:{left:""}},[t._v(`
              mdi-content-copy
            `)])],1),t._v(" "),a("v-btn",{attrs:{value:"right",small:"",icon:""},on:{click:function(d){return t.$refs.dialogPermission.openDialogPermission(u,"Direct Permissions")}}},[a("v-icon",{attrs:{left:""}},[t._v(`
              mdi-playlist-edit
            `)])],1)]}}],null,!0)})],1)]),t._v(" "),a("DialogForm",{ref:"dialogForm",attrs:{"max-width":"600px","dialog-title":t.formTitle,"button-title":"Save"},scopedSlots:t._u([{key:"content",fn:function(){return[a("v-form",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"d-flex",attrs:{md12:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Name",placeholder:"Name",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.form.name,callback:function(r){t.$set(t.form,"name",r)},expression:"form.name"}})],1),t._v(" "),a("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Username",placeholder:"Username",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.form.username,callback:function(r){t.$set(t.form,"username",r)},expression:"form.username"}})],1),t._v(" "),a("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"E-mail",placeholder:"E-mail",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.form.email,callback:function(r){t.$set(t.form,"email",r)},expression:"form.email"}})],1),t._v(" "),a("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:t.itemRole,chips:"","deletable-chips":"","hide-no-data":"","small-chips":"",label:"Role",multiple:"",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.role,callback:function(r){t.$set(t.form,"role",r)},expression:"form.role"}})],1),t._v(" "),a("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[a("v-select",{attrs:{items:t.itemEntity,"hide-no-data":"",label:"Company",outlined:"",dense:"","item-text":"name","item-value":"id","hide-details":"auto",clearable:""},model:{value:t.form.entity_id,callback:function(r){t.$set(t.form,"entity_id",r)},expression:"form.entity_id"}})],1),t._v(" "),a("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[a("v-switch",{attrs:{inset:"",label:"Enabled"},model:{value:t.form.enabled,callback:function(r){t.$set(t.form,"enabled",r)},expression:"form.enabled"}})],1)],1)],1)],1)],1)]},proxy:!0},{key:"saveData",fn:function(){return[a("v-btn",{attrs:{color:"green darken-1",small:"",dark:"",loading:t.submitLoad},on:{click:function(r){return t.save()}}},[t._v(`
        Save
      `)])]},proxy:!0}])}),t._v(" "),a("MasterDialogPermission",{ref:"dialogPermission"})],1)},x=[],R=i(59),C=i(21),b=i(283),F=i(9),T=i(4),y={name:"MasterUser",layout:"dashboard",data:function(){return{totalData:0,editedIndex:-1,loadNewBtn:!1,submitLoad:!1,statusProcessing:"insert",show:!1,dialog:!1,message:!1,loading:!0,loadingSync:!1,searchItem:"",searchRole:"",search:"",searchStatus:"",allData:[],itemRole:[],itemEntity:[],itemSearch:[],documentStatus:[],options:{},sub_id:{},url:"",form:{},defaultForm:{},headers:[{text:"Username",value:"username"},{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Enabled",value:"enabled"},{text:"Role",value:"role"},{text:"Action",value:"Action",align:"end"}]}},head:function(){return{title:"Master Users"}},computed:{formTitle:function(){return this.editedIndex===-1?"New User":"Edit User"}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},mounted:function(){var o=this;setTimeout(function(){o.refreshData()},500)},methods:{emitData:function(o){this.documentStatus=o.documentStatus,this.itemSearch=o.itemSearch,this.searchStatus=o.searchStatus,this.searchItem=o.searchItem,this.search=o.search,this.filters=o.filters,this.getDataFromApi()},refreshData:function(){this.getDataFromApi(),this.getRole(),this.getEntity()},getRole:function(){var o=this;this.$axios.get("/api/master/roles").then(function(a){o.itemRole=a.data.data.simple}).catch(function(a){o.$swal({type:"error",title:"Error",text:a.response.data.message})})},getEntity:function(){var o=this;this.$axios.get("/api/entities").then(function(a){o.itemEntity=a.data.data.rows}).catch(function(a){o.$swal({type:"error",title:"Error",text:a.response.data.message})})},getDataFromApi:function(){var o=this;this.loading=!0;var a=this;this.$axios.get("/api/master/users",{params:{options:a.options,searchItem:a.searchItem,documentStatus:a.documentStatus,searchStatus:a.searchStatus,search:a.search}}).then(function(r){o.loading=!1,o.allData=r.data.data.rows,o.totalData=r.data.data.total,o.itemSearch=r.data.data.filter,o.form=Object.assign({},r.data.data.form),o.defaultForm=Object.assign({},r.data.data.form)}).catch(function(r){o.loading=!1,o.$swal({type:"error",title:"Error",text:r.response.data.message})})},newData:function(){var o=this;this.$refs.dialogForm.openDialog(),setTimeout(function(){o.form=Object.assign({},o.defaultForm),o.editedIndex=-1},300),this.statusProcessing="insert"},editItem:function(o){var a=o;a.role=JSON.parse(a.role),this.statusProcessing="update",this.editedIndex=this.allData.indexOf(o),this.form=Object.assign({},a),this.$refs.dialogForm.openDialog(),this.insert=!1},copyItem:function(o){var a=o;a.role=JSON.parse(a.role),this.statusProcessing="copy",this.editedIndex=this.allData.indexOf(o),this.form=Object.assign({},a),this.$refs.dialogForm.openDialog(),this.insert=!1},close:function(){var o=this;this.statusProcessing="insert",this.dialog=!1,setTimeout(function(){o.form=Object.assign({},o.defaultForm),o.editedIndex=-1},300)},save:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"all",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=this,u=this.form,d=this.statusProcessing;r.submitLoad=!0,d==="insert"?this.store("post","/api/master/users",u,"insert",o):d==="copy"?this.store("post","/api/master/users",u,"insert",o):d==="update"&&this.store("put","/api/master/users/"+this.form.id,u,"update",o)},store:function(o,a,r,u){var d=this,O=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"all",A=this;A.submitLoad=!0,this.$axios({method:o,url:a,data:r}).then(function(E){d.dialog=!1,d.$swal({type:"success",title:"Success!",text:E.data.message}),d.$refs.dialogForm.closeDialog(),d.getDataFromApi(),A.submitLoad=!1}).catch(function(E){d.$swal({type:"error",title:"Error",text:E.response.data.message}),A.submitLoad=!1})}}},P=y,v=i(50),f=i(51),g=i.n(f),V=i(643),$=i(164),h=i(1018),I=i(617),e=i(612),n=i(246),s=i(615),l=i(637),m=i(587),L=i(1e3),S=i(570),p=Object(v.a)(P,D,x,!1,null,null,null),U=c.default=p.exports;g()(p,{DialogForm:i(613).default,MasterDialogPermission:i(639).default}),g()(p,{VAutocomplete:V.a,VBtn:$.a,VDataTable:h.a,VFlex:I.a,VForm:e.a,VIcon:n.a,VLayout:s.a,VSelect:l.a,VSkeletonLoader:m.a,VSwitch:L.a,VTextField:S.a})}}]);
