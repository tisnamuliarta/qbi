(window.webpackJsonp=window.webpackJsonp||[]).push([[86,7,17,23,31],{1128:function(ct,W,t){"use strict";t.r(W);var N=function(){var l=this,i=l._self._c;return i("div",{staticClass:"scroll-container-min",attrs:{id:"parentContainer"}},[i("hot-table",{ref:"details",attrs:{root:l.detailsRoot,settings:l.settings}}),l._v(" "),i("LazyInventoryDialogResource",{ref:"dialogResource",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:l.selectItems}}),l._v(" "),i("LazyInventoryDialogItem",{ref:"dialogItem",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:l.selectItems}}),l._v(" "),i("AccountingDialogAccount",{ref:"dialogAccount",on:{selectItems:l.selectAccount}})],1)},q=[],G=t(24),$=t(17),U=t(74),ut=t(4),ot=t(10),rt=t(7),Y=t(46),Q=t(27),st=t(654),K=t(690),X=t(1164),L=t(895),S=t(1158),M=t(1161),B=t(711),b=t(671),I=t(778),H=t(896),R=t(913),tt=t(1166),it=t(1162),dt=t(1163),nt=t(898),at=t(687),ft=t(713),F=t(656);Object(K.c)(X.a),Object(K.c)(L.a),Object(K.c)(S.a),Object(K.c)(M.a),Object(B.c)(b.a),Object(I.d)(H.a),Object(I.d)(R.a),Object(I.d)(tt.a),Object(I.d)(it.a),Object(I.d)(dt.a),Object(I.d)(nt.a),Object(I.d)(at.a),Object(ft.c)("ButtonAddAccountRenderer",function(h,l,i,f,p,E,D){var C=null,P=window.detailProduction;if(P.form.status!=="closed"&&P.form.status!=="cancel")return C=document.createElement("button"),C.type="button",C.innerHTML='<span class="mdi mdi-arrow-right-bold"></span>',C.className="btnNPB",C.value="Details",C.addEventListener("mousedown",function(v){v.preventDefault(),P.$refs.dialogAccount.openDialog(i)}),l.innerText="",l.appendChild(C),l});var J=function(l,i){i.row===-1&&l.target.nodeName==="TD"&&(l.stopImmediatePropagation(),l.stopPropagation(),this.deselectCell())},et={name:"TableDetailProduction",components:{HotTable:st.a},data:function(){return{commissionRate:1,plannedQty:1,settings:{licenseKey:"non-commercial-and-evaluation",currentRowClassName:"currentRow",currentColClassName:"currentCol",startRows:1,rowHeaders:!0,manualColumnResize:!0,rowHeights:28,viewportRowRenderingOffset:1e3,viewportColumnRenderingOffset:100,colWidths:80,persistentState:!0,width:"100%",height:"auto",stretchH:"all",hiddenColumns:{copyPasteEnabled:!1,indicator:!1,columns:[0,1,2]},beforeOnCellMouseDown:J,colHeaders:["Id","Base ID","account ID","Type","","Item Code","Description","Qty","Units","Unit Price","Warehouse","Amount",""],columns:[{data:"id",wordWrap:!1},{data:"item_id",width:150,readOnly:!0,wordWrap:!1},{data:"account_id",width:150,readOnly:!0,wordWrap:!1},{data:"item_type",width:60,height:26,wordWrap:!1,editor:"select",selectOptions:["item","resource"],visibleRows:5,strict:!0,filter:!1,allowInvalid:!1},{width:20,wordWrap:!1,renderer:function(i,f,p,E,D,C,P){var v=null,T=window.detailProduction;if(T.form.status==="planned")return v=document.createElement("button"),v.type="button",v.innerHTML='<span class="mdi mdi-arrow-right-bold"></span>',v.className="btnNPB",v.value="Details",v.addEventListener("mousedown",function(x){x.preventDefault();var w=T.$refs.details.hotInstance.getDataAtRowProp(p,"item_type");w||T.$swal({type:"error",title:"Error",text:"Please select item type first!"}),w==="item"?T.$refs.dialogItem.openDialog(p,T.form.warehouse_id):w==="resource"&&T.$refs.dialogResource.openDialog(p)}),f.innerText="",f.appendChild(v),f}},{data:"item_code",width:120,readOnly:!0,wordWrap:!1},{data:"narration",width:250,wordWrap:!1},{data:"base_qty",width:80,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"unit",className:"htCenter",width:60,readOnly:!0,wordWrap:!1},{data:"amount",width:100,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"whs_code",width:100,height:26,wordWrap:!1,editor:"select",className:"htCenter",selectOptions:function(){var i=window.detailProduction;return i.$auth.$storage.getState("warehouse")},visibleRows:5,strict:!0,filter:!1,allowInvalid:!1},{data:"sub_total",width:100,wordWrap:!1,type:"numeric",readOnly:!0,numericFormat:{pattern:"0,0.00"}},{width:20,wordWrap:!1,renderer:function(i,f,p,E,D,C,P){var v=null,T=window.detailProduction;return T.form.status==="planned"&&(v=document.createElement("button"),v.type="button",v.innerHTML='<span class="mdi mdi-delete"></span>',v.className="btnDelete",v.value="Details2",v.addEventListener("mousedown",function(x){x.preventDefault(),T.removeRow(p)}),f.innerText="",f.appendChild(v)),f}}]},detailsRoot:"detailsRoot",colHeaders:[],form:{}}},created:function(){this.setInstance()},methods:{setInstance:function(){window.detailProduction=this},removeRow:function(l){this.$refs.details.hotInstance.alter("remove_row",l)},addLine:function(){var l=this.$refs.details.hotInstance.countRows();this.$refs.details.hotInstance.alter("insert_row",l+1,1),this.$refs.details.hotInstance.setDataAtRowProp([[l,"item_type","item","edit"]])},updateTableSettings:function(l){var i=this;this.$refs.details.hotInstance.batch(function(){i.$refs.details.hotInstance.updateSettings({licenseKey:"non-commercial-and-evaluation",height:"auto",beforeRefreshDimensions:function(){return!1},beforeOnCellMouseDown:J,afterRemoveRow:function(p,E,D,C){var P=window.detailProduction;P.calculateTotal()},beforeRemoveRow:function(p,E,D,C){var P=window.detailProduction,v=[];D.forEach(function(x,w){var A=P.$refs.details.hotInstance.getDataAtCell(x,0);A&&v.push(A)});var T=P.$refs.details.hotInstance.countRows();return T===1&&P.$emit("calcTotal",{subTotal:0,amount:0,discountAmount:0,taxDetail:[]}),v.length>0&&P.$emit("removeData",{id:v}),!0},afterChange:function(p,E){var D=window.detailProduction;if(p){var C=0,P,v=[];if(p.forEach(function(yt){var lt=Object($.a)(yt,4),Ct=lt[0],Et=lt[1],Ot=lt[2],Dt=lt[3];if(C=Et,C==="base_qty"||C==="amount"){var Lt=D.$refs.details.hotInstance.getDataAtCell(Ct,7),At=Lt||0,jt=D.$refs.details.hotInstance.getDataAtCell(Ct,9),Tt=jt||0,Z=At*Tt,pt=[Ct,Et,Ot,Dt,Z];Ot!==Dt&&(P=p[0][0],v.push(pt))}}),C==="base_qty"||C==="amount"){for(var T=[],x=0,w=!1,A=0,_t=v.length;A<_t;A++){var vt=v[A][0];vt!=="10"&&(w=!0,P===vt?x=x+1:(P=vt,x=0),x===1&&T.push(v[A]))}if(w)for(var It=0,Rt=T.length;It<Rt;It++)D.calculateTotal()}}}})})},selectItems:function(l){var i=l.row,f=l.selected,p=this;this.$refs.details.hotInstance.batch(function(){f.forEach(function(E,D){var C=E.description?E.description:E.name,P=E.resource_type===void 0?"item":"resource",v=P==="item"?E.purchase_price:0;p.$refs.details.hotInstance.setDataAtRowProp([[i,"item_type",P,"edit"],[i,"amount",v,"edit"],[i,"item_code",E.code,"edit"],[i,"item_id",E.id,"edit"],[i,"unit",E.unit,"edit"],[i,"whs_code",E.whs_code,"edit"],[i,"narration",C,"edit"],[i,"base_qty",1,"edit"]]),i++})})},selectAccount:function(l){var i=l.row,f=l.selected;this.$refs.details.hotInstance.setDataAtRowProp(i,"account_id",f[0].id),this.$refs.details.hotInstance.setDataAtRowProp(i,"account_code",f[0].code)},setDataToDetails:function(l,i){var f=this,p=this;this.form=i,this.$refs.details.hotInstance.batch(function(){f.updateTableSettings();var E=i.line_items.length>0?i.line_items:l;p.$refs.details.hotInstance.loadData(E),f.$nuxt.$loading.finish()})},setCommission:function(l){var i=this;this.$refs.details.hotInstance.batch(function(){i.commissionRate=l,i.calculateTotal()})},setQty:function(l){var i=this;this.$refs.details.hotInstance.batch(function(){i.plannedQty=l,i.calculateTotal()})},calculateTotal:function(){var l=this,i=this.$refs.details.hotInstance.countRows(),f=0,p=0,E=0,D=0;i>0&&this.$refs.details.hotInstance.batch(function(){l.$refs.details.hotInstance.suspendExecution();for(var C=0;C<i;C++){var P=l.$refs.details.hotInstance.getDataAtRowProp(C,"item_type");P==="resource"&&D++}for(var v=0;v<i;v++){var T=l.$refs.details.hotInstance.getDataAtRowProp(v,"item_type"),x=l.$refs.details.hotInstance.getDataAtRowProp(v,"item_code"),w=0,A=0;T==="resource"?(x?(w=parseFloat(l.plannedQty/D),A=parseFloat(l.commissionRate/D),l.$refs.details.hotInstance.setDataAtCell([[v,7,w,"edit"],[v,9,A,"edit"]])):(w=l.$refs.details.hotInstance.getDataAtRowProp(v,"base_qty"),A=l.$refs.details.hotInstance.getDataAtRowProp(v,"amount")),E=E+w*A):(w=l.$refs.details.hotInstance.getDataAtRowProp(v,"base_qty"),A=l.$refs.details.hotInstance.getDataAtRowProp(v,"amount"),p=p+w*A);var _t=w*A;f=f+w*A,l.$refs.details.hotInstance.setDataAtRowProp([[v,"sub_total",_t,"edit"]])}l.$refs.details.hotInstance.resumeExecution()}),this.$emit("calcTotal",{subTotal:f,productCost:p,componentCost:E})},getTaxRate:function(l){var i=this;return Object(G.a)(regeneratorRuntime.mark(function f(){var p;return regeneratorRuntime.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,i.$axios.get("/api/financial/taxes/0",{params:{name:l}});case 2:return p=D.sent,D.abrupt("return",p.data.data.rows);case 4:case"end":return D.stop()}},f)}))()},getDataAtRowPro:function(l,i){return this.$refs.details.hotInstance.getDataAtRowProp(l,i)},countRows:function(){return this.$refs.details.hotInstance.countRows()},checkIfEmptyRow:function(l){return this.$refs.details.hotInstance.isEmptyRow(l)},getAddData:function(l){if(l==="0")for(var i=this.$refs.details.hotInstance.countRows(),f=0;f<i;f++)this.$refs.details.hotInstance.setDataAtRowProp(f,"id",null);return this.$refs.details.hotInstance.getSourceData()}}},mt=et,O=t(50),r=Object(O.a)(mt,N,q,!1,null,null,null),u=W.default=r.exports;installComponents(r,{AccountingDialogAccount:t(667).default})},599:function(ct,W,t){"use strict";var N=t(7),q=t.n(N),G=t(9),$=t.n(G),U=t(12),ut=t.n(U),ot=t(13),rt=t.n(ot),Y=t(2),Q=t(4),st=t.n(Q),K=t(33),X=t.n(K),L=t(52),S=t.n(L),M=t(28),B=t.n(M),b=t(8),I=t.n(b),H=t(21),R=t.n(H),tt=t(65),it=t.n(tt),dt=t(269),nt=t.n(dt),at=t(32),ft=t.n(at),F=t(270),J=t.n(F),et=t(271),mt=t.n(et),O=t(272),r=t.n(O),u=t(273),h=t.n(u),l=t(274),i=t.n(l),f=t(275),p=t.n(f),E=t(276),D=t.n(E),C=t(277),P=t.n(C),v=t(278),T=t.n(v),x=t(279),w=t.n(x),A=t(280),_t=t.n(A),vt=t(281),It=t.n(vt),Rt=t(282),yt=t.n(Rt),lt=t(34),Ct=t.n(lt),Et=t(10),Ot=t.n(Et),Dt=t(283),Lt=t.n(Dt),At=t(3),jt=t(78),Tt=t(1);function Z(o,n){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);n&&(e=e.filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable})),a.push.apply(a,e)}return a}function pt(o){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Z(Object(a),!0).forEach(function(e){Object(Y.a)(o,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}var Vt=["sm","md","lg","xl"],gt=["start","end","center"];function St(o,n){return Vt.reduce(function(a,e){return a[o+Object(Tt.I)(e)]=n(),a},{})}var xt=function(n){return[].concat(gt,["baseline","stretch"]).includes(n)},Mt=St("align",function(){return{type:String,default:null,validator:xt}}),Wt=function(n){return[].concat(gt,["space-between","space-around"]).includes(n)},k=St("justify",function(){return{type:String,default:null,validator:Wt}}),ht=function(n){return[].concat(gt,["space-between","space-around","stretch"]).includes(n)},Bt=St("alignContent",function(){return{type:String,default:null,validator:ht}}),bt={align:Object.keys(Mt),justify:Object.keys(k),alignContent:Object.keys(Bt)},Ut={align:"align",justify:"justify",alignContent:"align-content"};function Kt(o,n,a){var e=Ut[o];if(a!=null){if(n){var c=n.replace(o,"");e+="-".concat(c)}return e+="-".concat(a),e.toLowerCase()}}var s=new Map;W.a=At.default.extend({name:"v-row",functional:!0,props:pt(pt(pt({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:xt}},Mt),{},{justify:{type:String,default:null,validator:Wt}},k),{},{alignContent:{type:String,default:null,validator:ht}},Bt),render:function(n,a){var e=a.props,c=a.data,d=a.children,m="";for(var g in e)m+=String(e[g]);var _=s.get(m);return _||function(){var y;_=[];var j;for(j in bt)bt[j].forEach(function(V){var Pt=e[V],z=Kt(j,V,Pt);z&&_.push(z)});_.push((y={"no-gutters":e.noGutters,"row--dense":e.dense},Object(Y.a)(y,"align-".concat(e.align),e.align),Object(Y.a)(y,"justify-".concat(e.justify),e.justify),Object(Y.a)(y,"align-content-".concat(e.alignContent),e.alignContent),y)),s.set(m,_)}(),n(e.tag,Object(jt.a)(c,{staticClass:"row",class:_}),d)}})},600:function(ct,W,t){var N=t(375),q=t(47);ct.exports=function(G,$,U){return U.get&&N(U.get,$,{getter:!0}),U.set&&N(U.set,$,{setter:!0}),q.f(G,$,U)}},601:function(ct,W,t){"use strict";t.r(W);var N=function(){var b=this,I=b._self._c;return I("v-dialog",{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:b.original,"max-width":b.maxWidth,transition:"dialog-top-transition"},model:{value:b.dialog,callback:function(R){b.dialog=R},expression:"dialog"}},[I("v-card",[I("v-card-title",[I("span",{staticClass:"subtitle-2"},[b._v(b._s(b.dialogTitle))]),b._v(" "),I("v-spacer"),b._v(" "),I("v-btn",{attrs:{icon:"",color:"red",dark:""},on:{click:function(R){return b.closeDialog()}}},[I("v-icon",[b._v("mdi-close-circle")])],1)],1),b._v(" "),I("v-divider"),b._v(" "),I("v-card-text",{staticClass:"pr-0 pl-0"},[b._t("content")],2),b._v(" "),I("v-divider"),b._v(" "),I("v-card-actions",[b._t("addLine"),b._v(" "),I("v-spacer"),b._v(" "),b._t("saveData")],2)],1)],1)},q=[],G={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},$=G,U=t(50),ut=t(51),ot=t.n(ut),rt=t(164),Y=t(248),Q=t(88),st=t(595),K=t(576),X=t(247),L=t(593),S=Object(U.a)($,N,q,!1,null,null,null),M=W.default=S.exports;ot()(S,{VBtn:rt.a,VCard:Y.a,VCardActions:Q.a,VCardText:Q.b,VCardTitle:Q.c,VDialog:st.a,VDivider:K.a,VIcon:X.a,VSpacer:L.a})},645:function(ct,W,t){"use strict";t.r(W);var N=t(21),q=t(268),G=function(){var r=this,u=r._self._c;return u("v-row",[u("v-col",{staticClass:"mt-0",attrs:{cols:"12"}},[u("v-data-table",{class:r.viewData?"elevation-0":"elevation-1",attrs:{"mobile-breakpoint":0,headers:r.headers,items:r.allData,loading:r.loading,"single-select":r.viewData,"show-select":"","fixed-header":"",search:r.search,height:r.viewData?"60vh":"70vh",dense:"","footer-props":{"items-per-page-options":[250,500,-1]}},scopedSlots:r._u([{key:"top",fn:function(){return[r.viewData?r._e():u("div",{staticClass:"pl-4 pt-2"},[u("span",{staticClass:"font-weight-medium text-h6"},[r._v(r._s(r.$t("Chart Of Accounts"))+`
            `)])]),r._v(" "),u("LazyMainToolbar",{attrs:{"document-status":r.documentStatus,"search-status":r.searchStatus,"item-search":r.itemSearch,"search-item":r.searchItem,search:r.search,"show-zero-qty":!0,title:"Chart of Accounts","show-batch-action":"","show-new-data":"","show-filter":"","show-search-filter":!1,"new-data-text":"New Account"},on:{emitData:r.emitData,newData:r.newData,getDataFromApi:r.getDataFromApi},scopedSlots:r._u([{key:"search",fn:function(){return[u("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:r.search,callback:function(f){r.search=f},expression:"search"}})]},proxy:!0}])})]},proxy:!0},{key:"item.balance",fn:function(l){var i=l.item;return[r._v(`
          `+r._s(i.currency.currency_code+" "+r.$formatter.formatPrice(i.balance))+`
        `)]}},{key:"item.code",fn:function(l){var i=l.item;return[u("a",{on:{click:function(p){return r.viewItem(i)}}},[u("strong",{domProps:{textContent:r._s(i.code)}})])]}},{key:"item.id",fn:function(l){var i=l.item;return[u("v-btn",{staticClass:"font-weight-bold text-right",attrs:{color:"secondary",text:"",small:""},on:{click:function(p){return r.actions(r.itemAction,i)}}},[r._v(`
            `+r._s(r.itemText)+`
          `)]),r._v(" "),u("v-menu",{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:r._u([{key:"activator",fn:function(p){var E=p.on,D=p.attrs;return[u("v-btn",r._g(r._b({attrs:{color:"black",dark:"",icon:""}},"v-btn",D,!1),E),[u("v-icon",[r._v("mdi-menu-down")])],1)]}}],null,!0)},[r._v(" "),u("v-list",r._l(r.items,function(f,p){return u("v-list-item",{key:p,on:{click:function(D){return r.actions(f.action,i)}}},[u("v-list-item-content",[u("v-list-item-title",[r._v(r._s(f.text))])],1)],1)}),1)],1)]}}],null,!0),model:{value:r.selected,callback:function(l){r.selected=l},expression:"selected"}}),r._v(" "),u("LazyAccountingFormAccount",{ref:"forms",attrs:{"form-data":r.form,"form-title":r.formTitle,"button-title":r.buttonTitle,url:r.url},on:{getDataFromApi:r.getDataFromApi}})],1)],1)},$=[],U=t(8),ut=t(7),ot=t(12),rt=t(10),Y=t(13),Q=t(2),st=t(9),K=t(4);function X(O,r){var u=Object.keys(O);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(O);r&&(h=h.filter(function(l){return Object.getOwnPropertyDescriptor(O,l).enumerable})),u.push.apply(u,h)}return u}function L(O){for(var r=1;r<arguments.length;r++){var u=arguments[r]!=null?arguments[r]:{};r%2?X(Object(u),!0).forEach(function(h){Object(Q.a)(O,h,u[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(u)):X(Object(u)).forEach(function(h){Object.defineProperty(O,h,Object.getOwnPropertyDescriptor(u,h))})}return O}var S={name:"ChartOfAccount",props:{viewData:{type:Boolean,default:!1},formType:{type:String,default:""}},data:function(){return{selected:[],totalData:0,editedIndex:-1,loading:!0,allData:[],documentStatus:[],itemSearch:[],searchStatus:"",searchItem:"",search:"",show_zero_balance:null,form:{},defaultItem:{},options:{},items:[{text:"Edit",action:"edit"},{text:"Delete",action:"delete"}],itemText:"Edit",itemAction:"edit",url:"/api/financial/accounts",headers:[],title:"Chart Of Accounts",formTypeData:null}},head:function(){return{title:this.title}},computed:{formTitle:function(){return this.editedIndex===-1?"New Account":"Edit Account"},buttonTitle:function(){return this.editedIndex===-1?"Save":"Update"}},activated:function(){this.getDataFromApi()},mounted:function(){this.mappingHeader()},methods:{returnSelected:function(){return this.selected},viewItem:function(r){this.$router.push({path:"/app/accounting/detail",query:{id:r.id}})},setEmptyToSelected:function(r){this.selected=[],this.formTypeData=this.$auth.$storage.getState("formType"),this.getDataFromApi()},newData:function(){this.editedIndex=-1,this.$refs.forms.newData(this.form)},actions:function(r,u){r==="edit"?this.editItem(u):this.deleteItem(u)},editItem:function(r){this.editedIndex=this.allData.indexOf(r),this.$refs.forms.editItem(r,this.form)},deleteItem:function(r){var u=this,h=this;this.$swal({title:"Are you sure?",text:"The data will be permanently deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(l){l.value&&u.$axios.delete(h.url+"/"+r.id).then(function(i){u.$swal({type:"success",title:"Success...",text:"Row Deleted!"}),u.getDataFromApi()}).catch(function(i){u.$swal({type:"error",title:"Oops...",text:i.response.data.message})})})},emitData:function(r){this.documentStatus=r.documentStatus,this.itemSearch=r.itemSearch,this.searchStatus=r.searchStatus,this.searchItem=r.searchItem,this.search=r.search,this.filters=r.filters,this.show_zero_balance=r.show_zero_balance,this.getDataFromApi()},mappingHeader:function(){this.viewData?this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name",cellClass:"disable-wrap"},{text:"Account Type",value:"account_type",cellClass:"disable-wrap"},{text:"Category",value:"category.name"}]:this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name"},{text:"Account Type",value:"account_type"},{text:"Category",value:"category.name"},{text:"Balance",value:"balance",cellClass:"disable-wrap",sortable:!1,filterable:!1},{text:"Actions",value:"id",align:"right",cellClass:"disable-wrap",sortable:!1,filterable:!1}]},searchData:function(r){this.search=r.search},getDataFromApi:function(){var r=this;this.loading=!0;var u=this,h="";this.formTypeData==="CS"?h="OPERATING_REVENUE":this.formTypeData==="CP"&&(h="OPERATING_EXPENSE, DIRECT_EXPENSE, OVERHEAD_EXPENSE, OTHER_EXPENSE, NON_CURRENT_ASSET, CURRENT_ASSET, INVENTORY");var l={searchItem:u.searchItem,documentStatus:u.documentStatus,searchStatus:u.searchStatus,search:u.search,show_zero_balance:u.show_zero_balance,type:h};this.$axios.get(this.url,{params:L(L({},u.options),l)}).then(function(i){r.loading=!1;var f=i.data;r.allData=f.data,r.totalData=f.total,r.itemSearch=f.filter,r.form=Object.assign({},f.form),r.defaultItem=Object.assign({},f.form)}).catch(function(i){r.loading=!1,r.$swal({type:"error",title:"Error",text:i.response.data.message})})}}},M=S,B=t(50),b=t(51),I=t.n(b),H=t(164),R=t(585),tt=t(909),it=t(247),dt=t(249),nt=t(165),at=t(35),ft=t(577),F=t(599),J=t(574),et=Object(B.a)(M,G,$,!1,null,null,null),mt=W.default=et.exports;I()(et,{VBtn:H.a,VCol:R.a,VDataTable:tt.a,VIcon:it.a,VList:dt.a,VListItem:nt.a,VListItemContent:at.a,VListItemTitle:at.c,VMenu:ft.a,VRow:F.a,VTextField:J.a})},667:function(ct,W,t){"use strict";t.r(W);var N=function(){var S=this,M=S._self._c;return M("div",[M("DialogForm",{ref:"dialogForm",attrs:{"max-width":"1000px","dialog-title":S.$t("Chart Of Accounts"),"button-title":"Save",original:"top"},scopedSlots:S._u([{key:"content",fn:function(){return[M("v-container",[M("AccountingTableAccount",{ref:"tableItem",attrs:{"view-data":S.viewData,"form-type":S.formType,"show-add-btn":S.showAddBtn}})],1)]},proxy:!0},{key:"saveData",fn:function(){return[M("v-btn",{attrs:{color:"green darken-1",dark:"",small:""},on:{click:S.selectData}},[S._v(`
          Select Item
          `),M("v-icon",[S._v("mdi-arrow-down-right")])],1)]},proxy:!0}])})],1)},q=[],G=t(59),$={name:"DialogItem",props:{viewData:{type:Boolean,default:!0},showAddBtn:{type:Boolean,default:!0},formType:{type:String,default:""}},data:function(){return{row:null}},methods:{openDialog:function(S,M){var B=this;this.$refs.dialogForm.openDialog(),setTimeout(function(){B.$refs.tableItem.setEmptyToSelected(M)},150),this.row=S},selectData:function(){this.$emit("selectItems",{row:this.row,selected:this.$refs.tableItem.returnSelected()}),this.$refs.dialogForm.closeDialog()}}},U=$,ut=t(50),ot=t(51),rt=t.n(ot),Y=t(164),Q=t(586),st=t(247),K=Object(ut.a)(U,N,q,!1,null,null,null),X=W.default=K.exports;rt()(K,{AccountingTableAccount:t(645).default,DialogForm:t(601).default}),rt()(K,{VBtn:Y.a,VContainer:Q.a,VIcon:st.a})},671:function(ct,W,t){"use strict";t.d(W,"a",function(){return O});var N=t(607),q=t(605),G=t(4),$=t(110),U=t(626),ut=t(12),ot=t(7),rt=t(46),Y=t(53),Q=t(212),st=t(32),K=t(34),X=t(872),L=t(606),S=t(602);function M(r){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},M(r)}function B(r,u){if(!(r instanceof u))throw new TypeError("Cannot call a class as a function")}function b(r,u){for(var h=0;h<u.length;h++){var l=u[h];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(r,l.key,l)}}function I(r,u,h){return u&&b(r.prototype,u),h&&b(r,h),Object.defineProperty(r,"prototype",{writable:!1}),r}function H(){return typeof Reflect!="undefined"&&Reflect.get?H=Reflect.get.bind():H=function(u,h,l){var i=R(u,h);if(!!i){var f=Object.getOwnPropertyDescriptor(i,h);return f.get?f.get.call(arguments.length<3?u:l):f.value}},H.apply(this,arguments)}function R(r,u){for(;!Object.prototype.hasOwnProperty.call(r,u)&&(r=F(r),r!==null););return r}function tt(r,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(u&&u.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),u&&it(r,u)}function it(r,u){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,i){return l.__proto__=i,l},it(r,u)}function dt(r){var u=ft();return function(){var l=F(r),i;if(u){var f=F(this).constructor;i=Reflect.construct(l,arguments,f)}else i=l.apply(this,arguments);return nt(this,i)}}function nt(r,u){if(u&&(M(u)==="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return at(r)}function at(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ft(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function F(r){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},F(r)}var J="ht_editor_visible",et="selectEditor",mt="select",O=function(r){tt(h,r);var u=dt(h);function h(){return B(this,h),u.apply(this,arguments)}return I(h,[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),Object(L.a)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(i){this.select.value=i}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="";var i=this.hot.getShortcutManager();i.setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",Object(L.v)(this.select,J)&&Object(L.K)(this.select,J),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var i=this;this.addHook("afterScrollHorizontally",function(){return i.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return i.refreshDimensions()}),this.addHook("afterColumnResize",function(){return i.refreshDimensions()}),this.addHook("afterRowResize",function(){return i.refreshDimensions()})}},{key:"prepare",value:function(i,f,p,E,D,C){var P=this;H(F(h.prototype),"prepare",this).call(this,i,f,p,E,D,C);var v=this.cellProperties.selectOptions,T;typeof v=="function"?T=this.prepareOptions(v(this.row,this.col,this.prop)):T=this.prepareOptions(v),Object(L.e)(this.select),Object(S.o)(T,function(x,w){var A=P.hot.rootDocument.createElement("OPTION");A.value=w,Object(L.f)(A,x),P.select.appendChild(A)})}},{key:"prepareOptions",value:function(i){var f={};if(Array.isArray(i))for(var p=0,E=i.length;p<E;p++)f[i[p]]=i[p];else M(i)==="object"&&(f=i);return f}},{key:"refreshValue",value:function(){var i=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=i,this.setValue(i),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===X.b.EDITING){if(this.TD=this.getEditedCell(),!this.TD){this.close();return}var i=this.getEditedCellRect(),f=i.top,p=i.start,E=i.width,D=i.height,C=this.select.style;C.height="".concat(D,"px"),C.width="".concat(E,"px"),C.top="".concat(f,"px"),C[this.hot.isRtl()?"right":"left"]="".concat(p,"px"),C.margin="0px",Object(L.a)(this.select,J)}}},{key:"registerShortcuts",value:function(){var i=this,f=this.hot.getShortcutManager(),p=f.getContext("editor"),E={group:et};this.isInFullEditMode()!==!1&&p.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var C=i.select.selectedIndex-1;C>=0&&(i.select[C].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var C=i.select.selectedIndex+1;C<=i.select.length-1&&(i.select[C].selected=!0)}}],E)}},{key:"unregisterShortcuts",value:function(){var i=this.hot.getShortcutManager(),f=i.getContext("editor");f.removeShortcutsByGroup(et)}}],[{key:"EDITOR_TYPE",get:function(){return mt}}]),h}(X.a)},687:function(ct,W,t){"use strict";t.d(W,"a",function(){return Kt});var N=t(212),q=t(4),G=t(32),$=t(629),U=t(34),ut=t(36),ot=t(59),rt=t(42),Y=t(637),Q=t(607),st=t(605),K=t(110),X=t(626),L=t(12),S=t(7),M=t(46),B=t(53),b=t(27),I=t(21),H=t(897),R=t(608),tt=t(664),it=t(10),dt=t(80),nt=t(606);function at(s,o){return mt(s)||et(s,o)||F(s,o)||ft()}function ft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(s,o){if(!!s){if(typeof s=="string")return J(s,o);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(s,o)}}function J(s,o){(o==null||o>s.length)&&(o=s.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=s[n];return a}function et(s,o){var n=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var a=[],e=!0,c=!1,d,m;try{for(n=n.call(s);!(e=(d=n.next()).done)&&(a.push(d.value),!(o&&a.length===o));e=!0);}catch(g){c=!0,m=g}finally{try{!e&&n.return!=null&&n.return()}finally{if(c)throw m}}return a}}function mt(s){if(Array.isArray(s))return s}function O(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function r(s,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function u(s,o,n){return o&&r(s.prototype,o),n&&r(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}var h=function(){function s(o){O(this,s),this.hot=o,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}return u(s,[{key:"addRow",value:function(n,a){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={row:n};this.rows.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"addColumnHeadersRow",value:function(n){var a=this.hot.getColHeader(0);if(a!=null){var e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=n,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}},{key:"addColumn",value:function(n,a){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={col:n};this.columns.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(n)!==null&&this.hot.view.appendColHeader(n,this.table.th),this.table.tBody.appendChild(this.createCol(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"getHeights",value:function(n){this.injected||this.injectTable(),Object(R.a)(this.rows,function(a){n(a.row,Object(nt.H)(a.table)-1)})}},{key:"getWidths",value:function(n){this.injected||this.injectTable(),Object(R.a)(this.columns,function(a){var e=a.table.getBoundingClientRect(),c=e.width;n(a.col,Math.ceil(c))})}},{key:"setSettings",value:function(n){this.settings=n}},{key:"setSetting",value:function(n,a){this.settings||(this.settings={}),this.settings[n]=a}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(n){return this.settings?this.settings[n]:null}},{key:"createColGroupsCol",value:function(){var n=this,a=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&a.appendChild(this.createColElement(-1)),this.samples.forEach(function(e){Object(R.a)(e.strings,function(c){a.appendChild(n.createColElement(c.col))})}),a}},{key:"createRow",value:function(n){var a=this,e=this.hot.rootDocument,c=e.createDocumentFragment(),d=e.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(n,d),c.appendChild(d)),this.samples.forEach(function(m){Object(R.a)(m.strings,function(g){var _=g.col,y=a.hot.getCellMeta(n,_);y.col=_,y.row=n;var j=a.hot.getCellRenderer(y),V=e.createElement("td");V.setAttribute("ghost-table",1),j(a.hot,V,n,_,a.hot.colToProp(_),g.value,y),c.appendChild(V)})}),c}},{key:"appendColumnHeadersRow",value:function(){var n=this,a=this.hot.rootDocument,e=a.createDocumentFragment(),c=[];if(this.hot.hasRowHeaders()){var d=a.createElement("th");c.push([-1,d]),e.appendChild(d)}this.samples.forEach(function(m){Object(R.a)(m.strings,function(g){var _=g.col,y=a.createElement("th");c.push([_,y]),e.appendChild(y)})}),this.table.tHead.appendChild(e),Object(R.a)(c,function(m){var g=at(m,2),_=g[0],y=g[1];n.hot.view.appendColHeader(_,y)})}},{key:"createCol",value:function(n){var a=this,e=this.hot.rootDocument,c=e.createDocumentFragment();return this.samples.forEach(function(d){Object(R.a)(d.strings,function(m){var g=m.row,_=a.hot.getCellMeta(g,n);_.col=n,_.row=g;var y=a.hot.getCellRenderer(_),j=e.createElement("td"),V=e.createElement("tr");j.setAttribute("ghost-table",1),y(a.hot,j,g,n,a.hot.colToProp(n),m.value,_),V.appendChild(j),c.appendChild(V)})}),c}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((n||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(n){var a=this.hot.rootDocument.createElement("col");return a.style.width="".concat(this.hot.view._wt.wtTable.getStretchedColumnWidth(n),"px"),a}},{key:"createTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),c=a.createElement("table"),d=a.createElement("thead"),m=a.createElement("tbody"),g=a.createElement("colgroup"),_=a.createElement("tr"),y=a.createElement("th");return this.isVertical()&&c.appendChild(g),this.isHorizontal()&&(_.appendChild(y),d.appendChild(_),c.style.tableLayout="auto",c.style.width="auto"),c.appendChild(d),this.isVertical()&&m.appendChild(_),c.appendChild(m),Object(nt.a)(c,n),e.appendChild(c),{fragment:e,table:c,tHead:d,tBody:m,colGroup:g,tr:_,th:y}}},{key:"createContainer",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),c=a.createElement("div"),d="htGhostTable htAutoSize ".concat(n.trim());return Object(nt.a)(c,d),e.appendChild(c),{fragment:e,container:c}}},{key:"isVertical",value:function(){return!!(this.rows.length&&!this.columns.length)}},{key:"isHorizontal",value:function(){return!!(this.columns.length&&!this.rows.length)}}]),s}(),l=h,i=t(640),f=t(602),p=t(633),E=t(269),D=t(8),C=t(624),P=t(618);function v(s,o,n){return o in s?Object.defineProperty(s,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[o]=n,s}function T(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function x(s,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function w(s,o,n){return o&&x(s.prototype,o),n&&x(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}var A=function(){function s(o){T(this,s),this.samples=null,this.dataFactory=o,this.customSampleCount=null,this.allowDuplicates=!1}return w(s,[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:s.SAMPLE_COUNT}},{key:"setSampleCount",value:function(n){this.customSampleCount=n}},{key:"setAllowDuplicates",value:function(n){this.allowDuplicates=n}},{key:"generateRowSamples",value:function(n,a){return this.generateSamples("row",a,n)}},{key:"generateColumnSamples",value:function(n,a){return this.generateSamples("col",a,n)}},{key:"generateSamples",value:function(n,a,e){var c=this,d=new Map,m=typeof e=="number"?{from:e,to:e}:e,g=m.from,_=m.to;return Object(p.c)(g,_,function(y){var j=c.generateSample(n,a,y);d.set(y,j)}),d}},{key:"generateSample",value:function(n,a,e){var c=this;if(n!=="row"&&n!=="col")throw new Error("Unsupported sample type");var d=new Map,m=n==="row"?"col":"row",g=[];return Object(p.c)(a.from,a.to,function(_){var y=n==="row"?c.dataFactory(e,_):c.dataFactory(_,e),j=y.value,V=y.bundleSeed,Pt=typeof V=="string"&&V.length>0,z;Pt?z=V:Object(f.l)(j)?z="".concat(Object.keys(j).length):Array.isArray(j)?z="".concat(j.length):z="".concat(Object(P.f)(j).length),d.has(z)||d.set(z,{needed:c.getSampleCount(),strings:[]});var wt=d.get(z);if(wt.needed){var $t=g.indexOf(j)>-1;(!$t||c.allowDuplicates||Pt)&&(wt.strings.push(v({value:j},m,_)),g.push(j),wt.needed-=1)}}),d}}],[{key:"SAMPLE_COUNT",get:function(){return 3}}]),s}(),_t=A,vt=t(643),It=t(890),Rt=t(694);function yt(s){return yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},yt(s)}function lt(s,o){return Lt(s)||Dt(s,o)||Et(s,o)||Ct()}function Ct(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Et(s,o){if(!!s){if(typeof s=="string")return Ot(s,o);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ot(s,o)}}function Ot(s,o){(o==null||o>s.length)&&(o=s.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=s[n];return a}function Dt(s,o){var n=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var a=[],e=!0,c=!1,d,m;try{for(n=n.call(s);!(e=(d=n.next()).done)&&(a.push(d.value),!(o&&a.length===o));e=!0);}catch(g){c=!0,m=g}finally{try{!e&&n.return!=null&&n.return()}finally{if(c)throw m}}return a}}function Lt(s){if(Array.isArray(s))return s}function At(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function jt(s,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function Tt(s,o,n){return o&&jt(s.prototype,o),n&&jt(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}function Z(){return typeof Reflect!="undefined"&&Reflect.get?Z=Reflect.get.bind():Z=function(o,n,a){var e=pt(o,n);if(!!e){var c=Object.getOwnPropertyDescriptor(e,n);return c.get?c.get.call(arguments.length<3?o:a):c.value}},Z.apply(this,arguments)}function pt(s,o){for(;!Object.prototype.hasOwnProperty.call(s,o)&&(s=k(s),s!==null););return s}function Vt(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&gt(s,o)}function gt(s,o){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},gt(s,o)}function St(s){var o=Wt();return function(){var a=k(s),e;if(o){var c=k(this).constructor;e=Reflect.construct(a,arguments,c)}else e=a.apply(this,arguments);return xt(this,e)}}function xt(s,o){if(o&&(yt(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mt(s)}function Mt(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Wt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}function k(s){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},k(s)}i.a.getSingleton().register("modifyAutoColumnSizeSeed");var ht="autoColumnSize",Bt=10,bt=new WeakMap,Ut="autoColumnSize",Kt=function(s){Vt(n,s);var o=St(n);function n(a){var e;return At(this,n),e=o.call(this,a),bt.set(Mt(e),{cachedColumnHeaders:[]}),e.ghostTable=new l(e.hot),e.samplesGenerator=new _t(function(c,d){var m=e.hot.getCellMeta(c,d),g="";m.spanned||(g=e.hot.getDataAtCell(c,d));var _="";return e.hot.hasHook("modifyAutoColumnSizeSeed")&&(_=e.hot.runHooks("modifyAutoColumnSizeSeed",_,m,g)),{value:g,bundleSeed:_}}),e.firstCalculation=!0,e.inProgress=!1,e.measuredColumns=0,e.columnWidthsMap=new Rt.a,e.hot.columnIndexMapper.registerMap(Ut,e.columnWidthsMap),e.addHook("beforeColumnResize",function(c,d,m){return e.onBeforeColumnResize(c,d,m)}),e}return Tt(n,[{key:"isEnabled",value:function(){return this.hot.getSettings()[ht]!==!1&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var c=this.hot.getSettings()[ht];c&&c.useHeaders!==null&&c.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",c.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("beforeChangeRender",function(d){return e.onBeforeChange(d)}),this.addHook("afterFormulasValuesUpdate",function(d){return e.onAfterFormulasValuesUpdate(d)}),this.addHook("beforeViewRender",function(d){return e.onBeforeViewRender(d)}),this.addHook("modifyColWidth",function(d,m){return e.getColumnWidth(m,d)}),this.addHook("afterInit",function(){return e.onAfterInit()}),Z(k(n.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var e=this.findColumnsWhereHeaderWasChanged();e.length&&(this.clearCache(e),this.calculateVisibleColumnsWidth()),Z(k(n.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var e=this;Z(k(n.prototype),"disablePlugin",this).call(this),this.addHook("beforeColumnResize",function(c,d,m){return e.onBeforeColumnResize(c,d,m)})}},{key:"calculateVisibleColumnsWidth",value:function(){var e=this.hot.countRows();if(!!e){var c=this.hot.renderCall,d=this.getFirstVisibleColumn(),m=this.getLastVisibleColumn();d===-1||m===-1||this.calculateColumnsWidth({from:d,to:m},void 0,c)}}},{key:"calculateColumnsWidth",value:function(){var e=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=typeof c=="number"?{from:c,to:c}:c,_=typeof d=="number"?{from:d,to:d}:d;Object(p.c)(g.from,g.to,function(y){var j=e.hot.toPhysicalColumn(y);if(j===null&&(j=y),m||e.columnWidthsMap.getValueAtIndex(j)===null&&!e.hot._getColWidthFromSettings(j)){var V=e.samplesGenerator.generateColumnSamples(y,_);Object(R.a)(V,function(Pt){var z=lt(Pt,2),wt=z[0],$t=z[1];return e.ghostTable.addColumn(wt,$t)})}}),this.ghostTable.columns.length&&(this.hot.batchExecution(function(){e.ghostTable.getWidths(function(y,j){var V=e.hot.toPhysicalColumn(y);e.columnWidthsMap.setValueAtIndex(V,j)})},!0),this.measuredColumns=g.to+1,this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var e=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},d=0,m=this.hot.countCols()-1,g=null;this.inProgress=!0;var _=function j(){if(!e.hot){Object(tt.a)(g),e.inProgress=!1;return}e.calculateColumnsWidth({from:d,to:Math.min(d+n.CALCULATION_STEP,m)},c),d=d+n.CALCULATION_STEP+1,d<m?g=Object(tt.i)(j):(Object(tt.a)(g),e.inProgress=!1,e.hot.view.adjustElementsSize())},y=this.getSyncCalculationLimit();this.firstCalculation&&y>=0&&(this.calculateColumnsWidth({from:0,to:y},c),this.firstCalculation=!1,d=y+1),d<m?_():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var e=this.hot.getSettings()[ht],c=e&&Object(f.j)(e,"samplingRatio")?e.samplingRatio:void 0,d=e&&Object(f.j)(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;c&&!isNaN(c)&&this.samplesGenerator.setSampleCount(parseInt(c,10)),d&&this.samplesGenerator.setAllowDuplicates(d)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&this.hot.view._wt.wtTable.isVisible()&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var e=this.hot.getSettings()[ht],c=n.SYNC_CALCULATION_LIMIT,d=this.hot.countCols()-1;return Object(f.l)(e)&&(c=e.syncLimit,Object(vt.a)(c)?c=Object(p.e)(d,c):c>>=0),Math.min(c,d)}},{key:"getColumnWidth",value:function(e){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=c;return m===void 0&&(m=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),d&&typeof m=="number"&&(m=Math.max(m,It.a.DEFAULT_WIDTH))),m}},{key:"getFirstVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var c=e.wtTable.getFirstVisibleColumn();if(c!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(c)}if(e.wtViewport.columnsRenderCalculator){var d=e.wtTable.getFirstRenderedColumn();if(d!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(d)}return-1}},{key:"getLastVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var c=e.wtTable.getLastVisibleColumn();if(c!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(c)}if(e.wtViewport.columnsRenderCalculator){var d=e.wtTable.getLastRenderedColumn();if(d!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(d)}return-1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var e=this.hot.getColHeader(),c=bt.get(this),d=c.cachedColumnHeaders,m=Object(R.d)(e,function(g,_,y){var j=d.length;return(j-1<y||d[y]!==_)&&g.push(y),j-1<y?d.push(_):d[y]=_,g},[]);return m}},{key:"clearCache",value:function(){var e=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];c.length?this.hot.batchExecution(function(){Object(R.a)(c,function(d){e.columnWidthsMap.setValueAtIndex(d,null)})},!0):this.columnWidthsMap.clear()}},{key:"isNeedRecalculate",value:function(){return!!Object(R.b)(this.columnWidthsMap.getValues().slice(0,this.measuredColumns),function(e){return e===null}).length}},{key:"onBeforeViewRender",value:function(){this.calculateVisibleColumnsWidth(),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()}},{key:"onAfterLoadData",value:function(){var e=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){e.hot&&e.recalculateAllColumnsWidth()},0)}},{key:"onBeforeChange",value:function(e){var c=this,d=Object(R.c)(e,function(m){var g=lt(m,2),_=g[1];return c.hot.toPhysicalColumn(c.hot.propToCol(_))});this.clearCache(Array.from(new Set(d)))}},{key:"onBeforeColumnResize",value:function(e,c,d){var m=e;return d&&(this.calculateColumnsWidth(c,void 0,!0),m=this.getColumnWidth(c,void 0,!1)),m}},{key:"onAfterInit",value:function(){bt.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"onAfterFormulasValuesUpdate",value:function(e){var c=Object(R.b)(e,function(m){var g;return Object(P.b)((g=m.address)===null||g===void 0?void 0:g.col)}),d=Object(R.c)(c,function(m){return m.address.col});this.clearCache(Array.from(new Set(d)))}},{key:"destroy",value:function(){this.ghostTable.clean(),Z(k(n.prototype),"destroy",this).call(this)}}],[{key:"PLUGIN_KEY",get:function(){return ht}},{key:"PLUGIN_PRIORITY",get:function(){return Bt}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}]),n}(H.a)}}]);
