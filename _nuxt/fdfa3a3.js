(window.webpackJsonp=window.webpackJsonp||[]).push([[42,7,17,23,31],{1096:function(ut,w,t){"use strict";t.r(w);var U=function(){var l=this,c=l._self._c;return c("div",{staticClass:"scroll-container-min",attrs:{id:"parentContainer"}},[c("hot-table",{ref:"details",attrs:{root:l.detailsRoot,settings:l.settings}}),l._v(" "),c("LazyInventoryDialogItem",{ref:"dialogItem",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:l.selectItems}}),l._v(" "),c("AccountingDialogAccount",{ref:"dialogAccount",attrs:{"form-type":l.formTypeData},on:{selectItems:l.selectItems}})],1)},z=[],K=t(24),V=t(17),x=t(73),ct=t(4),G=t(9),ot=t(27),N=t(290),Y=t(653),Z=t(689),X=t(1163),R=t(894),P=t(1157),W=t(1160),D=t(710),M=t(670),B=t(777),rt=t(895),J=t(912),T=t(1165),q=t(1161),tt=t(1162),st=t(897),et=t(686),dt=t(655);Object(Z.c)(X.a),Object(Z.c)(R.a),Object(Z.c)(P.a),Object(Z.c)(W.a),Object(D.c)(M.a),Object(B.d)(rt.a),Object(B.d)(J.a),Object(B.d)(T.a),Object(B.d)(q.a),Object(B.d)(tt.a),Object(B.d)(st.a),Object(B.d)(et.a);var it=function(l,c){c.row===-1&&l.target.nodeName==="TD"&&(l.stopImmediatePropagation(),l.stopPropagation(),this.deselectCell())},H={name:"TableDetail",components:{HotTable:Y.a},props:{formType:{type:String,default:""}},data:function(){return{formTypeData:null,settings:{licenseKey:"non-commercial-and-evaluation",currentRowClassName:"currentRow",currentColClassName:"currentCol",startRows:1,rowHeaders:!0,manualColumnResize:!0,rowHeights:28,viewportRowRenderingOffset:1e3,viewportColumnRenderingOffset:100,colWidths:80,persistentState:!0,width:"100%",height:"auto",stretchH:"all",hiddenColumns:{copyPasteEnabled:!1,indicator:!1,columns:[1,2,3]},beforeOnCellMouseDown:it,dataSchema:{id:null,item_id:null,sku:null,name:null,description:null,quantity:0,unit:null,default_currency_symbol:null,vat_inclusive:0,price:0,discount_rate:0,tax_name:"",total:0},colHeaders:["#","Id","Account ID","Base Line","Description","Qty","Currency","Unit Price","Amount","Total",""],columns:[{width:"10px",wordWrap:!1,renderer:function(c,d,h,_,E,b,A){var C=null,I=window.details;if(I.form.status!=="closed"&&I.form.status!=="cancel")return C=document.createElement("button"),C.type="button",C.innerHTML='<span class="mdi mdi-arrow-right-bold"></span>',C.className="btnNPB",C.value="Details",C.addEventListener("mousedown",function(S){S.preventDefault(),I.$refs.dialogAccount.openDialog(h,I.form.transaction_type)}),d.innerText="",d.appendChild(C),d}},{data:"id",wordWrap:!1},{data:"account_id",wordWrap:!1},{data:"base_line_id",width:150,readOnly:!0,wordWrap:!1},{data:"narration",width:250,wordWrap:!1},{data:"quantity",width:80,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0"}},{data:"default_currency_symbol",width:60,readOnly:!0,wordWrap:!1,className:"htCenter"},{data:"amount",width:100,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"sub_total",width:100,wordWrap:!1,type:"numeric",readOnly:!0,numericFormat:{pattern:"0,0.00"}},{width:"10px",wordWrap:!1,renderer:function(c,d,h,_,E,b,A){var C=null,I=window.details;return I.form.status!=="closed"&&I.form.status!=="cancel"&&(C=document.createElement("button"),C.type="button",C.innerHTML='<span class="mdi mdi-delete"></span>',C.className="btnDelete",C.value="Details2",C.addEventListener("mousedown",function(S){S.preventDefault(),I.removeRow(h)}),d.innerText="",d.appendChild(C)),d}}]},detailsRoot:"detailsRoot",colHeaders:[],form:{}}},created:function(){this.setInstance()},methods:{setInstance:function(){window.details=this},removeRow:function(l){this.$refs.details.hotInstance.alter("remove_row",l)},addLine:function(){var l=this;this.$refs.details.hotInstance.batch(function(){var c=l.$refs.details.hotInstance.countRows();l.$refs.details.hotInstance.alter("insert_row",c+1,1)})},updateTableSettings:function(l){this.$refs.details.hotInstance.updateSettings({licenseKey:"non-commercial-and-evaluation",height:"auto",beforeRefreshDimensions:function(){return!1},beforeOnCellMouseDown:it,afterRemoveRow:function(d,h,_,E){var b=window.details;b.calculateTotal()},beforeRemoveRow:function(d,h,_,E){var b=window.details,A=[];_.forEach(function(I,S){var $=b.$refs.details.hotInstance.getDataAtCell(I,0);$&&A.push($)});var C=b.$refs.details.hotInstance.countRows();return C===1&&b.$emit("calcTotal",{subTotal:0,amount:0,discountAmount:0,taxDetail:[]}),A.length>0&&b.$emit("removeData",{id:A}),!0},afterChange:function(d,h){var _=window.details;if(d){var E=0;d.forEach(function(b){var A=Object(V.a)(b,4),C=A[0],I=A[1],S=A[2],$=A[3];E=I,(E==="quantity"||E==="amount"||E==="discount_rate"||E==="tax_name")&&S!==$&&_.calculateTotal()})}},beforeRender:function(d){var h=window.details;h.$nuxt.$loading.start()},afterRender:function(d){var h=window.details;h.$nuxt.$loading.finish()},afterLoadData:function(d,h,_){}})},selectItems:function(l){var c=l.row,d=l.selected,h=this;this.$refs.details.hotInstance.batch(function(){d.forEach(function(_,E){h.$refs.details.hotInstance.setDataAtRowProp([[c,"base_line_id",0],[c,"narration",_.name],[c,"default_currency_symbol",h.form.default_currency_code],[c,"account_id",_.id],[c,"amount",0],[c,"quantity",1]]),c++})})},setDataToDetails:function(l,c){var d=this,h=this;this.form=c,this.formTypeData=c.transaction_type,this.$refs.details.hotInstance.batch(function(){d.updateTableSettings();var _=c.line_items.length>0?c.line_items:l;h.$refs.details.hotInstance.loadData(_),d.$nuxt.$loading.finish()})},calculateTotal:function(){var l=this,c=this.$refs.details.hotInstance.countRows(),d=0,h=0,_=[],E=0,b=0;if(c>0)for(var A=function(S){l.$refs.details.hotInstance.batch(function(){var $=l.$refs.details.hotInstance.getDataAtRowProp(S,"quantity"),lt=l.$refs.details.hotInstance.getDataAtRowProp(S,"amount"),gt=l.$refs.details.hotInstance.getDataAtRowProp(S,"discount_rate"),k=l.$refs.details.hotInstance.getDataAtRowProp(S,"tax_name"),pt=$*lt;d=d+$*lt;var ht=parseFloat(gt/100*pt).toFixed(2);if(h=parseFloat(h)+parseFloat(ht),b=pt-ht,k){var Et=0;l.$auth.$storage.getState("tax_row").forEach(function(mt,Ot){mt.name===k&&(Et=parseFloat(mt.rate))});var Ct=parseFloat(Et)/100*b;_.push({name:k,amount:Ct})}E=E+(pt-ht),l.$refs.details.hotInstance.setDataAtRowProp(S,"sub_total",b)})},C=0;C<c;C++)A(C);this.$emit("calcTotal",{subTotal:d,amount:E,discountAmount:h,taxDetail:_})},getTaxRate:function(l){var c=this;return Object(K.a)(regeneratorRuntime.mark(function d(){var h;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,c.$axios.get("/api/financial/taxes/0",{params:{name:l}});case 2:return h=E.sent,E.abrupt("return",h.data.data.rows);case 4:case"end":return E.stop()}},d)}))()},getDataAtRowPro:function(l,c){return this.$refs.details.hotInstance.getDataAtRowProp(l,c)},countRows:function(){return this.$refs.details.hotInstance.countRows()},checkIfEmptyRow:function(l){return this.$refs.details.hotInstance.isEmptyRow(l)},getAddData:function(l){if(l==="0")for(var c=this.$refs.details.hotInstance.countRows(),d=0;d<c;d++)this.$refs.details.hotInstance.setDataAtRowProp(d,"id",null);return this.$refs.details.hotInstance.getSourceData()}}},nt=H,O=t(50),i=Object(O.a)(nt,U,z,!1,null,null,null),v=w.default=i.exports;installComponents(i,{AccountingDialogAccount:t(666).default})},598:function(ut,w,t){"use strict";var U=t(7),z=t.n(U),K=t(10),V=t.n(K),x=t(12),ct=t.n(x),G=t(13),ot=t.n(G),N=t(2),Y=t(4),Z=t.n(Y),X=t(34),R=t.n(X),P=t(51),W=t.n(P),D=t(28),M=t.n(D),B=t(8),rt=t.n(B),J=t(21),T=t.n(J),q=t(64),tt=t.n(q),st=t(269),et=t.n(st),dt=t(33),it=t.n(dt),H=t(270),nt=t.n(H),O=t(271),i=t.n(O),v=t(272),f=t.n(v),l=t(273),c=t.n(l),d=t(274),h=t.n(d),_=t(275),E=t.n(_),b=t(276),A=t.n(b),C=t(277),I=t.n(C),S=t(278),$=t.n(S),lt=t(279),gt=t.n(lt),k=t(280),pt=t.n(k),ht=t(281),Et=t.n(ht),Ct=t(282),mt=t.n(Ct),Ot=t(35),Vt=t.n(Ot),St=t(9),Mt=t.n(St),wt=t(283),Ht=t.n(wt),xt=t(3),Rt=t(77),Lt=t(1);function at(o,n){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);n&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),a.push.apply(a,e)}return a}function Dt(o){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?at(Object(a),!0).forEach(function(e){Object(N.a)(o,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):at(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}var Wt=["sm","md","lg","xl"],vt=["start","end","center"];function jt(o,n){return Wt.reduce(function(a,e){return a[o+Object(Lt.I)(e)]=n(),a},{})}var Tt=function(n){return[].concat(vt,["baseline","stretch"]).includes(n)},bt=jt("align",function(){return{type:String,default:null,validator:Tt}}),At=function(n){return[].concat(vt,["space-between","space-around"]).includes(n)},Q=jt("justify",function(){return{type:String,default:null,validator:At}}),ft=function(n){return[].concat(vt,["space-between","space-around","stretch"]).includes(n)},It=jt("alignContent",function(){return{type:String,default:null,validator:ft}}),_t={align:Object.keys(bt),justify:Object.keys(Q),alignContent:Object.keys(It)},Bt={align:"align",justify:"justify",alignContent:"align-content"};function Ut(o,n,a){var e=Bt[o];if(a!=null){if(n){var s=n.replace(o,"");e+="-".concat(s)}return e+="-".concat(a),e.toLowerCase()}}var r=new Map;w.a=xt.default.extend({name:"v-row",functional:!0,props:Dt(Dt(Dt({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:Tt}},bt),{},{justify:{type:String,default:null,validator:At}},Q),{},{alignContent:{type:String,default:null,validator:ft}},It),render:function(n,a){var e=a.props,s=a.data,u=a.children,m="";for(var g in e)m+=String(e[g]);var p=r.get(m);return p||function(){var y;p=[];var j;for(j in _t)_t[j].forEach(function(L){var yt=e[L],F=Ut(j,L,yt);F&&p.push(F)});p.push((y={"no-gutters":e.noGutters,"row--dense":e.dense},Object(N.a)(y,"align-".concat(e.align),e.align),Object(N.a)(y,"justify-".concat(e.justify),e.justify),Object(N.a)(y,"align-content-".concat(e.alignContent),e.alignContent),y)),r.set(m,p)}(),n(e.tag,Object(Rt.a)(s,{staticClass:"row",class:p}),u)}})},599:function(ut,w,t){var U=t(375),z=t(47);ut.exports=function(K,V,x){return x.get&&U(x.get,V,{getter:!0}),x.set&&U(x.set,V,{setter:!0}),z.f(K,V,x)}},600:function(ut,w,t){"use strict";t.r(w);var U=t(165),z=t(249),K=t(87),V=t(594),x=t(575),ct=t(247),G=t(589),ot=function(){var D=this,M=D._self._c;return M(V.a,{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:D.original,"max-width":D.maxWidth,transition:"dialog-top-transition"},model:{value:D.dialog,callback:function(rt){D.dialog=rt},expression:"dialog"}},[M(z.a,[M(K.c,[M("span",{staticClass:"subtitle-2"},[D._v(D._s(D.dialogTitle))]),D._v(" "),M(G.a),D._v(" "),M(U.a,{attrs:{icon:"",color:"red",dark:""},on:{click:function(rt){return D.closeDialog()}}},[M(ct.a,[D._v("mdi-close-circle")])],1)],1),D._v(" "),M(x.a),D._v(" "),M(K.b,{staticClass:"pr-0 pl-0"},[D._t("content")],2),D._v(" "),M(x.a),D._v(" "),M(K.a,[D._t("addLine"),D._v(" "),M(G.a),D._v(" "),D._t("saveData")],2)],1)],1)},N=[],Y={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},Z=Y,X=t(50),R=Object(X.a)(Z,ot,N,!1,null,null,null),P=w.default=R.exports},644:function(ut,w,t){"use strict";t.r(w);var U=t(165),z=t(587),K=t(908),V=t(247),x=t(248),ct=t(166),G=t(31),ot=t(576),N=t(598),Y=t(573),Z=t(21),X=t(268),R=function(){var i=this,v=i._self._c;return v(N.a,[v(z.a,{staticClass:"mt-0",attrs:{cols:"12"}},[v(K.a,{class:i.viewData?"elevation-0":"elevation-1",attrs:{"mobile-breakpoint":0,headers:i.headers,items:i.allData,loading:i.loading,"single-select":i.viewData,"show-select":"","fixed-header":"",search:i.search,height:i.viewData?"60vh":"70vh",dense:"","footer-props":{"items-per-page-options":[250,500,-1]}},scopedSlots:i._u([{key:"top",fn:function(){return[i.viewData?i._e():v("div",{staticClass:"pl-4 pt-2"},[v("span",{staticClass:"font-weight-medium text-h6"},[i._v(i._s(i.$t("Chart Of Accounts"))+`
          `)])]),i._v(" "),v("LazyMainToolbar",{attrs:{"document-status":i.documentStatus,"search-status":i.searchStatus,"item-search":i.itemSearch,"search-item":i.searchItem,search:i.search,"show-zero-qty":!0,title:"Chart of Accounts","show-batch-action":"","show-new-data":"","show-filter":"","show-search-filter":!1,"new-data-text":"New Account"},on:{emitData:i.emitData,newData:i.newData,getDataFromApi:i.getDataFromApi},scopedSlots:i._u([{key:"search",fn:function(){return[v(Y.a,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:i.search,callback:function(d){i.search=d},expression:"search"}})]},proxy:!0}])})]},proxy:!0},{key:"item.balance",fn:function(l){var c=l.item;return[i._v(`
        `+i._s(c.currency.currency_code+" "+i.$formatter.formatPrice(c.balance))+`
      `)]}},{key:"item.code",fn:function(l){var c=l.item;return[v("a",{on:{click:function(h){return i.viewItem(c)}}},[v("strong",{domProps:{textContent:i._s(c.code)}})])]}},{key:"item.id",fn:function(l){var c=l.item;return[v(U.a,{staticClass:"font-weight-bold text-right",attrs:{color:"secondary",text:"",small:""},on:{click:function(h){return i.actions(i.itemAction,c)}}},[i._v(`
          `+i._s(i.itemText)+`
        `)]),i._v(" "),v(ot.a,{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:i._u([{key:"activator",fn:function(h){var _=h.on,E=h.attrs;return[v(U.a,i._g(i._b({attrs:{color:"black",dark:"",icon:""}},"v-btn",E,!1),_),[v(V.a,[i._v("mdi-menu-down")])],1)]}}],null,!0)},[i._v(" "),v(x.a,i._l(i.items,function(d,h){return v(ct.a,{key:h,on:{click:function(E){return i.actions(d.action,c)}}},[v(G.a,[v(G.c,[i._v(i._s(d.text))])],1)],1)}),1)],1)]}}],null,!0),model:{value:i.selected,callback:function(l){i.selected=l},expression:"selected"}}),i._v(" "),v("LazyAccountingFormAccount",{ref:"forms",attrs:{"form-data":i.form,"form-title":i.formTitle,"button-title":i.buttonTitle,url:i.url},on:{getDataFromApi:i.getDataFromApi}})],1)],1)},P=[],W=t(8),D=t(7),M=t(12),B=t(9),rt=t(13),J=t(2),T=t(10),q=t(4);function tt(O,i){var v=Object.keys(O);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(O);i&&(f=f.filter(function(l){return Object.getOwnPropertyDescriptor(O,l).enumerable})),v.push.apply(v,f)}return v}function st(O){for(var i=1;i<arguments.length;i++){var v=arguments[i]!=null?arguments[i]:{};i%2?tt(Object(v),!0).forEach(function(f){Object(J.a)(O,f,v[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(v)):tt(Object(v)).forEach(function(f){Object.defineProperty(O,f,Object.getOwnPropertyDescriptor(v,f))})}return O}var et={name:"ChartOfAccount",props:{viewData:{type:Boolean,default:!1},formType:{type:String,default:""}},data:function(){return{selected:[],totalData:0,editedIndex:-1,loading:!0,allData:[],documentStatus:[],itemSearch:[],searchStatus:"",searchItem:"",search:"",show_zero_balance:null,form:{},defaultItem:{},options:{},items:[{text:"Edit",action:"edit"},{text:"Delete",action:"delete"}],itemText:"Edit",itemAction:"edit",url:"/api/financial/accounts",headers:[],title:"Chart Of Accounts",formTypeData:null}},head:function(){return{title:this.title}},computed:{formTitle:function(){return this.editedIndex===-1?"New Account":"Edit Account"},buttonTitle:function(){return this.editedIndex===-1?"Save":"Update"}},activated:function(){this.getDataFromApi()},mounted:function(){this.mappingHeader()},methods:{returnSelected:function(){return this.selected},viewItem:function(i){this.$router.push({path:"/app/accounting/detail",query:{id:i.id}})},setEmptyToSelected:function(i){this.selected=[],this.formTypeData=this.$auth.$storage.getState("formType"),this.getDataFromApi()},newData:function(){this.editedIndex=-1,this.$refs.forms.newData(this.form)},actions:function(i,v){i==="edit"?this.editItem(v):this.deleteItem(v)},editItem:function(i){this.editedIndex=this.allData.indexOf(i),this.$refs.forms.editItem(i,this.form)},deleteItem:function(i){var v=this,f=this;this.$swal({title:"Are you sure?",text:"The data will be permanently deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(l){l.value&&v.$axios.delete(f.url+"/"+i.id).then(function(c){v.$swal({type:"success",title:"Success...",text:"Row Deleted!"}),v.getDataFromApi()}).catch(function(c){v.$swal({type:"error",title:"Oops...",text:c.response.data.message})})})},emitData:function(i){this.documentStatus=i.documentStatus,this.itemSearch=i.itemSearch,this.searchStatus=i.searchStatus,this.searchItem=i.searchItem,this.search=i.search,this.filters=i.filters,this.show_zero_balance=i.show_zero_balance,this.getDataFromApi()},mappingHeader:function(){this.viewData?this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name",cellClass:"disable-wrap"},{text:"Account Type",value:"account_type",cellClass:"disable-wrap"},{text:"Category",value:"category.name"}]:this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name"},{text:"Account Type",value:"account_type"},{text:"Category",value:"category.name"},{text:"Balance",value:"balance",cellClass:"disable-wrap",sortable:!1,filterable:!1},{text:"Actions",value:"id",align:"right",cellClass:"disable-wrap",sortable:!1,filterable:!1}]},searchData:function(i){this.search=i.search},getDataFromApi:function(){var i=this;this.loading=!0;var v=this,f="";this.formTypeData==="CS"?f="OPERATING_REVENUE":this.formTypeData==="CP"&&(f="OPERATING_EXPENSE, DIRECT_EXPENSE, OVERHEAD_EXPENSE, OTHER_EXPENSE, NON_CURRENT_ASSET, CURRENT_ASSET, INVENTORY");var l={searchItem:v.searchItem,documentStatus:v.documentStatus,searchStatus:v.searchStatus,search:v.search,show_zero_balance:v.show_zero_balance,type:f};this.$axios.get(this.url,{params:st(st({},v.options),l)}).then(function(c){i.loading=!1;var d=c.data;i.allData=d.data,i.totalData=d.total,i.itemSearch=d.filter,i.form=Object.assign({},d.form),i.defaultItem=Object.assign({},d.form)}).catch(function(c){i.loading=!1,i.$swal({type:"error",title:"Error",text:c.response.data.message})})}}},dt=et,it=t(50),H=Object(it.a)(dt,R,P,!1,null,null,null),nt=w.default=H.exports},666:function(ut,w,t){"use strict";t.r(w);var U=t(165),z=t(585),K=t(247),V=function(){var R=this,P=R._self._c;return P("div",[P("DialogForm",{ref:"dialogForm",attrs:{"max-width":"1000px","dialog-title":R.$t("Chart Of Accounts"),"button-title":"Save",original:"top"},scopedSlots:R._u([{key:"content",fn:function(){return[P(z.a,[P("AccountingTableAccount",{ref:"tableItem",attrs:{"view-data":R.viewData,"form-type":R.formType,"show-add-btn":R.showAddBtn}})],1)]},proxy:!0},{key:"saveData",fn:function(){return[P(U.a,{attrs:{color:"green darken-1",dark:"",small:""},on:{click:R.selectData}},[R._v(`
        Select Item
        `),P(K.a,[R._v("mdi-arrow-down-right")])],1)]},proxy:!0}])})],1)},x=[],ct=t(58),G={name:"DialogItem",props:{viewData:{type:Boolean,default:!0},showAddBtn:{type:Boolean,default:!0},formType:{type:String,default:""}},data:function(){return{row:null}},methods:{openDialog:function(R,P){var W=this;this.$refs.dialogForm.openDialog(),setTimeout(function(){W.$refs.tableItem.setEmptyToSelected(P)},150),this.row=R},selectData:function(){this.$emit("selectItems",{row:this.row,selected:this.$refs.tableItem.returnSelected()}),this.$refs.dialogForm.closeDialog()}}},ot=G,N=t(50),Y=Object(N.a)(ot,V,x,!1,null,null,null),Z=w.default=Y.exports;installComponents(Y,{AccountingTableAccount:t(644).default,DialogForm:t(600).default})},670:function(ut,w,t){"use strict";t.d(w,"a",function(){return v});var U=t(606),z=t(604),K=t(4),V=t(111),x=t(625),ct=t(12),G=t(7),ot=t(46),N=t(52),Y=t(212),Z=t(33),X=t(35),R=t(871),P=t(605),W=t(601);function D(f){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},D(f)}function M(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function B(f,l){for(var c=0;c<l.length;c++){var d=l[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}function rt(f,l,c){return l&&B(f.prototype,l),c&&B(f,c),Object.defineProperty(f,"prototype",{writable:!1}),f}function J(){return typeof Reflect!="undefined"&&Reflect.get?J=Reflect.get.bind():J=function(l,c,d){var h=T(l,c);if(!!h){var _=Object.getOwnPropertyDescriptor(h,c);return _.get?_.get.call(arguments.length<3?l:d):_.value}},J.apply(this,arguments)}function T(f,l){for(;!Object.prototype.hasOwnProperty.call(f,l)&&(f=H(f),f!==null););return f}function q(f,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),l&&tt(f,l)}function tt(f,l){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,h){return d.__proto__=h,d},tt(f,l)}function st(f){var l=it();return function(){var d=H(f),h;if(l){var _=H(this).constructor;h=Reflect.construct(d,arguments,_)}else h=d.apply(this,arguments);return et(this,h)}}function et(f,l){if(l&&(D(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dt(f)}function dt(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function it(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(f){return!1}}function H(f){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},H(f)}var nt="ht_editor_visible",O="selectEditor",i="select",v=function(f){q(c,f);var l=st(c);function c(){return M(this,c),l.apply(this,arguments)}return rt(c,[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),Object(P.a)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(h){this.select.value=h}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="";var h=this.hot.getShortcutManager();h.setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",Object(P.v)(this.select,nt)&&Object(P.K)(this.select,nt),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var h=this;this.addHook("afterScrollHorizontally",function(){return h.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return h.refreshDimensions()}),this.addHook("afterColumnResize",function(){return h.refreshDimensions()}),this.addHook("afterRowResize",function(){return h.refreshDimensions()})}},{key:"prepare",value:function(h,_,E,b,A,C){var I=this;J(H(c.prototype),"prepare",this).call(this,h,_,E,b,A,C);var S=this.cellProperties.selectOptions,$;typeof S=="function"?$=this.prepareOptions(S(this.row,this.col,this.prop)):$=this.prepareOptions(S),Object(P.e)(this.select),Object(W.o)($,function(lt,gt){var k=I.hot.rootDocument.createElement("OPTION");k.value=gt,Object(P.f)(k,lt),I.select.appendChild(k)})}},{key:"prepareOptions",value:function(h){var _={};if(Array.isArray(h))for(var E=0,b=h.length;E<b;E++)_[h[E]]=h[E];else D(h)==="object"&&(_=h);return _}},{key:"refreshValue",value:function(){var h=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=h,this.setValue(h),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===R.b.EDITING){if(this.TD=this.getEditedCell(),!this.TD){this.close();return}var h=this.getEditedCellRect(),_=h.top,E=h.start,b=h.width,A=h.height,C=this.select.style;C.height="".concat(A,"px"),C.width="".concat(b,"px"),C.top="".concat(_,"px"),C[this.hot.isRtl()?"right":"left"]="".concat(E,"px"),C.margin="0px",Object(P.a)(this.select,nt)}}},{key:"registerShortcuts",value:function(){var h=this,_=this.hot.getShortcutManager(),E=_.getContext("editor"),b={group:O};this.isInFullEditMode()!==!1&&E.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var C=h.select.selectedIndex-1;C>=0&&(h.select[C].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var C=h.select.selectedIndex+1;C<=h.select.length-1&&(h.select[C].selected=!0)}}],b)}},{key:"unregisterShortcuts",value:function(){var h=this.hot.getShortcutManager(),_=h.getContext("editor");_.removeShortcutsByGroup(O)}}],[{key:"EDITOR_TYPE",get:function(){return i}}]),c}(R.a)},686:function(ut,w,t){"use strict";t.d(w,"a",function(){return Ut});var U=t(212),z=t(4),K=t(33),V=t(628),x=t(35),ct=t(36),G=t(58),ot=t(42),N=t(636),Y=t(606),Z=t(604),X=t(111),R=t(625),P=t(12),W=t(7),D=t(46),M=t(52),B=t(27),rt=t(21),J=t(896),T=t(607),q=t(663),tt=t(9),st=t(79),et=t(605);function dt(r,o){return i(r)||O(r,o)||H(r,o)||it()}function it(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H(r,o){if(!!r){if(typeof r=="string")return nt(r,o);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(r,o)}}function nt(r,o){(o==null||o>r.length)&&(o=r.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=r[n];return a}function O(r,o){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a=[],e=!0,s=!1,u,m;try{for(n=n.call(r);!(e=(u=n.next()).done)&&(a.push(u.value),!(o&&a.length===o));e=!0);}catch(g){s=!0,m=g}finally{try{!e&&n.return!=null&&n.return()}finally{if(s)throw m}}return a}}function i(r){if(Array.isArray(r))return r}function v(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function f(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function l(r,o,n){return o&&f(r.prototype,o),n&&f(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}var c=function(){function r(o){v(this,r),this.hot=o,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}return l(r,[{key:"addRow",value:function(n,a){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={row:n};this.rows.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"addColumnHeadersRow",value:function(n){var a=this.hot.getColHeader(0);if(a!=null){var e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=n,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}},{key:"addColumn",value:function(n,a){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={col:n};this.columns.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(n)!==null&&this.hot.view.appendColHeader(n,this.table.th),this.table.tBody.appendChild(this.createCol(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"getHeights",value:function(n){this.injected||this.injectTable(),Object(T.a)(this.rows,function(a){n(a.row,Object(et.H)(a.table)-1)})}},{key:"getWidths",value:function(n){this.injected||this.injectTable(),Object(T.a)(this.columns,function(a){var e=a.table.getBoundingClientRect(),s=e.width;n(a.col,Math.ceil(s))})}},{key:"setSettings",value:function(n){this.settings=n}},{key:"setSetting",value:function(n,a){this.settings||(this.settings={}),this.settings[n]=a}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(n){return this.settings?this.settings[n]:null}},{key:"createColGroupsCol",value:function(){var n=this,a=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&a.appendChild(this.createColElement(-1)),this.samples.forEach(function(e){Object(T.a)(e.strings,function(s){a.appendChild(n.createColElement(s.col))})}),a}},{key:"createRow",value:function(n){var a=this,e=this.hot.rootDocument,s=e.createDocumentFragment(),u=e.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(n,u),s.appendChild(u)),this.samples.forEach(function(m){Object(T.a)(m.strings,function(g){var p=g.col,y=a.hot.getCellMeta(n,p);y.col=p,y.row=n;var j=a.hot.getCellRenderer(y),L=e.createElement("td");L.setAttribute("ghost-table",1),j(a.hot,L,n,p,a.hot.colToProp(p),g.value,y),s.appendChild(L)})}),s}},{key:"appendColumnHeadersRow",value:function(){var n=this,a=this.hot.rootDocument,e=a.createDocumentFragment(),s=[];if(this.hot.hasRowHeaders()){var u=a.createElement("th");s.push([-1,u]),e.appendChild(u)}this.samples.forEach(function(m){Object(T.a)(m.strings,function(g){var p=g.col,y=a.createElement("th");s.push([p,y]),e.appendChild(y)})}),this.table.tHead.appendChild(e),Object(T.a)(s,function(m){var g=dt(m,2),p=g[0],y=g[1];n.hot.view.appendColHeader(p,y)})}},{key:"createCol",value:function(n){var a=this,e=this.hot.rootDocument,s=e.createDocumentFragment();return this.samples.forEach(function(u){Object(T.a)(u.strings,function(m){var g=m.row,p=a.hot.getCellMeta(g,n);p.col=n,p.row=g;var y=a.hot.getCellRenderer(p),j=e.createElement("td"),L=e.createElement("tr");j.setAttribute("ghost-table",1),y(a.hot,j,g,n,a.hot.colToProp(n),m.value,p),L.appendChild(j),s.appendChild(L)})}),s}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((n||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(n){var a=this.hot.rootDocument.createElement("col");return a.style.width="".concat(this.hot.view._wt.wtTable.getStretchedColumnWidth(n),"px"),a}},{key:"createTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),s=a.createElement("table"),u=a.createElement("thead"),m=a.createElement("tbody"),g=a.createElement("colgroup"),p=a.createElement("tr"),y=a.createElement("th");return this.isVertical()&&s.appendChild(g),this.isHorizontal()&&(p.appendChild(y),u.appendChild(p),s.style.tableLayout="auto",s.style.width="auto"),s.appendChild(u),this.isVertical()&&m.appendChild(p),s.appendChild(m),Object(et.a)(s,n),e.appendChild(s),{fragment:e,table:s,tHead:u,tBody:m,colGroup:g,tr:p,th:y}}},{key:"createContainer",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),s=a.createElement("div"),u="htGhostTable htAutoSize ".concat(n.trim());return Object(et.a)(s,u),e.appendChild(s),{fragment:e,container:s}}},{key:"isVertical",value:function(){return!!(this.rows.length&&!this.columns.length)}},{key:"isHorizontal",value:function(){return!!(this.columns.length&&!this.rows.length)}}]),r}(),d=c,h=t(639),_=t(601),E=t(632),b=t(269),A=t(8),C=t(623),I=t(617);function S(r,o,n){return o in r?Object.defineProperty(r,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[o]=n,r}function $(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function lt(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function gt(r,o,n){return o&&lt(r.prototype,o),n&&lt(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}var k=function(){function r(o){$(this,r),this.samples=null,this.dataFactory=o,this.customSampleCount=null,this.allowDuplicates=!1}return gt(r,[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:r.SAMPLE_COUNT}},{key:"setSampleCount",value:function(n){this.customSampleCount=n}},{key:"setAllowDuplicates",value:function(n){this.allowDuplicates=n}},{key:"generateRowSamples",value:function(n,a){return this.generateSamples("row",a,n)}},{key:"generateColumnSamples",value:function(n,a){return this.generateSamples("col",a,n)}},{key:"generateSamples",value:function(n,a,e){var s=this,u=new Map,m=typeof e=="number"?{from:e,to:e}:e,g=m.from,p=m.to;return Object(E.c)(g,p,function(y){var j=s.generateSample(n,a,y);u.set(y,j)}),u}},{key:"generateSample",value:function(n,a,e){var s=this;if(n!=="row"&&n!=="col")throw new Error("Unsupported sample type");var u=new Map,m=n==="row"?"col":"row",g=[];return Object(E.c)(a.from,a.to,function(p){var y=n==="row"?s.dataFactory(e,p):s.dataFactory(p,e),j=y.value,L=y.bundleSeed,yt=typeof L=="string"&&L.length>0,F;yt?F=L:Object(_.l)(j)?F="".concat(Object.keys(j).length):Array.isArray(j)?F="".concat(j.length):F="".concat(Object(I.f)(j).length),u.has(F)||u.set(F,{needed:s.getSampleCount(),strings:[]});var Pt=u.get(F);if(Pt.needed){var Kt=g.indexOf(j)>-1;(!Kt||s.allowDuplicates||yt)&&(Pt.strings.push(S({value:j},m,p)),g.push(j),Pt.needed-=1)}}),u}}],[{key:"SAMPLE_COUNT",get:function(){return 3}}]),r}(),pt=k,ht=t(642),Et=t(889),Ct=t(693);function mt(r){return mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},mt(r)}function Ot(r,o){return Ht(r)||wt(r,o)||St(r,o)||Vt()}function Vt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function St(r,o){if(!!r){if(typeof r=="string")return Mt(r,o);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(r,o)}}function Mt(r,o){(o==null||o>r.length)&&(o=r.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=r[n];return a}function wt(r,o){var n=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var a=[],e=!0,s=!1,u,m;try{for(n=n.call(r);!(e=(u=n.next()).done)&&(a.push(u.value),!(o&&a.length===o));e=!0);}catch(g){s=!0,m=g}finally{try{!e&&n.return!=null&&n.return()}finally{if(s)throw m}}return a}}function Ht(r){if(Array.isArray(r))return r}function xt(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function Rt(r,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function Lt(r,o,n){return o&&Rt(r.prototype,o),n&&Rt(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function at(){return typeof Reflect!="undefined"&&Reflect.get?at=Reflect.get.bind():at=function(o,n,a){var e=Dt(o,n);if(!!e){var s=Object.getOwnPropertyDescriptor(e,n);return s.get?s.get.call(arguments.length<3?o:a):s.value}},at.apply(this,arguments)}function Dt(r,o){for(;!Object.prototype.hasOwnProperty.call(r,o)&&(r=Q(r),r!==null););return r}function Wt(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),o&&vt(r,o)}function vt(r,o){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},vt(r,o)}function jt(r){var o=At();return function(){var a=Q(r),e;if(o){var s=Q(this).constructor;e=Reflect.construct(a,arguments,s)}else e=a.apply(this,arguments);return Tt(this,e)}}function Tt(r,o){if(o&&(mt(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bt(r)}function bt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function At(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function Q(r){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Q(r)}h.a.getSingleton().register("modifyAutoColumnSizeSeed");var ft="autoColumnSize",It=10,_t=new WeakMap,Bt="autoColumnSize",Ut=function(r){Wt(n,r);var o=jt(n);function n(a){var e;return xt(this,n),e=o.call(this,a),_t.set(bt(e),{cachedColumnHeaders:[]}),e.ghostTable=new d(e.hot),e.samplesGenerator=new pt(function(s,u){var m=e.hot.getCellMeta(s,u),g="";m.spanned||(g=e.hot.getDataAtCell(s,u));var p="";return e.hot.hasHook("modifyAutoColumnSizeSeed")&&(p=e.hot.runHooks("modifyAutoColumnSizeSeed",p,m,g)),{value:g,bundleSeed:p}}),e.firstCalculation=!0,e.inProgress=!1,e.measuredColumns=0,e.columnWidthsMap=new Ct.a,e.hot.columnIndexMapper.registerMap(Bt,e.columnWidthsMap),e.addHook("beforeColumnResize",function(s,u,m){return e.onBeforeColumnResize(s,u,m)}),e}return Lt(n,[{key:"isEnabled",value:function(){return this.hot.getSettings()[ft]!==!1&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var s=this.hot.getSettings()[ft];s&&s.useHeaders!==null&&s.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",s.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("beforeChangeRender",function(u){return e.onBeforeChange(u)}),this.addHook("afterFormulasValuesUpdate",function(u){return e.onAfterFormulasValuesUpdate(u)}),this.addHook("beforeViewRender",function(u){return e.onBeforeViewRender(u)}),this.addHook("modifyColWidth",function(u,m){return e.getColumnWidth(m,u)}),this.addHook("afterInit",function(){return e.onAfterInit()}),at(Q(n.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var e=this.findColumnsWhereHeaderWasChanged();e.length&&(this.clearCache(e),this.calculateVisibleColumnsWidth()),at(Q(n.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var e=this;at(Q(n.prototype),"disablePlugin",this).call(this),this.addHook("beforeColumnResize",function(s,u,m){return e.onBeforeColumnResize(s,u,m)})}},{key:"calculateVisibleColumnsWidth",value:function(){var e=this.hot.countRows();if(!!e){var s=this.hot.renderCall,u=this.getFirstVisibleColumn(),m=this.getLastVisibleColumn();u===-1||m===-1||this.calculateColumnsWidth({from:u,to:m},void 0,s)}}},{key:"calculateColumnsWidth",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=typeof s=="number"?{from:s,to:s}:s,p=typeof u=="number"?{from:u,to:u}:u;Object(E.c)(g.from,g.to,function(y){var j=e.hot.toPhysicalColumn(y);if(j===null&&(j=y),m||e.columnWidthsMap.getValueAtIndex(j)===null&&!e.hot._getColWidthFromSettings(j)){var L=e.samplesGenerator.generateColumnSamples(y,p);Object(T.a)(L,function(yt){var F=Ot(yt,2),Pt=F[0],Kt=F[1];return e.ghostTable.addColumn(Pt,Kt)})}}),this.ghostTable.columns.length&&(this.hot.batchExecution(function(){e.ghostTable.getWidths(function(y,j){var L=e.hot.toPhysicalColumn(y);e.columnWidthsMap.setValueAtIndex(L,j)})},!0),this.measuredColumns=g.to+1,this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},u=0,m=this.hot.countCols()-1,g=null;this.inProgress=!0;var p=function j(){if(!e.hot){Object(q.a)(g),e.inProgress=!1;return}e.calculateColumnsWidth({from:u,to:Math.min(u+n.CALCULATION_STEP,m)},s),u=u+n.CALCULATION_STEP+1,u<m?g=Object(q.i)(j):(Object(q.a)(g),e.inProgress=!1,e.hot.view.adjustElementsSize())},y=this.getSyncCalculationLimit();this.firstCalculation&&y>=0&&(this.calculateColumnsWidth({from:0,to:y},s),this.firstCalculation=!1,u=y+1),u<m?p():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var e=this.hot.getSettings()[ft],s=e&&Object(_.j)(e,"samplingRatio")?e.samplingRatio:void 0,u=e&&Object(_.j)(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;s&&!isNaN(s)&&this.samplesGenerator.setSampleCount(parseInt(s,10)),u&&this.samplesGenerator.setAllowDuplicates(u)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&this.hot.view._wt.wtTable.isVisible()&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var e=this.hot.getSettings()[ft],s=n.SYNC_CALCULATION_LIMIT,u=this.hot.countCols()-1;return Object(_.l)(e)&&(s=e.syncLimit,Object(ht.a)(s)?s=Object(E.e)(u,s):s>>=0),Math.min(s,u)}},{key:"getColumnWidth",value:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=s;return m===void 0&&(m=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),u&&typeof m=="number"&&(m=Math.max(m,Et.a.DEFAULT_WIDTH))),m}},{key:"getFirstVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var s=e.wtTable.getFirstVisibleColumn();if(s!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(s)}if(e.wtViewport.columnsRenderCalculator){var u=e.wtTable.getFirstRenderedColumn();if(u!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(u)}return-1}},{key:"getLastVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var s=e.wtTable.getLastVisibleColumn();if(s!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(s)}if(e.wtViewport.columnsRenderCalculator){var u=e.wtTable.getLastRenderedColumn();if(u!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(u)}return-1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var e=this.hot.getColHeader(),s=_t.get(this),u=s.cachedColumnHeaders,m=Object(T.d)(e,function(g,p,y){var j=u.length;return(j-1<y||u[y]!==p)&&g.push(y),j-1<y?u.push(p):u[y]=p,g},[]);return m}},{key:"clearCache",value:function(){var e=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];s.length?this.hot.batchExecution(function(){Object(T.a)(s,function(u){e.columnWidthsMap.setValueAtIndex(u,null)})},!0):this.columnWidthsMap.clear()}},{key:"isNeedRecalculate",value:function(){return!!Object(T.b)(this.columnWidthsMap.getValues().slice(0,this.measuredColumns),function(e){return e===null}).length}},{key:"onBeforeViewRender",value:function(){this.calculateVisibleColumnsWidth(),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()}},{key:"onAfterLoadData",value:function(){var e=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){e.hot&&e.recalculateAllColumnsWidth()},0)}},{key:"onBeforeChange",value:function(e){var s=this,u=Object(T.c)(e,function(m){var g=Ot(m,2),p=g[1];return s.hot.toPhysicalColumn(s.hot.propToCol(p))});this.clearCache(Array.from(new Set(u)))}},{key:"onBeforeColumnResize",value:function(e,s,u){var m=e;return u&&(this.calculateColumnsWidth(s,void 0,!0),m=this.getColumnWidth(s,void 0,!1)),m}},{key:"onAfterInit",value:function(){_t.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"onAfterFormulasValuesUpdate",value:function(e){var s=Object(T.b)(e,function(m){var g;return Object(I.b)((g=m.address)===null||g===void 0?void 0:g.col)}),u=Object(T.c)(s,function(m){return m.address.col});this.clearCache(Array.from(new Set(u)))}},{key:"destroy",value:function(){this.ghostTable.clean(),at(Q(n.prototype),"destroy",this).call(this)}}],[{key:"PLUGIN_KEY",get:function(){return ft}},{key:"PLUGIN_PRIORITY",get:function(){return It}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}]),n}(J.a)}}]);
