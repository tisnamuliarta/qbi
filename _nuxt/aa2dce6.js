(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{1007:function(S,c,o){"use strict";o.r(c);var u=function(){var a=this,t=a._self._c;return t("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",persistent:"",transition:"dialog-top-transition",scrollable:""},model:{value:a.dialog,callback:function(e){a.dialog=e},expression:"dialog"}},[t("v-card",{attrs:{tile:""}},[t("v-card-title",[t("v-toolbar-title",[t("v-btn",{attrs:{icon:""}},[t("v-icon",[a._v("mdi-progress-pencil")])],1),a._v(" "),t("span",{domProps:{textContent:a._s(a.title)}})],1),a._v(" "),t("v-spacer"),a._v(" "),t("v-btn",{attrs:{icon:"",dark:"",color:"red"},on:{click:a.close}},[t("v-icon",[a._v("mdi-close")])],1)],1),a._v(" "),t("v-divider"),a._v(" "),t("v-card-text",{staticClass:"pl-0 pr-0"},[t("v-container",{attrs:{fluid:""}},[t("LazyDocumentFormDocument",{ref:"formDocument"})],1)],1),a._v(" "),t("v-divider"),a._v(" "),t("v-card-actions",[t("v-spacer"),a._v(" "),t("v-btn",{staticClass:"mr-3",attrs:{color:"green darken-1",dark:"",rounded:""},on:{click:a.close}},[a._v(`
          Save

          `),t("v-menu",{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:a._u([{key:"activator",fn:function(e){var n=e.on,T=e.attrs;return[t("v-btn",a._g(a._b({attrs:{dark:"",icon:""}},"v-btn",T,!1),n),[t("v-icon",[a._v("mdi-menu-down")])],1)]}}])},[a._v(" "),t("v-list",a._l(a.items,function(i,e){return t("v-list-item",{key:e},[t("v-list-item-content",[t("v-list-item-title",[a._v(a._s(i.text))])],1)],1)}),1)],1)],1)],1)],1)],1)},m=[],F=o(59),I=o(4),O=o(32),j=o(34),B=o(668),N=o(293),v={name:"ChartOfAccount",data:function(){return{title:"AR Credit Memo",items:[{text:"Edit",action:"edit"},{text:"Delete",action:"delete"}],breadcrumb:[],form:{},audits:{},defaultItem:{},url:"/api/documents/form",dialogLoading:!1,showLoading:!1,dialog:!0,itemAction:[],actionName:"Save"}},activated:function(){this.dialog=!0,this.getDataFromApi()},methods:{close:function(){this.$router.back(),this.$nuxt.$emit("getDataFromApi")},checkDisable:function(){return this.form.status==="closed"||this.form.status==="cancel"},arrowLink:function(a,t){var i=this;this.$axios.get(this.url+"/arrow",{params:{type:t,status:a,document:this.$route.query.document}}).then(function(e){i.$router.push({path:"/dashboard/documents/form",query:{document:e.data.data.id,type:t}}),setTimeout(function(){i.getDataFromApi()},300)}).catch(function(e){i.$swal({type:"error",title:"Error",text:e.response.data.message})})},getDataFromApi:function(a){var t=this;this.showLoading=!0;var i=this.$route.query.type;this.$axios.get(this.url+"/"+this.$route.query.document,{params:{type:i,copyFromId:a}}).then(function(e){var n="";t.audits=e.data.data.audits,e.data.data.count>0?(n=e.data.data.rows,t.actionName="Update"):(n=e.data.data.form,t.actionName="Save"),t.form=Object.assign({},n),t.defaultItem=Object.assign({},n),setTimeout(function(){t.$refs.formDocument.setData(t.form)},30)}).catch(function(e){var n=e.response!==void 0?e.response.data.message:e;t.$swal({type:"error",title:"Error",text:n})}).finally(function(e){t.showLoading=!1})},actionDocument:function(a){var t=this;switch(a){case"SQ":case"SO":case"PQ":case"PO":var i=this.$route.query.document;this.$router.push({path:"/dashboard/documents/form",query:{document:0,type:a}}),setTimeout(function(){t.actionName="Save",t.$refs.formDocument.changeValue("type",a),t.$refs.formDocument.changeValue("parent_id",i)},300);break;case"C":this.$refs.formDocument.changeValue("status","cancel"),this.store();break;case"sendEmail":this.openDialogEmail();break}},deleteDocument:function(a){var t=this,i=this;this.$swal({title:"Are you sure?",text:"The data will be deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(e){e.value&&t.$axios.delete(t.url+"/"+a).then(function(n){t.$swal({type:"success",title:"Success...",text:"Data Deleted!"}),t.$router.push({path:i.$helper.mappingAction(i.$route.query.type)})}).catch(function(n){t.$swal({type:"error",title:"Oops...",text:n.response.data.message})})})},printAction:function(a){switch(a){case"preview":this.previewDocument();break;case"sendEmail":this.openDialogEmail();break}},openDialogEmail:function(){this.$refs.dialogSendEmail.openEmailDialog(this.form)},previewDocument:function(){var a=this,t=this;this.dialogLoading=!0,this.$axios.get("/api/documents/print",{params:{id:t.form.id},responseType:"arraybuffer"}).then(function(i){a.dialogLoading=!1;var e=window.URL.createObjectURL(new Blob([i.data])),n=document.createElement("a");n.href=e,n.setAttribute("download",t.form.document_number+".pdf"),document.body.appendChild(n),n.click()}).catch(function(i){a.dialogLoading=!1,a.$swal({type:"error",title:"Error",text:i.response.data.message})})},store:function(){var a=this,t=this.$route.query.document==="0"?"post":"patch",i=this.$route.query.document==="0"?this.url:this.url+"/"+this.$route.query.document,e=this.$refs.formDocument.returnData(this.$route.query.document);this.dialogLoading=!0,this.$axios({method:t,url:i,data:e}).then(function(n){a.$router.push({path:"/dashboard/documents/form",query:{document:n.data.data.id,type:n.data.data.type}}),a.$nuxt.$emit("snackbar",n.data.message),setTimeout(function(){a.getDataFromApi()},50)}).catch(function(n){a.$swal({type:"error",title:"Error",text:n.response.data.message})}).finally(function(n){a.dialogLoading=!1})}}},h=v,f=o(50),p=o(51),g=o.n(p),y=o(164),D=o(248),r=o(88),$=o(586),V=o(595),b=o(576),x=o(247),C=o(249),L=o(165),l=o(35),w=o(577),A=o(593),E=o(120),d=Object(f.a)(h,u,m,!1,null,null,null),R=c.default=d.exports;g()(d,{VBtn:y.a,VCard:D.a,VCardActions:r.a,VCardText:r.b,VCardTitle:r.c,VContainer:$.a,VDialog:V.a,VDivider:b.a,VIcon:x.a,VList:C.a,VListItem:L.a,VListItemContent:l.a,VListItemTitle:l.c,VMenu:w.a,VSpacer:A.a,VToolbarTitle:E.a})}}]);
