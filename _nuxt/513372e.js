(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{1082:function(T,c,a){"use strict";a.r(c);var u=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",persistent:"",transition:"dialog-top-transition",scrollable:""},model:{value:e.dialog,callback:function(n){e.dialog=n},expression:"dialog"}},[t("v-card",{attrs:{tile:""}},[t("v-card-title",[t("v-toolbar-title",[t("v-btn",{attrs:{icon:""}},[t("v-icon",[e._v("mdi-progress-pencil")])],1),e._v(" "),t("span",{domProps:{textContent:e._s(e.title)}})],1),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{icon:"",dark:"",color:"red"},on:{click:e.close}},[t("v-icon",[e._v("mdi-close")])],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-card-text",{staticClass:"pl-0 pr-0"},[t("v-container",{attrs:{fluid:""}},[t("LazyDocumentFormDocument",{ref:"formDocument"})],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"mr-3",attrs:{color:"green darken-1",dark:"",rounded:""},on:{click:e.close}},[e._v(`
        Save

        `),t("v-menu",{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on,r=n.attrs;return[t("v-btn",e._g(e._b({attrs:{dark:"",icon:""}},"v-btn",r,!1),i),[t("v-icon",[e._v("mdi-menu-down")])],1)]}}])},[e._v(" "),t("v-list",e._l(e.items,function(n,i){return t("v-list-item",{key:i},[t("v-list-item-content",[t("v-list-item-title",[e._v(e._s(n.text))])],1)],1)}),1)],1)],1)],1)],1)],1)},m=[],S=a(59),F=a(4),I=a(32),j=a(35),B=a(806),O=a(291),v={name:"QuotationList",data:function(){return{title:"AR Credit Memo",items:[{text:"Edit",action:"edit"},{text:"Delete",action:"delete"}],breadcrumb:[],form:{},audits:{},defaultItem:{},url:"/api/documents/form",dialogLoading:!1,showLoading:!1,dialog:!0,itemAction:[],actionName:"Save"}},activated:function(){this.dialog=!0,this.getDataFromApi()},methods:{close:function(){this.$router.back(),this.$nuxt.$emit("getDataFromApi")},checkDisable:function(){return this.form.status==="closed"||this.form.status==="cancel"},arrowLink:function(o,t){var n=this;this.$axios.get(this.url+"/arrow",{params:{type:t,status:o,document:this.$route.query.document}}).then(function(i){n.$router.push({path:"/dashboard/documents/form",query:{document:i.data.data.id,type:t}}),setTimeout(function(){n.getDataFromApi()},300)}).catch(function(i){n.$swal({type:"error",title:"Error",text:i.response.data.message})})},getDataFromApi:function(o){var t=this;this.showLoading=!0;var n=this.$route.query.type;this.$axios.get(this.url+"/"+this.$route.query.document,{params:{type:n,copyFromId:o}}).then(function(i){var r="";t.audits=i.data.data.audits,i.data.data.count>0?(r=i.data.data.rows,t.actionName="Update"):(r=i.data.data.form,t.actionName="Save"),t.form=Object.assign({},r),t.defaultItem=Object.assign({},r),setTimeout(function(){t.$refs.formDocument.setData(t.form)},30)}).catch(function(i){var r=i.response!==void 0?i.response.data.message:i;t.$swal({type:"error",title:"Error",text:r})}).finally(function(i){t.showLoading=!1})},actionDocument:function(o){var t=this;switch(o){case"SQ":case"SO":case"PQ":case"PO":var n=this.$route.query.document;this.$router.push({path:"/dashboard/documents/form",query:{document:0,type:o}}),setTimeout(function(){t.actionName="Save",t.$refs.formDocument.changeValue("type",o),t.$refs.formDocument.changeValue("parent_id",n)},300);break;case"C":this.$refs.formDocument.changeValue("status","cancel"),this.store();break;case"sendEmail":this.openDialogEmail();break}},deleteDocument:function(o){var t=this,n=this;this.$swal({title:"Are you sure?",text:"The data will be deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(i){i.value&&t.$axios.delete(t.url+"/"+o).then(function(r){t.$swal({type:"success",title:"Success...",text:"Data Deleted!"}),t.$router.push({path:n.$helper.mappingAction(n.$route.query.type)})}).catch(function(r){t.$swal({type:"error",title:"Oops...",text:r.response.data.message})})})},printAction:function(o){switch(o){case"preview":this.previewDocument();break;case"sendEmail":this.openDialogEmail();break}},openDialogEmail:function(){this.$refs.dialogSendEmail.openEmailDialog(this.form)},previewDocument:function(){var o=this,t=this;this.dialogLoading=!0,this.$axios.get("/api/documents/print",{params:{id:t.form.id},responseType:"arraybuffer"}).then(function(n){o.dialogLoading=!1;var i=window.URL.createObjectURL(new Blob([n.data])),r=document.createElement("a");r.href=i,r.setAttribute("download",t.form.document_number+".pdf"),document.body.appendChild(r),r.click()}).catch(function(n){o.dialogLoading=!1,o.$swal({type:"error",title:"Error",text:n.response.data.message})})},store:function(){var o=this,t=this.$route.query.document==="0"?"post":"patch",n=this.$route.query.document==="0"?this.url:this.url+"/"+this.$route.query.document,i=this.$refs.formDocument.returnData(this.$route.query.document);this.dialogLoading=!0,this.$axios({method:t,url:n,data:i}).then(function(r){o.$router.push({path:"/dashboard/documents/form",query:{document:r.data.data.id,type:r.data.data.type}}),o.$nuxt.$emit("snackbar",r.data.message),setTimeout(function(){o.getDataFromApi()},50)}).catch(function(r){o.$swal({type:"error",title:"Error",text:r.response.data.message})}).finally(function(r){o.dialogLoading=!1})}}},h=v,f=a(50),p=a(51),g=a.n(p),y=a(164),$=a(247),s=a(88),D=a(582),V=a(591),b=a(572),x=a(246),L=a(248),C=a(165),l=a(34),w=a(573),E=a(589),A=a(119),d=Object(f.a)(h,u,m,!1,null,null,null),N=c.default=d.exports;g()(d,{VBtn:y.a,VCard:$.a,VCardActions:s.a,VCardText:s.b,VCardTitle:s.c,VContainer:D.a,VDialog:V.a,VDivider:b.a,VIcon:x.a,VList:L.a,VListItem:C.a,VListItemContent:l.b,VListItemTitle:l.d,VMenu:w.a,VSpacer:E.a,VToolbarTitle:A.a})}}]);
