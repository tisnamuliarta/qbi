(window.webpackJsonp=window.webpackJsonp||[]).push([[90,7,17,23,31],{1135:function(rt,S,t){"use strict";t.r(S);var x=function(){var f=this,u=f._self._c;return u("div",{staticClass:"scroll-container-min",attrs:{id:"parentContainer"}},[u("hot-table",{ref:"details",attrs:{root:f.detailsRoot,settings:f.settings}}),f._v(" "),u("LazyInventoryDialogItem",{ref:"dialogItem",attrs:{"view-data":!0,"show-add-btn":!1},on:{selectItems:f.selectItems}}),f._v(" "),u("AccountingDialogAccount",{ref:"dialogAccount",on:{selectItems:f.selectAccount}})],1)},z=[],B=t(24),K=t(17),M=t(73),st=t(4),Y=t(9),q=t(7),H=t(46),X=t(27),ot=t(655),L=t(693),T=t(1168),P=t(898),w=t(1162),O=t(1165),I=t(715),tt=t(672),U=t(783),J=t(899),A=t(915),Q=t(1170),it=t(1166),ct=t(1167),Z=t(901),et=t(690),ut=t(657);Object(L.c)(T.a),Object(L.c)(P.a),Object(L.c)(w.a),Object(L.c)(O.a),Object(I.c)(tt.a),Object(U.d)(J.a),Object(U.d)(A.a),Object(U.d)(Q.a),Object(U.d)(it.a),Object(U.d)(ct.a),Object(U.d)(Z.a),Object(U.d)(et.a);var V=function(f,u){u.row===-1&&f.target.nodeName==="TD"&&(f.stopImmediatePropagation(),f.stopPropagation(),this.deselectCell())},k={name:"TableDetailReceipt",components:{HotTable:ot.a},data:function(){return{commissionRate:1,plannedQty:1,settings:{licenseKey:"non-commercial-and-evaluation",currentRowClassName:"currentRow",currentColClassName:"currentCol",startRows:1,rowHeaders:!0,manualColumnResize:!0,rowHeights:28,viewportRowRenderingOffset:1e3,viewportColumnRenderingOffset:100,colWidths:80,persistentState:!0,width:"100%",height:"auto",stretchH:"all",hiddenColumns:{copyPasteEnabled:!1,indicator:!1,columns:[0,1,2]},beforeOnCellMouseDown:V,colHeaders:["Id","Base ID","account ID","","Item Code","Description","Qty","Units","Unit Price","Warehouse","Amount",""],columns:[{data:"id",wordWrap:!1},{data:"item_id",width:150,readOnly:!0,wordWrap:!1},{data:"account_id",width:150,readOnly:!0,wordWrap:!1},{width:20,wordWrap:!1,renderer:function(u,c,m,p,E,D,j){var b=null,R=window.detailReceipt;if(R.form.status!=="closed"&&R.form.status!=="cancel")return b=document.createElement("button"),b.type="button",b.innerHTML='<span class="mdi mdi-arrow-right-bold"></span>',b.className="btnNPB",b.value="Details",b.addEventListener("mousedown",function(N){var $=R.$refs.details.hotInstance.getDataAtRowProp(m,"whs_name");N.preventDefault(),R.$refs.dialogItem.openDialog(m,$)}),c.innerText="",c.appendChild(b),c}},{data:"code",width:120,readOnly:!0,wordWrap:!1},{data:"narration",width:250,wordWrap:!1},{data:"quantity",width:80,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0"}},{data:"unit",className:"htCenter",width:60,readOnly:!0,wordWrap:!1},{data:"amount",width:100,wordWrap:!1,type:"numeric",numericFormat:{pattern:"0,0.00"}},{data:"whs_name",width:100,height:26,wordWrap:!1,editor:"select",className:"htCenter",selectOptions:function(){var u=window.detailReceipt;return u.$auth.$storage.getState("warehouse")},visibleRows:5,strict:!0,filter:!1,allowInvalid:!1},{data:"sub_total",width:100,wordWrap:!1,type:"numeric",readOnly:!0,numericFormat:{pattern:"0,0.00"}},{width:20,wordWrap:!1,renderer:function(u,c,m,p,E,D,j){var b=null,R=window.detailReceipt;return R.form.status!=="closed"&&R.form.status!=="cancel"&&(b=document.createElement("button"),b.type="button",b.innerHTML='<span class="mdi mdi-delete"></span>',b.className="btnDelete",b.value="Details2",b.addEventListener("mousedown",function(N){N.preventDefault(),R.removeRow(m)}),c.innerText="",c.appendChild(b)),c}}]},detailsRoot:"detailsRoot",colHeaders:[],form:{}}},created:function(){this.setInstance()},methods:{setInstance:function(){window.detailReceipt=this},removeRow:function(f){this.$refs.details.hotInstance.alter("remove_row",f)},addLine:function(){var f=this.$refs.details.hotInstance.countRows();this.$refs.details.hotInstance.alter("insert_row",f+1,1)},updateTableSettings:function(f){this.$refs.details.hotInstance.updateSettings({licenseKey:"non-commercial-and-evaluation",height:"auto",beforeRefreshDimensions:function(){return!1},beforeOnCellMouseDown:V,afterRemoveRow:function(c,m,p,E){var D=window.detailReceipt;D.calculateTotal()},beforeRemoveRow:function(c,m,p,E){var D=window.detailReceipt,j=[];p.forEach(function(R,N){var $=D.$refs.details.hotInstance.getDataAtCell(R,0);$&&j.push($)});var b=D.$refs.details.hotInstance.countRows();return b===1&&D.$emit("calcTotal",{subTotal:0}),j.length>0&&D.$emit("removeData",{id:j}),!0},afterChange:function(c,m){var p=window.detailReceipt;if(c){var E=0;c.forEach(function(D){var j=Object(K.a)(D,4),b=j[0],R=j[1],N=j[2],$=j[3];E=R,(E==="quantity"||E==="amount")&&N!==$&&p.calculateTotal()})}}})},selectItems:function(f){var u=f.row,c=f.selected,m=this;this.$refs.details.hotInstance.batch(function(){c.forEach(function(p,E){var D=p.description?p.description:p.name;m.$refs.details.hotInstance.setDataAtRowProp([[u,"code",p.code],[u,"item_id",p.id],[u,"unit",p.unit],[u,"whs_name",p.whs_name],[u,"narration",D],[u,"quantity",1]]),u++})})},selectAccount:function(f){var u=f.row,c=f.selected;this.$refs.details.hotInstance.setDataAtRowProp(u,"account_id",c[0].id),this.$refs.details.hotInstance.setDataAtRowProp(u,"account_code",c[0].code)},setDataToDetails:function(f,u){var c=this,m=this;this.form=u,this.$refs.details.hotInstance.batch(function(){c.updateTableSettings();var p=u.line_items.length>0?u.line_items:f;if(m.$refs.details.hotInstance.loadData(p),u.line_items.length===0)for(var E=c.$refs.details.hotInstance.countRows(),D=0;D<E;D++)c.$refs.details.hotInstance.setDataAtRowProp(D,"whs_name",m.form.warehouse_name);c.$nuxt.$loading.finish()})},calculateTotal:function(){var f=this,u=this.$refs.details.hotInstance.countRows(),c=0;if(u>0)for(var m=function(D){f.$refs.details.hotInstance.batch(function(){var j=f.$refs.details.hotInstance.getDataAtRowProp(D,"quantity"),b=f.$refs.details.hotInstance.getDataAtRowProp(D,"amount"),R=j*b;c=c+j*b,f.$refs.details.hotInstance.setDataAtRowProp(D,"sub_total",R)})},p=0;p<u;p++)m(p);this.$emit("calcTotal",{subTotal:c})},getTaxRate:function(f){var u=this;return Object(B.a)(regeneratorRuntime.mark(function c(){var m;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,u.$axios.get("/api/financial/taxes/0",{params:{name:f}});case 2:return m=E.sent,E.abrupt("return",m.data.data.rows);case 4:case"end":return E.stop()}},c)}))()},getDataAtRowPro:function(f,u){return this.$refs.details.hotInstance.getDataAtRowProp(f,u)},countRows:function(){return this.$refs.details.hotInstance.countRows()},checkIfEmptyRow:function(f){return this.$refs.details.hotInstance.isEmptyRow(f)},getAddData:function(f){if(f==="0")for(var u=this.$refs.details.hotInstance.countRows(),c=0;c<u;c++)this.$refs.details.hotInstance.setDataAtRowProp(c,"id",null);return this.$refs.details.hotInstance.getSourceData()}}},nt=k,dt=t(50),y=Object(dt.a)(nt,x,z,!1,null,null,null),r=S.default=y.exports;installComponents(y,{AccountingDialogAccount:t(668).default})},600:function(rt,S,t){"use strict";var x=t(7),z=t.n(x),B=t(10),K=t.n(B),M=t(12),st=t.n(M),Y=t(13),q=t.n(Y),H=t(2),X=t(4),ot=t.n(X),L=t(34),T=t.n(L),P=t(51),w=t.n(P),O=t(28),I=t.n(O),tt=t(8),U=t.n(tt),J=t(21),A=t.n(J),Q=t(64),it=t.n(Q),ct=t(271),Z=t.n(ct),et=t(33),ut=t.n(et),V=t(272),k=t.n(V),nt=t(273),dt=t.n(nt),y=t(274),r=t.n(y),i=t(275),f=t.n(i),u=t(276),c=t.n(u),m=t(277),p=t.n(m),E=t(278),D=t.n(E),j=t(279),b=t.n(j),R=t(280),N=t.n(R),$=t(281),Ot=t.n($),ft=t(282),Ut=t.n(ft),Rt=t(283),Vt=t.n(Rt),Tt=t(284),Et=t.n(Tt),Ct=t(35),Kt=t.n(Ct),At=t(9),It=t.n(At),St=t(285),Ht=t.n(St),Mt=t(3),Dt=t(77),wt=t(1);function at(o,n){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);n&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable})),a.push.apply(a,e)}return a}function pt(o){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?at(Object(a),!0).forEach(function(e){Object(H.a)(o,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):at(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}var Wt=["sm","md","lg","xl"],ht=["start","end","center"];function gt(o,n){return Wt.reduce(function(a,e){return a[o+Object(wt.I)(e)]=n(),a},{})}var jt=function(n){return[].concat(ht,["baseline","stretch"]).includes(n)},_t=gt("align",function(){return{type:String,default:null,validator:jt}}),bt=function(n){return[].concat(ht,["space-between","space-around"]).includes(n)},G=gt("justify",function(){return{type:String,default:null,validator:bt}}),lt=function(n){return[].concat(ht,["space-between","space-around","stretch"]).includes(n)},Pt=gt("alignContent",function(){return{type:String,default:null,validator:lt}}),mt={align:Object.keys(_t),justify:Object.keys(G),alignContent:Object.keys(Pt)},Lt={align:"align",justify:"justify",alignContent:"align-content"};function xt(o,n,a){var e=Lt[o];if(a!=null){if(n){var l=n.replace(o,"");e+="-".concat(l)}return e+="-".concat(a),e.toLowerCase()}}var s=new Map;S.a=Mt.default.extend({name:"v-row",functional:!0,props:pt(pt(pt({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:jt}},_t),{},{justify:{type:String,default:null,validator:bt}},G),{},{alignContent:{type:String,default:null,validator:lt}},Pt),render:function(n,a){var e=a.props,l=a.data,d=a.children,h="";for(var v in e)h+=String(e[v]);var g=s.get(h);return g||function(){var _;g=[];var C;for(C in mt)mt[C].forEach(function(W){var vt=e[W],F=xt(C,W,vt);F&&g.push(F)});g.push((_={"no-gutters":e.noGutters,"row--dense":e.dense},Object(H.a)(_,"align-".concat(e.align),e.align),Object(H.a)(_,"justify-".concat(e.justify),e.justify),Object(H.a)(_,"align-content-".concat(e.alignContent),e.alignContent),_)),s.set(h,g)}(),n(e.tag,Object(Dt.a)(l,{staticClass:"row",class:g}),d)}})},601:function(rt,S,t){var x=t(378),z=t(47);rt.exports=function(B,K,M){return M.get&&x(M.get,K,{getter:!0}),M.set&&x(M.set,K,{setter:!0}),z.f(B,K,M)}},602:function(rt,S,t){"use strict";t.r(S);var x=t(165),z=t(250),B=t(87),K=t(596),M=t(577),st=t(248),Y=t(589),q=function(){var O=this,I=O._self._c;return I(K.a,{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:O.original,"max-width":O.maxWidth,transition:"dialog-top-transition"},model:{value:O.dialog,callback:function(U){O.dialog=U},expression:"dialog"}},[I(z.a,{attrs:{outlined:""}},[I(B.c,[I("span",{staticClass:"subtitle-2"},[O._v(O._s(O.dialogTitle))]),O._v(" "),I(Y.a),O._v(" "),I(x.a,{attrs:{icon:"",color:"red",dark:""},on:{click:function(U){return O.closeDialog()}}},[I(st.a,[O._v("mdi-close")])],1)],1),O._v(" "),I(M.a),O._v(" "),I(B.b,{staticClass:"pr-0 pl-0"},[O._t("content")],2),O._v(" "),I(M.a),O._v(" "),I(B.a,[O._t("addLine"),O._v(" "),I(Y.a),O._v(" "),O._t("saveData")],2)],1)],1)},H=[],X={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},ot=X,L=t(50),T=Object(L.a)(ot,q,H,!1,null,null,null),P=S.default=T.exports},646:function(rt,S,t){"use strict";t.r(S);var x=t(165),z=t(250),B=t(595),K=t(911),M=t(248),st=t(249),Y=t(166),q=t(31),H=t(578),X=t(600),ot=t(592),L=t(575),T=t(21),P=t(270),w=function(){var r=this,i=r._self._c;return i(X.a,[i(B.a,{staticClass:"mt-0",attrs:{cols:"12"}},[i(z.a,{attrs:{outlined:""}},[i(ot.a,{directives:[{name:"show",rawName:"v-show",value:r.loading,expression:"loading"}],attrs:{type:"table"}}),r._v(" "),i(K.a,{directives:[{name:"show",rawName:"v-show",value:!r.loading,expression:"!loading"}],class:r.viewData?"elevation-0":"elevation-1",attrs:{"mobile-breakpoint":0,headers:r.headers,items:r.allData,loading:r.loading,"single-select":r.viewData,"show-select":"","fixed-header":"",search:r.search,height:r.viewData?"60vh":"70vh",dense:"","footer-props":{"items-per-page-options":[250,500,-1]}},scopedSlots:r._u([{key:"top",fn:function(){return[r.viewData?r._e():i("div",{staticClass:"pl-4 pt-2"},[i("span",{staticClass:"font-weight-medium text-h6"},[r._v(r._s(r.$t("Chart Of Accounts"))+`
            `)])]),r._v(" "),i("LazyMainToolbar",{attrs:{"document-status":r.documentStatus,"search-status":r.searchStatus,"item-search":r.itemSearch,"search-item":r.searchItem,search:r.search,"show-zero-qty":!0,title:"Chart of Accounts","show-batch-action":"","show-new-data":"","show-filter":"","show-search-filter":!1,"new-data-text":"New Account"},on:{emitData:r.emitData,newData:r.newData,getDataFromApi:r.getDataFromApi},scopedSlots:r._u([{key:"search",fn:function(){return[i(L.a,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:r.search,callback:function(m){r.search=m},expression:"search"}})]},proxy:!0}])})]},proxy:!0},{key:"item.balance",fn:function(u){var c=u.item;return[r._v(`
          `+r._s(c.currency.currency_code+" "+r.$formatter.formatPrice(c.balance))+`
        `)]}},{key:"item.code",fn:function(u){var c=u.item;return[i("a",{on:{click:function(p){return r.viewItem(c)}}},[i("strong",{domProps:{textContent:r._s(c.code)}})])]}},{key:"item.id",fn:function(u){var c=u.item;return[i(x.a,{staticClass:"font-weight-bold text-right",attrs:{color:"secondary",text:"",small:""},on:{click:function(p){return r.actions(r.itemAction,c)}}},[r._v(`
            `+r._s(r.itemText)+`
          `)]),r._v(" "),i(H.a,{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:r._u([{key:"activator",fn:function(p){var E=p.on,D=p.attrs;return[i(x.a,r._g(r._b({attrs:{icon:""}},"v-btn",D,!1),E),[i(M.a,[r._v("mdi-menu-down")])],1)]}}],null,!0)},[r._v(" "),i(st.a,{attrs:{outlined:""}},r._l(r.items,function(m,p){return i(Y.a,{key:p,on:{click:function(D){return r.actions(m.action,c)}}},[i(q.b,[i(q.d,[r._v(r._s(m.text))])],1)],1)}),1)],1)]}}],null,!0),model:{value:r.selected,callback:function(u){r.selected=u},expression:"selected"}})],1),r._v(" "),i("LazyAccountingFormAccount",{ref:"forms",attrs:{"form-data":r.form,"form-title":r.formTitle,"button-title":r.buttonTitle,url:r.url},on:{getDataFromApi:r.getDataFromApi}})],1)],1)},O=[],I=t(8),tt=t(7),U=t(12),J=t(9),A=t(13),Q=t(2),it=t(10),ct=t(4);function Z(y,r){var i=Object.keys(y);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(y);r&&(f=f.filter(function(u){return Object.getOwnPropertyDescriptor(y,u).enumerable})),i.push.apply(i,f)}return i}function et(y){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Z(Object(i),!0).forEach(function(f){Object(Q.a)(y,f,i[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach(function(f){Object.defineProperty(y,f,Object.getOwnPropertyDescriptor(i,f))})}return y}var ut={name:"ChartOfAccount",props:{viewData:{type:Boolean,default:!1},formType:{type:String,default:""}},data:function(){return{selected:[],totalData:0,editedIndex:-1,loading:!0,allData:[],documentStatus:[],itemSearch:[],searchStatus:"",searchItem:"",search:"",show_zero_balance:null,form:{},defaultItem:{},options:{},items:[{text:"Edit",action:"edit"},{text:"Delete",action:"delete"}],itemText:"Edit",itemAction:"edit",url:"/api/financial/accounts",headers:[],title:"Chart Of Accounts",formTypeData:null}},head:function(){return{title:this.title}},computed:{formTitle:function(){return this.editedIndex===-1?"New Account":"Edit Account"},buttonTitle:function(){return this.editedIndex===-1?"Save":"Update"}},activated:function(){this.getDataFromApi()},mounted:function(){this.mappingHeader()},methods:{returnSelected:function(){return this.selected},viewItem:function(r){this.$router.push({path:"/app/accounting/detail",query:{id:r.id}})},setEmptyToSelected:function(r){this.selected=[],this.formTypeData=this.$auth.$storage.getState("formType"),this.getDataFromApi()},newData:function(){this.editedIndex=-1,this.$refs.forms.newData(this.form)},actions:function(r,i){r==="edit"?this.editItem(i):this.deleteItem(i)},editItem:function(r){this.editedIndex=this.allData.indexOf(r),this.$refs.forms.editItem(r,this.form)},deleteItem:function(r){var i=this,f=this;this.$swal({title:"Are you sure?",text:"The data will be permanently deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(u){u.value&&i.$axios.delete(f.url+"/"+r.id).then(function(c){i.$swal({type:"success",title:"Success...",text:"Row Deleted!"}),i.getDataFromApi()}).catch(function(c){i.$swal({type:"error",title:"Oops...",text:c.response.data.message})})})},emitData:function(r){this.documentStatus=r.documentStatus,this.itemSearch=r.itemSearch,this.searchStatus=r.searchStatus,this.searchItem=r.searchItem,this.search=r.search,this.filters=r.filters,this.show_zero_balance=r.show_zero_balance,this.getDataFromApi()},mappingHeader:function(){this.viewData?this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name",cellClass:"disable-wrap"},{text:"Account Type",value:"account_type",cellClass:"disable-wrap"},{text:"Category",value:"category.name"}]:this.headers=[{text:"Account Code",value:"code"},{text:"Account Name",value:"name"},{text:"Account Type",value:"account_type"},{text:"Category",value:"category.name"},{text:"Balance",value:"balance",cellClass:"disable-wrap",sortable:!1,filterable:!1},{text:"Actions",value:"id",align:"right",cellClass:"disable-wrap",sortable:!1,filterable:!1}]},searchData:function(r){this.search=r.search},getDataFromApi:function(){var r=this;this.loading=!0;var i=this,f="";this.formTypeData==="CS"?f="OPERATING_REVENUE":this.formTypeData==="CP"&&(f="OPERATING_EXPENSE, DIRECT_EXPENSE, OVERHEAD_EXPENSE, OTHER_EXPENSE, NON_CURRENT_ASSET, CURRENT_ASSET, INVENTORY");var u={searchItem:i.searchItem,documentStatus:i.documentStatus,searchStatus:i.searchStatus,search:i.search,show_zero_balance:i.show_zero_balance,type:f};this.$axios.get(this.url,{params:et(et({},i.options),u)}).then(function(c){r.loading=!1;var m=c.data;r.allData=m.data,r.totalData=m.total,r.itemSearch=m.filter,r.form=Object.assign({},m.form),r.defaultItem=Object.assign({},m.form)}).catch(function(c){r.loading=!1,r.$swal({type:"error",title:"Error",text:c.response.data.message})})}}},V=ut,k=t(50),nt=Object(k.a)(V,w,O,!1,null,null,null),dt=S.default=nt.exports},668:function(rt,S,t){"use strict";t.r(S);var x=t(165),z=t(587),B=t(248),K=function(){var T=this,P=T._self._c;return P("div",[P("DialogForm",{ref:"dialogForm",attrs:{"max-width":"1000px","dialog-title":T.$t("Chart Of Accounts"),"button-title":"Save",original:"top"},scopedSlots:T._u([{key:"content",fn:function(){return[P(z.a,[P("AccountingTableAccount",{ref:"tableItem",attrs:{"view-data":T.viewData,"form-type":T.formType,"show-add-btn":T.showAddBtn}})],1)]},proxy:!0},{key:"saveData",fn:function(){return[P(x.a,{attrs:{color:"green darken-1",dark:"",small:""},on:{click:T.selectData}},[T._v(`
        Select Item
        `),P(B.a,[T._v("mdi-arrow-down-right")])],1)]},proxy:!0}])})],1)},M=[],st=t(58),Y={name:"DialogItem",props:{viewData:{type:Boolean,default:!0},showAddBtn:{type:Boolean,default:!0},formType:{type:String,default:""}},data:function(){return{row:null}},methods:{openDialog:function(T,P){var w=this;this.$refs.dialogForm.openDialog(),setTimeout(function(){w.$refs.tableItem.setEmptyToSelected(P)},150),this.row=T},selectData:function(){this.$emit("selectItems",{row:this.row,selected:this.$refs.tableItem.returnSelected()}),this.$refs.dialogForm.closeDialog()}}},q=Y,H=t(50),X=Object(H.a)(q,K,M,!1,null,null,null),ot=S.default=X.exports;installComponents(X,{AccountingTableAccount:t(646).default,DialogForm:t(602).default})},672:function(rt,S,t){"use strict";t.d(S,"a",function(){return y});var x=t(608),z=t(606),B=t(4),K=t(111),M=t(627),st=t(12),Y=t(7),q=t(46),H=t(52),X=t(212),ot=t(33),L=t(35),T=t(875),P=t(607),w=t(603);function O(r){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},O(r)}function I(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function tt(r,i){for(var f=0;f<i.length;f++){var u=i[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(r,u.key,u)}}function U(r,i,f){return i&&tt(r.prototype,i),f&&tt(r,f),Object.defineProperty(r,"prototype",{writable:!1}),r}function J(){return typeof Reflect!="undefined"&&Reflect.get?J=Reflect.get.bind():J=function(i,f,u){var c=A(i,f);if(!!c){var m=Object.getOwnPropertyDescriptor(c,f);return m.get?m.get.call(arguments.length<3?i:u):m.value}},J.apply(this,arguments)}function A(r,i){for(;!Object.prototype.hasOwnProperty.call(r,i)&&(r=V(r),r!==null););return r}function Q(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&it(r,i)}function it(r,i){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,c){return u.__proto__=c,u},it(r,i)}function ct(r){var i=ut();return function(){var u=V(r),c;if(i){var m=V(this).constructor;c=Reflect.construct(u,arguments,m)}else c=u.apply(this,arguments);return Z(this,c)}}function Z(r,i){if(i&&(O(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return et(r)}function et(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ut(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function V(r){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},V(r)}var k="ht_editor_visible",nt="selectEditor",dt="select",y=function(r){Q(f,r);var i=ct(f);function f(){return I(this,f),i.apply(this,arguments)}return U(f,[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),Object(P.a)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(c){this.select.value=c}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="";var c=this.hot.getShortcutManager();c.setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",Object(P.v)(this.select,k)&&Object(P.K)(this.select,k),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var c=this;this.addHook("afterScrollHorizontally",function(){return c.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return c.refreshDimensions()}),this.addHook("afterColumnResize",function(){return c.refreshDimensions()}),this.addHook("afterRowResize",function(){return c.refreshDimensions()})}},{key:"prepare",value:function(c,m,p,E,D,j){var b=this;J(V(f.prototype),"prepare",this).call(this,c,m,p,E,D,j);var R=this.cellProperties.selectOptions,N;typeof R=="function"?N=this.prepareOptions(R(this.row,this.col,this.prop)):N=this.prepareOptions(R),Object(P.e)(this.select),Object(w.o)(N,function($,Ot){var ft=b.hot.rootDocument.createElement("OPTION");ft.value=Ot,Object(P.f)(ft,$),b.select.appendChild(ft)})}},{key:"prepareOptions",value:function(c){var m={};if(Array.isArray(c))for(var p=0,E=c.length;p<E;p++)m[c[p]]=c[p];else O(c)==="object"&&(m=c);return m}},{key:"refreshValue",value:function(){var c=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=c,this.setValue(c),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===T.b.EDITING){if(this.TD=this.getEditedCell(),!this.TD){this.close();return}var c=this.getEditedCellRect(),m=c.top,p=c.start,E=c.width,D=c.height,j=this.select.style;j.height="".concat(D,"px"),j.width="".concat(E,"px"),j.top="".concat(m,"px"),j[this.hot.isRtl()?"right":"left"]="".concat(p,"px"),j.margin="0px",Object(P.a)(this.select,k)}}},{key:"registerShortcuts",value:function(){var c=this,m=this.hot.getShortcutManager(),p=m.getContext("editor"),E={group:nt};this.isInFullEditMode()!==!1&&p.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var j=c.select.selectedIndex-1;j>=0&&(c.select[j].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var j=c.select.selectedIndex+1;j<=c.select.length-1&&(c.select[j].selected=!0)}}],E)}},{key:"unregisterShortcuts",value:function(){var c=this.hot.getShortcutManager(),m=c.getContext("editor");m.removeShortcutsByGroup(nt)}}],[{key:"EDITOR_TYPE",get:function(){return dt}}]),f}(T.a)},690:function(rt,S,t){"use strict";t.d(S,"a",function(){return xt});var x=t(212),z=t(4),B=t(33),K=t(630),M=t(35),st=t(36),Y=t(58),q=t(42),H=t(638),X=t(608),ot=t(606),L=t(111),T=t(627),P=t(12),w=t(7),O=t(46),I=t(52),tt=t(27),U=t(21),J=t(900),A=t(609),Q=t(665),it=t(9),ct=t(79),Z=t(607);function et(s,o){return dt(s)||nt(s,o)||V(s,o)||ut()}function ut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V(s,o){if(!!s){if(typeof s=="string")return k(s,o);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(s,o)}}function k(s,o){(o==null||o>s.length)&&(o=s.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=s[n];return a}function nt(s,o){var n=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var a=[],e=!0,l=!1,d,h;try{for(n=n.call(s);!(e=(d=n.next()).done)&&(a.push(d.value),!(o&&a.length===o));e=!0);}catch(v){l=!0,h=v}finally{try{!e&&n.return!=null&&n.return()}finally{if(l)throw h}}return a}}function dt(s){if(Array.isArray(s))return s}function y(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function r(s,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function i(s,o,n){return o&&r(s.prototype,o),n&&r(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}var f=function(){function s(o){y(this,s),this.hot=o,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}return i(s,[{key:"addRow",value:function(n,a){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={row:n};this.rows.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"addColumnHeadersRow",value:function(n){var a=this.hot.getColHeader(0);if(a!=null){var e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=n,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}},{key:"addColumn",value:function(n,a){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var e={col:n};this.columns.push(e),this.samples=a,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(n)!==null&&this.hot.view.appendColHeader(n,this.table.th),this.table.tBody.appendChild(this.createCol(n)),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}},{key:"getHeights",value:function(n){this.injected||this.injectTable(),Object(A.a)(this.rows,function(a){n(a.row,Object(Z.H)(a.table)-1)})}},{key:"getWidths",value:function(n){this.injected||this.injectTable(),Object(A.a)(this.columns,function(a){var e=a.table.getBoundingClientRect(),l=e.width;n(a.col,Math.ceil(l))})}},{key:"setSettings",value:function(n){this.settings=n}},{key:"setSetting",value:function(n,a){this.settings||(this.settings={}),this.settings[n]=a}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(n){return this.settings?this.settings[n]:null}},{key:"createColGroupsCol",value:function(){var n=this,a=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&a.appendChild(this.createColElement(-1)),this.samples.forEach(function(e){Object(A.a)(e.strings,function(l){a.appendChild(n.createColElement(l.col))})}),a}},{key:"createRow",value:function(n){var a=this,e=this.hot.rootDocument,l=e.createDocumentFragment(),d=e.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(n,d),l.appendChild(d)),this.samples.forEach(function(h){Object(A.a)(h.strings,function(v){var g=v.col,_=a.hot.getCellMeta(n,g);_.col=g,_.row=n;var C=a.hot.getCellRenderer(_),W=e.createElement("td");W.setAttribute("ghost-table",1),C(a.hot,W,n,g,a.hot.colToProp(g),v.value,_),l.appendChild(W)})}),l}},{key:"appendColumnHeadersRow",value:function(){var n=this,a=this.hot.rootDocument,e=a.createDocumentFragment(),l=[];if(this.hot.hasRowHeaders()){var d=a.createElement("th");l.push([-1,d]),e.appendChild(d)}this.samples.forEach(function(h){Object(A.a)(h.strings,function(v){var g=v.col,_=a.createElement("th");l.push([g,_]),e.appendChild(_)})}),this.table.tHead.appendChild(e),Object(A.a)(l,function(h){var v=et(h,2),g=v[0],_=v[1];n.hot.view.appendColHeader(g,_)})}},{key:"createCol",value:function(n){var a=this,e=this.hot.rootDocument,l=e.createDocumentFragment();return this.samples.forEach(function(d){Object(A.a)(d.strings,function(h){var v=h.row,g=a.hot.getCellMeta(v,n);g.col=n,g.row=v;var _=a.hot.getCellRenderer(g),C=e.createElement("td"),W=e.createElement("tr");C.setAttribute("ghost-table",1),_(a.hot,C,v,n,a.hot.colToProp(n),h.value,g),W.appendChild(C),l.appendChild(W)})}),l}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((n||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(n){var a=this.hot.rootDocument.createElement("col");return a.style.width="".concat(this.hot.view._wt.wtTable.getStretchedColumnWidth(n),"px"),a}},{key:"createTable",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),l=a.createElement("table"),d=a.createElement("thead"),h=a.createElement("tbody"),v=a.createElement("colgroup"),g=a.createElement("tr"),_=a.createElement("th");return this.isVertical()&&l.appendChild(v),this.isHorizontal()&&(g.appendChild(_),d.appendChild(g),l.style.tableLayout="auto",l.style.width="auto"),l.appendChild(d),this.isVertical()&&h.appendChild(g),l.appendChild(h),Object(Z.a)(l,n),e.appendChild(l),{fragment:e,table:l,tHead:d,tBody:h,colGroup:v,tr:g,th:_}}},{key:"createContainer",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=this.hot.rootDocument,e=a.createDocumentFragment(),l=a.createElement("div"),d="htGhostTable htAutoSize ".concat(n.trim());return Object(Z.a)(l,d),e.appendChild(l),{fragment:e,container:l}}},{key:"isVertical",value:function(){return!!(this.rows.length&&!this.columns.length)}},{key:"isHorizontal",value:function(){return!!(this.columns.length&&!this.rows.length)}}]),s}(),u=f,c=t(641),m=t(603),p=t(634),E=t(271),D=t(8),j=t(626),b=t(619);function R(s,o,n){return o in s?Object.defineProperty(s,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[o]=n,s}function N(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function $(s,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function Ot(s,o,n){return o&&$(s.prototype,o),n&&$(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}var ft=function(){function s(o){N(this,s),this.samples=null,this.dataFactory=o,this.customSampleCount=null,this.allowDuplicates=!1}return Ot(s,[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:s.SAMPLE_COUNT}},{key:"setSampleCount",value:function(n){this.customSampleCount=n}},{key:"setAllowDuplicates",value:function(n){this.allowDuplicates=n}},{key:"generateRowSamples",value:function(n,a){return this.generateSamples("row",a,n)}},{key:"generateColumnSamples",value:function(n,a){return this.generateSamples("col",a,n)}},{key:"generateSamples",value:function(n,a,e){var l=this,d=new Map,h=typeof e=="number"?{from:e,to:e}:e,v=h.from,g=h.to;return Object(p.c)(v,g,function(_){var C=l.generateSample(n,a,_);d.set(_,C)}),d}},{key:"generateSample",value:function(n,a,e){var l=this;if(n!=="row"&&n!=="col")throw new Error("Unsupported sample type");var d=new Map,h=n==="row"?"col":"row",v=[];return Object(p.c)(a.from,a.to,function(g){var _=n==="row"?l.dataFactory(e,g):l.dataFactory(g,e),C=_.value,W=_.bundleSeed,vt=typeof W=="string"&&W.length>0,F;vt?F=W:Object(m.l)(C)?F="".concat(Object.keys(C).length):Array.isArray(C)?F="".concat(C.length):F="".concat(Object(b.f)(C).length),d.has(F)||d.set(F,{needed:l.getSampleCount(),strings:[]});var yt=d.get(F);if(yt.needed){var Bt=v.indexOf(C)>-1;(!Bt||l.allowDuplicates||vt)&&(yt.strings.push(R({value:C},h,g)),v.push(C),yt.needed-=1)}}),d}}],[{key:"SAMPLE_COUNT",get:function(){return 3}}]),s}(),Ut=ft,Rt=t(644),Vt=t(893),Tt=t(697);function Et(s){return Et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Et(s)}function Ct(s,o){return Ht(s)||St(s,o)||At(s,o)||Kt()}function Kt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function At(s,o){if(!!s){if(typeof s=="string")return It(s,o);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return It(s,o)}}function It(s,o){(o==null||o>s.length)&&(o=s.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=s[n];return a}function St(s,o){var n=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(n!=null){var a=[],e=!0,l=!1,d,h;try{for(n=n.call(s);!(e=(d=n.next()).done)&&(a.push(d.value),!(o&&a.length===o));e=!0);}catch(v){l=!0,h=v}finally{try{!e&&n.return!=null&&n.return()}finally{if(l)throw h}}return a}}function Ht(s){if(Array.isArray(s))return s}function Mt(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function Dt(s,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function wt(s,o,n){return o&&Dt(s.prototype,o),n&&Dt(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}function at(){return typeof Reflect!="undefined"&&Reflect.get?at=Reflect.get.bind():at=function(o,n,a){var e=pt(o,n);if(!!e){var l=Object.getOwnPropertyDescriptor(e,n);return l.get?l.get.call(arguments.length<3?o:a):l.value}},at.apply(this,arguments)}function pt(s,o){for(;!Object.prototype.hasOwnProperty.call(s,o)&&(s=G(s),s!==null););return s}function Wt(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&ht(s,o)}function ht(s,o){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},ht(s,o)}function gt(s){var o=bt();return function(){var a=G(s),e;if(o){var l=G(this).constructor;e=Reflect.construct(a,arguments,l)}else e=a.apply(this,arguments);return jt(this,e)}}function jt(s,o){if(o&&(Et(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _t(s)}function _t(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function bt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}function G(s){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},G(s)}c.a.getSingleton().register("modifyAutoColumnSizeSeed");var lt="autoColumnSize",Pt=10,mt=new WeakMap,Lt="autoColumnSize",xt=function(s){Wt(n,s);var o=gt(n);function n(a){var e;return Mt(this,n),e=o.call(this,a),mt.set(_t(e),{cachedColumnHeaders:[]}),e.ghostTable=new u(e.hot),e.samplesGenerator=new Ut(function(l,d){var h=e.hot.getCellMeta(l,d),v="";h.spanned||(v=e.hot.getDataAtCell(l,d));var g="";return e.hot.hasHook("modifyAutoColumnSizeSeed")&&(g=e.hot.runHooks("modifyAutoColumnSizeSeed",g,h,v)),{value:v,bundleSeed:g}}),e.firstCalculation=!0,e.inProgress=!1,e.measuredColumns=0,e.columnWidthsMap=new Tt.a,e.hot.columnIndexMapper.registerMap(Lt,e.columnWidthsMap),e.addHook("beforeColumnResize",function(l,d,h){return e.onBeforeColumnResize(l,d,h)}),e}return wt(n,[{key:"isEnabled",value:function(){return this.hot.getSettings()[lt]!==!1&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var e=this;if(!this.enabled){var l=this.hot.getSettings()[lt];l&&l.useHeaders!==null&&l.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",l.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("beforeChangeRender",function(d){return e.onBeforeChange(d)}),this.addHook("afterFormulasValuesUpdate",function(d){return e.onAfterFormulasValuesUpdate(d)}),this.addHook("beforeViewRender",function(d){return e.onBeforeViewRender(d)}),this.addHook("modifyColWidth",function(d,h){return e.getColumnWidth(h,d)}),this.addHook("afterInit",function(){return e.onAfterInit()}),at(G(n.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var e=this.findColumnsWhereHeaderWasChanged();e.length&&(this.clearCache(e),this.calculateVisibleColumnsWidth()),at(G(n.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var e=this;at(G(n.prototype),"disablePlugin",this).call(this),this.addHook("beforeColumnResize",function(l,d,h){return e.onBeforeColumnResize(l,d,h)})}},{key:"calculateVisibleColumnsWidth",value:function(){var e=this.hot.countRows();if(!!e){var l=this.hot.renderCall,d=this.getFirstVisibleColumn(),h=this.getLastVisibleColumn();d===-1||h===-1||this.calculateColumnsWidth({from:d,to:h},void 0,l)}}},{key:"calculateColumnsWidth",value:function(){var e=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,v=typeof l=="number"?{from:l,to:l}:l,g=typeof d=="number"?{from:d,to:d}:d;Object(p.c)(v.from,v.to,function(_){var C=e.hot.toPhysicalColumn(_);if(C===null&&(C=_),h||e.columnWidthsMap.getValueAtIndex(C)===null&&!e.hot._getColWidthFromSettings(C)){var W=e.samplesGenerator.generateColumnSamples(_,g);Object(A.a)(W,function(vt){var F=Ct(vt,2),yt=F[0],Bt=F[1];return e.ghostTable.addColumn(yt,Bt)})}}),this.ghostTable.columns.length&&(this.hot.batchExecution(function(){e.ghostTable.getWidths(function(_,C){var W=e.hot.toPhysicalColumn(_);e.columnWidthsMap.setValueAtIndex(W,C)})},!0),this.measuredColumns=v.to+1,this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var e=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},d=0,h=this.hot.countCols()-1,v=null;this.inProgress=!0;var g=function C(){if(!e.hot){Object(Q.a)(v),e.inProgress=!1;return}e.calculateColumnsWidth({from:d,to:Math.min(d+n.CALCULATION_STEP,h)},l),d=d+n.CALCULATION_STEP+1,d<h?v=Object(Q.i)(C):(Object(Q.a)(v),e.inProgress=!1,e.hot.view.adjustElementsSize())},_=this.getSyncCalculationLimit();this.firstCalculation&&_>=0&&(this.calculateColumnsWidth({from:0,to:_},l),this.firstCalculation=!1,d=_+1),d<h?g():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var e=this.hot.getSettings()[lt],l=e&&Object(m.j)(e,"samplingRatio")?e.samplingRatio:void 0,d=e&&Object(m.j)(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;l&&!isNaN(l)&&this.samplesGenerator.setSampleCount(parseInt(l,10)),d&&this.samplesGenerator.setAllowDuplicates(d)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&this.hot.view._wt.wtTable.isVisible()&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var e=this.hot.getSettings()[lt],l=n.SYNC_CALCULATION_LIMIT,d=this.hot.countCols()-1;return Object(m.l)(e)&&(l=e.syncLimit,Object(Rt.a)(l)?l=Object(p.e)(d,l):l>>=0),Math.min(l,d)}},{key:"getColumnWidth",value:function(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=l;return h===void 0&&(h=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),d&&typeof h=="number"&&(h=Math.max(h,Vt.a.DEFAULT_WIDTH))),h}},{key:"getFirstVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var l=e.wtTable.getFirstVisibleColumn();if(l!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(l)}if(e.wtViewport.columnsRenderCalculator){var d=e.wtTable.getFirstRenderedColumn();if(d!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(d)}return-1}},{key:"getLastVisibleColumn",value:function(){var e=this.hot.view._wt;if(e.wtViewport.columnsVisibleCalculator){var l=e.wtTable.getLastVisibleColumn();if(l!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(l)}if(e.wtViewport.columnsRenderCalculator){var d=e.wtTable.getLastRenderedColumn();if(d!==-1)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(d)}return-1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var e=this.hot.getColHeader(),l=mt.get(this),d=l.cachedColumnHeaders,h=Object(A.d)(e,function(v,g,_){var C=d.length;return(C-1<_||d[_]!==g)&&v.push(_),C-1<_?d.push(g):d[_]=g,v},[]);return h}},{key:"clearCache",value:function(){var e=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];l.length?this.hot.batchExecution(function(){Object(A.a)(l,function(d){e.columnWidthsMap.setValueAtIndex(d,null)})},!0):this.columnWidthsMap.clear()}},{key:"isNeedRecalculate",value:function(){return!!Object(A.b)(this.columnWidthsMap.getValues().slice(0,this.measuredColumns),function(e){return e===null}).length}},{key:"onBeforeViewRender",value:function(){this.calculateVisibleColumnsWidth(),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()}},{key:"onAfterLoadData",value:function(){var e=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){e.hot&&e.recalculateAllColumnsWidth()},0)}},{key:"onBeforeChange",value:function(e){var l=this,d=Object(A.c)(e,function(h){var v=Ct(h,2),g=v[1];return l.hot.toPhysicalColumn(l.hot.propToCol(g))});this.clearCache(Array.from(new Set(d)))}},{key:"onBeforeColumnResize",value:function(e,l,d){var h=e;return d&&(this.calculateColumnsWidth(l,void 0,!0),h=this.getColumnWidth(l,void 0,!1)),h}},{key:"onAfterInit",value:function(){mt.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"onAfterFormulasValuesUpdate",value:function(e){var l=Object(A.b)(e,function(h){var v;return Object(b.b)((v=h.address)===null||v===void 0?void 0:v.col)}),d=Object(A.c)(l,function(h){return h.address.col});this.clearCache(Array.from(new Set(d)))}},{key:"destroy",value:function(){this.ghostTable.clean(),at(G(n.prototype),"destroy",this).call(this)}}],[{key:"PLUGIN_KEY",get:function(){return lt}},{key:"PLUGIN_PRIORITY",get:function(){return Pt}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}]),n}(J.a)}}]);
