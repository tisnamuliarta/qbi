(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{639:function(y,l,a){"use strict";a.r(l);var c=function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("v-dialog",{attrs:{persistent:"","max-width":"1000px",transition:"dialog-bottom-transition"},model:{value:s.dialogPermission,callback:function(e){s.dialogPermission=e},expression:"dialogPermission"}},[i("v-card",{attrs:{loading:s.loadingPermission}},[i("v-card-title",[i("span",{staticClass:"subtitle-2"},[s._v(`
        `+s._s(s.dialogTitle)+`
      `)]),s._v(" "),i("v-spacer"),s._v(" "),i("v-btn",{attrs:{color:"red darken-1",dark:"",icon:"",small:""},on:{click:s.closeDialogPermission}},[i("v-icon",[s._v("mdi-close-circle")])],1)],1),s._v(" "),i("v-card-text",[i("div",{staticClass:"scroll-container"},[i("LazyMasterPermissionList",{ref:"childDetails"})],1)]),s._v(" "),i("v-card-actions",[s.canAddData?i("v-btn",{staticClass:"white--text",attrs:{small:"",color:"orange darken-1"},on:{click:function(e){return s.$refs.childDetails.addLine()}}},[s._v(`
        Add Line
      `)]):s._e(),s._v(" "),i("v-spacer"),s._v(" "),s.canAddData?i("v-btn",{attrs:{color:"green darken-1",dark:"",small:"",loading:s.loadingPermission},on:{click:function(e){return s.saveRolePermission()}}},[s._v(`
        Save
      `)]):s._e()],1)],1)],1)},f=[],T=a(4),h={name:"DialogPermission",data:function(){return{loadingPermission:!1,dialogPermission:!1,dialogTitle:"",role:"",userRole:[],form:{},canAddData:!1,type:""}},mounted:function(){this.getPermissionList()},methods:{getPermissionList:function(){var t=this;this.$axios.get("/api/master/permissions").then(function(i){t.$auth.$storage.setLocalStorage("permission_list",i.data.data.simple)})},openDialogPermission:function(t,i){this.dialogTitle=i,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},t),this.canAddData=!0,this.getPermissionUser(t),this.type="user"},getPermissionUser:function(t){var i=this;this.userRole=null,this.$axios.get("/api/master/user/permission",{params:{form:t}}).then(function(e){i.$refs.childDetails.setDataToDetails(e.data.data.rows)}).finally(function(e){i.loadingPermission=!1})},closeDialogPermission:function(){this.dialogPermission=!1,this.userRole=[],this.canAddData=!1},openRolePermissions:function(t,i,e){var o=this,V=this;this.type=e,this.dialogTitle=i,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},t);var r="";e==="user"?r="/api/master/user/roles":(this.canAddData=!0,r="/api/master/permission-role"),this.$axios.get(r,{params:{form:this.form}}).then(function(d){V.$refs.childDetails.setDataToDetails(d.data.data.rows),o.loadingPermission=!1}).finally(function(d){o.loadingPermission=!1})},changeTab:function(t){var i=this;this.loadingPermission=!0,this.$axios.post("/api/master/permission-role",{form:t}).then(function(e){i.$refs.childDetails.setDataToDetails(e.data.data.rows)}).finally(function(e){i.loadingPermission=!1})},getRolePermissionUser:function(t){var i=this;this.$axios.post("/api/master/user/role-permission",{item:t}).then(function(e){i.$refs.childDetails.setDataToDetails(e.data.data.rows)}).finally(function(e){i.loadingPermission=!1})},getPermissionRole:function(t){var i=this;this.$axios.post("/api/master/permission-role",{form:this.form}).then(function(e){i.$refs.childDetails.setDataToDetails(e.data.data.rows)}).finally(function(e){i.loadingPermission=!1})},saveRolePermission:function(){var t=this;this.loadingPermission=!0;var i=this.$refs.childDetails.getAddData(),e="";this.type==="user"?e="/api/master/user/permission":e="/api/master/permission-role",this.$axios.post(e,{details:i,form:this.form}).then(function(o){t.$swal({icon:"success",title:"Success",text:o.data.message}),t.type==="user"?t.getPermissionUser(t.form):t.getPermissionRole(t.form)}).catch(function(o){t.$swal({icon:"error",title:"Error",text:o.response.data.message})}).finally(function(o){t.loadingPermission=!1})}}},g=h,u=a(50),v=a(51),P=a.n(v),p=a(164),D=a(247),n=a(88),$=a(591),x=a(246),R=a(589),m=Object(u.a)(g,c,f,!1,null,null,null),C=l.default=m.exports;P()(m,{VBtn:p.a,VCard:D.a,VCardActions:n.a,VCardText:n.b,VCardTitle:n.c,VDialog:$.a,VIcon:x.a,VSpacer:R.a})}}]);
