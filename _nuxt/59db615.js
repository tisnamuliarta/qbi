(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{636:function(v,s,r){"use strict";r.r(s);var l=function(){var n=this,a=n.$createElement,e=n._self._c||a;return e("div",[e("dropzone",{ref:"attachment",attrs:{id:"attachment",options:n.options,"destroy-dropzone":!0},on:{"vdropzone-sending":function(t,o,i){return n.sendingParams(t,o,i)},"vdropzone-success":function(t,o){return n.reloadAttachment(t,o)},"vdropzone-error":function(t,o,i){return n.handleError(t,o,i)}}})],1)},d=[],g=r(59),c=r(648),u=r.n(c),w=r(649),h={name:"FieldUpload",components:{Dropzone:u.a},props:{formType:{type:String,default:""},formData:{type:Object,default:function(){return{}}}},data:function(){return{showLoadingAttachment:!1,form:this.formData,options:{url:window.location.protocol+"//"+window.location.hostname+"/qb-core/api/document-files",timeout:9e9,addRemoveLinks:!0,withCredentials:!0,thumbnailWidth:50,thumbnailHeight:50,acceptedFiles:"image/*",dictDefaultMessage:"<span class='mdi mdi-cloud-upload'></span> UPLOAD HERE",headers:{Authorization:this.$auth.$storage.getLocalStorage("_token.local")}}}},methods:{sendingParams:function(a,e,t){var o=this.form.id!==0?this.form.id:this.form.temp_id;t.append("temp_id",o),t.append("type",this.formType)},handleError:function(a,e,t){this.$swal({type:"error",title:"Error...",text:e.message})},reloadAttachment:function(a,e){var t=this;e.errors?this.$swal({type:"error",title:"Oops...",text:e.message}):(setTimeout(function(){t.getFiles()},300),this.$swal({type:"success",title:"Success...",text:"Attachment uploaded!"}))},getFiles:function(){var a=this;this.showLoadingAttachment=!0;var e=this,t=this.form.id?this.form.id:this.form.temp_id;this.$axios.get(e.options.url,{params:{type:this.formType,temp_id:t}}).then(function(o){a.$emit("eventGetFiles",{total:o.data.data.total,row:o.data.data.rows}),e.showLoadingAttachment=!1}).catch(function(o){a.showLoadingAttachment=!1,a.$swal({type:"error",title:"Error...",text:o.response.message})})},deleteFile:function(a){var e=this,t=this;this.$swal({title:"Are you sure?",text:"The file will be permanently deleted",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(o){o.value&&e.$axios.delete(t.options.url,{params:{id:a.id}}).then(function(i){e.$swal({type:"success",title:"Success...",text:"Attachment Deleted!"}),t.getFiles()}).catch(function(i){e.$swal({type:"error",title:"Oops...",text:i.response.data.message})})})}}},m=h,p=r(50),f=Object(p.a)(m,l,d,!1,null,null,null),y=s.default=f.exports}}]);
