(window.webpackJsonp=window.webpackJsonp||[]).push([[87,28,67],{603:function(t,e,o){"use strict";o.r(e);var n={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""},original:{type:String,default:null}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},r=o(50),l=o(51),c=o.n(l),d=o(164),m=o(248),h=o(88),f=o(595),v=o(576),x=o(247),D=o(593),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{"no-click-animation":"",persistent:"",scrollable:"",origin:t.original,"max-width":t.maxWidth,transition:"dialog-top-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"subtitle-2"},[t._v(t._s(t.dialogTitle))]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{icon:"",color:"red",dark:""},on:{click:function(e){return t.closeDialog()}}},[e("v-icon",[t._v("mdi-close-circle")])],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",{staticClass:"pr-0 pl-0"},[t._t("content")],2),t._v(" "),e("v-divider"),t._v(" "),e("v-card-actions",[t._t("addLine"),t._v(" "),e("v-spacer"),t._v(" "),t._t("saveData")],2)],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBtn:d.a,VCard:m.a,VCardActions:h.a,VCardText:h.b,VCardTitle:h.c,VDialog:f.a,VDivider:v.a,VIcon:x.a,VSpacer:D.a})},646:function(t,e,o){"use strict";o.r(e);o(4);var n={name:"DialogPermission",data:function(){return{loadingPermission:!1,dialogPermission:!1,dialogTitle:"",role:"",userRole:[],form:{},canAddData:!1,type:""}},mounted:function(){this.getPermissionList()},methods:{getPermissionList:function(){var t=this;this.$axios.get("/api/master/permissions").then((function(e){t.$auth.$storage.setState("permission_list",e.data.simple)}))},openDialogPermission:function(t,title){this.dialogTitle=title,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},t),this.canAddData=!0,this.getPermissionUser(t),this.type="user"},getPermissionUser:function(t){var e=this;this.userRole=null,this.$axios.get("/api/master/user/permission",{params:{form:t}}).then((function(t){e.$refs.childDetails.setDataToDetails(t.data.data)})).finally((function(t){e.loadingPermission=!1}))},closeDialogPermission:function(){this.dialogPermission=!1,this.userRole=[],this.canAddData=!1},openRolePermissions:function(t,title,e){var o=this,n=this;this.type=e,this.dialogTitle=title,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},t);var r="";"user"===e?r="/api/master/user/roles":(this.canAddData=!0,r="/api/master/permission-role"),this.$axios.get(r,{params:{form:this.form}}).then((function(t){n.$refs.childDetails.setDataToDetails(t.data.data),o.loadingPermission=!1})).finally((function(t){o.loadingPermission=!1}))},changeTab:function(t){var e=this;this.loadingPermission=!0,this.$axios.post("/api/master/permission-role",{form:t}).then((function(t){e.$refs.childDetails.setDataToDetails(t.data.data)})).finally((function(t){e.loadingPermission=!1}))},getRolePermissionUser:function(t){var e=this;this.$axios.post("/api/master/user/role-permission",{item:t}).then((function(t){e.$refs.childDetails.setDataToDetails(t.data.data)})).finally((function(t){e.loadingPermission=!1}))},getPermissionRole:function(t){var e=this;this.$axios.post("/api/master/permission-role",{form:this.form}).then((function(t){e.$refs.childDetails.setDataToDetails(t.data.data)})).finally((function(t){e.loadingPermission=!1}))},saveRolePermission:function(){var t=this;this.loadingPermission=!0;var details=this.$refs.childDetails.getAddData(),e="";e="user"===this.type?"/api/master/user/permission":"/api/master/permission-role",this.$axios.post(e,{details:details,form:this.form}).then((function(e){t.$swal({icon:"success",title:"Success",text:e.data.message}),"user"===t.type?t.getPermissionUser(t.form):t.getPermissionRole(t.form)})).catch((function(e){t.$swal({icon:"error",title:"Error",text:e.response.data.message})})).finally((function(e){t.loadingPermission=!1}))}}},r=o(50),l=o(51),c=o.n(l),d=o(164),m=o(248),h=o(88),f=o(595),v=o(247),x=o(593),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{persistent:"","no-click-animation":"",scrollable:"","max-width":"1000px",transition:"dialog-bottom-transition"},model:{value:t.dialogPermission,callback:function(e){t.dialogPermission=e},expression:"dialogPermission"}},[e("v-card",{attrs:{loading:t.loadingPermission}},[e("v-card-title",[e("span",{staticClass:"subtitle-2"},[t._v("\n          "+t._s(t.dialogTitle)+"\n        ")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"red darken-1",dark:"",icon:"",small:""},on:{click:t.closeDialogPermission}},[e("v-icon",[t._v("mdi-close-circle")])],1)],1),t._v(" "),e("v-card-text",[e("div",[e("LazyMasterPermissionList",{ref:"childDetails"})],1)]),t._v(" "),e("v-card-actions",[t.canAddData?e("v-btn",{staticClass:"white--text",attrs:{small:"",color:"orange darken-1"},on:{click:function(e){return t.$refs.childDetails.addLine()}}},[t._v("\n          Add Line\n        ")]):t._e(),t._v(" "),e("v-spacer"),t._v(" "),t.canAddData?e("v-btn",{attrs:{color:"green darken-1",dark:"",small:"",loading:t.loadingPermission},on:{click:function(e){return t.saveRolePermission()}}},[t._v("\n          Save\n        ")]):t._e()],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBtn:d.a,VCard:m.a,VCardActions:h.a,VCardText:h.b,VCardTitle:h.c,VDialog:f.a,VIcon:v.a,VSpacer:x.a})},773:function(t,e,o){"use strict";o.r(e);o(21),o(268),o(27),o(59),o(9),o(4);var n={name:"MasterUser",layout:"dashboard",data:function(){return{totalData:0,editedIndex:-1,loadNewBtn:!1,submitLoad:!1,statusProcessing:"insert",show:!1,dialog:!1,message:!1,loading:!0,loadingSync:!1,searchItem:"",searchRole:"",search:"",searchStatus:"",allData:[],itemRole:[],itemEntity:[],itemSearch:[],documentStatus:[],options:{},sub_id:{},url:"",form:{},defaultForm:{},headers:[{text:"Username",value:"username"},{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Enabled",value:"enabled"},{text:"Role",value:"role"},{text:"Action",value:"Action",align:"end"}]}},head:function(){return{title:"Master Users"}},computed:{formTitle:function(){return-1===this.editedIndex?"New User":"Edit User"}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},mounted:function(){var t=this;setTimeout((function(){t.refreshData()}),500)},methods:{emitData:function(data){this.documentStatus=data.documentStatus,this.itemSearch=data.itemSearch,this.searchStatus=data.searchStatus,this.searchItem=data.searchItem,this.search=data.search,this.filters=data.filters,this.getDataFromApi()},refreshData:function(){this.getDataFromApi(),this.getRole(),this.getEntity()},getRole:function(){var t=this;this.$axios.get("/api/master/roles").then((function(e){t.itemRole=e.data.data.simple})).catch((function(e){t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},getEntity:function(){var t=this;this.$axios.get("/api/entities").then((function(e){t.itemEntity=e.data.data.rows})).catch((function(e){t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},getDataFromApi:function(){var t=this;this.loading=!0;var e=this;this.$axios.get("/api/master/users",{params:{options:e.options,searchItem:e.searchItem,documentStatus:e.documentStatus,searchStatus:e.searchStatus,search:e.search}}).then((function(e){t.loading=!1,t.allData=e.data.data.rows,t.totalData=e.data.data.total,t.itemSearch=e.data.data.filter,t.form=Object.assign({},e.data.data.form),t.defaultForm=Object.assign({},e.data.data.form)})).catch((function(e){t.loading=!1,t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},newData:function(){var t=this;this.$refs.dialogForm.openDialog(),setTimeout((function(){t.form=Object.assign({},t.defaultForm),t.editedIndex=-1}),300),this.statusProcessing="insert"},editItem:function(t){var e=t;e.role=JSON.parse(e.role),this.statusProcessing="update",this.editedIndex=this.allData.indexOf(t),this.form=Object.assign({},e),this.$refs.dialogForm.openDialog(),this.insert=!1},copyItem:function(t){var e=t;e.role=JSON.parse(e.role),this.statusProcessing="copy",this.editedIndex=this.allData.indexOf(t),this.form=Object.assign({},e),this.$refs.dialogForm.openDialog(),this.insert=!1},close:function(){var t=this;this.statusProcessing="insert",this.dialog=!1,setTimeout((function(){t.form=Object.assign({},t.defaultForm),t.editedIndex=-1}),300)},save:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=this,form=this.form,o=this.statusProcessing;e.submitLoad=!0,"insert"===o||"copy"===o?this.store("post","/api/master/users",form,"insert",t):"update"===o&&this.store("put","/api/master/users/"+this.form.id,form,"update",t)},store:function(t,e,data,o){var n=this,r=this;r.submitLoad=!0,this.$axios({method:t,url:e,data:data}).then((function(t){n.dialog=!1,n.$swal({type:"success",title:"Success!",text:t.data.message}),n.$refs.dialogForm.closeDialog(),n.getDataFromApi(),r.submitLoad=!1})).catch((function(t){n.$swal({type:"error",title:"Error",text:t.response.data.message}),r.submitLoad=!1}))}}},r=n,l=o(50),c=o(51),d=o.n(c),m=o(637),h=o(164),f=o(907),v=o(621),x=o(620),D=o(247),_=o(616),y=o(632),P=o(591),$=o(898),w=o(575),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("v-layout",[e("v-flex",{attrs:{sm12:""}},[e("div",{staticClass:"mt-0"},[e("v-skeleton-loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mx-auto",attrs:{type:"table"}}),t._v(" "),e("v-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,headers:t.headers,items:t.allData,"items-per-page":20,options:t.options,"server-items-length":t.totalData,loading:t.loading,dense:"","footer-props":{"items-per-page-options":[20,50,100,-1]}},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"top",fn:function(){return[e("LazyMainToolbar",{staticClass:"has-border-bottom",attrs:{"document-status":t.documentStatus,"search-status":t.searchStatus,"item-search":t.itemSearch,"search-item":t.searchItem,search:t.search,filter:!1,title:"Users","title-button":"User"},on:{emitData:t.emitData,newData:t.newData}})]},proxy:!0},{key:"item.Action",fn:function(o){var n=o.item;return[e("v-btn",{attrs:{value:"left",small:"",icon:""},on:{click:function(e){return t.editItem(n)}}},[e("v-icon",{attrs:{left:""}},[t._v("\n                mdi-pencil-circle\n              ")])],1),t._v(" "),e("v-btn",{attrs:{value:"center",small:"",icon:""},on:{click:function(e){return t.copyItem(n)}}},[e("v-icon",{attrs:{left:""}},[t._v("\n                mdi-content-copy\n              ")])],1),t._v(" "),e("v-btn",{attrs:{value:"right",small:"",icon:""},on:{click:function(e){return t.$refs.dialogPermission.openDialogPermission(n,"Direct Permissions")}}},[e("v-icon",{attrs:{left:""}},[t._v("\n                mdi-playlist-edit\n              ")])],1)]}}],null,!0)})],1)]),t._v(" "),e("DialogForm",{ref:"dialogForm",attrs:{"max-width":"600px","dialog-title":t.formTitle,"button-title":"Save"},scopedSlots:t._u([{key:"content",fn:function(){return[e("v-form",[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{staticClass:"d-flex",attrs:{md12:""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-text-field",{attrs:{label:"Name",placeholder:"Name",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-text-field",{attrs:{label:"Username",placeholder:"Username",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-text-field",{attrs:{label:"E-mail",placeholder:"E-mail",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-autocomplete",{attrs:{items:t.itemRole,chips:"","deletable-chips":"","hide-no-data":"","small-chips":"",label:"Role",multiple:"",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}})],1),t._v(" "),e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-select",{attrs:{items:t.itemEntity,"hide-no-data":"",label:"Company",outlined:"",dense:"","item-text":"name","item-value":"id","hide-details":"auto",clearable:""},model:{value:t.form.entity_id,callback:function(e){t.$set(t.form,"entity_id",e)},expression:"form.entity_id"}})],1),t._v(" "),e("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[e("v-switch",{attrs:{inset:"",label:"Enabled"},model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}})],1)],1)],1)],1)],1)]},proxy:!0},{key:"saveData",fn:function(){return[e("v-btn",{attrs:{color:"green darken-1",small:"",dark:"",loading:t.submitLoad},on:{click:function(e){return t.save()}}},[t._v("\n          Save\n        ")])]},proxy:!0}])}),t._v(" "),e("MasterDialogPermission",{ref:"dialogPermission"})],1)}),[],!1,null,null,null);e.default=component.exports;d()(component,{DialogForm:o(603).default,MasterDialogPermission:o(646).default}),d()(component,{VAutocomplete:m.a,VBtn:h.a,VDataTable:f.a,VFlex:v.a,VForm:x.a,VIcon:D.a,VLayout:_.a,VSelect:y.a,VSkeletonLoader:P.a,VSwitch:$.a,VTextField:w.a})}}]);