(window.webpackJsonp=window.webpackJsonp||[]).push([[271,69],{600:function(x,g,s){var P=s(375),O=s(47);x.exports=function(E,j,D){return D.get&&P(D.get,j,{getter:!0}),D.set&&P(D.set,j,{setter:!0}),O.f(E,j,D)}},615:function(x,g,s){"use strict";var P=s(284),O=s.n(P),E=s(285);g.a=Object(E.a)("layout")},622:function(x,g,s){"use strict";var P=s(284),O=s.n(P),E=s(285);g.a=Object(E.a)("flex")},625:function(x,g,s){"use strict";var P=s(2),O=s(33),E=s.n(O),j=s(52),D=s.n(j),R=s(288),U=s.n(R),$=s(9),G=s.n($),K=s(4),A=s.n(K),W=s(10),w=s.n(W),L=s(59),S=s.n(L),B=s(79),v=s.n(B),a=s(8),i=s.n(a),o=s(7),h=s.n(o),C=s(12),T=s.n(C),I=s(13),F=s.n(I),J=s(5),H=s(99),Q=s(118);function N(c,n){var r=Object.keys(c);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(c);n&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable})),r.push.apply(r,u)}return r}function X(c){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?N(Object(r),!0).forEach(function(u){Object(P.a)(c,u,r[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(u){Object.defineProperty(c,u,Object.getOwnPropertyDescriptor(r,u))})}return c}g.a=Object(J.a)(H.a,Object(Q.b)("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(n){var r=Object.values(n).includes(!0);this.$emit("input",!r)},deep:!0,immediate:!0}},methods:{watchInput:function(n){var r=this,u=function(z){return z.$watch("hasError",function(b){r.$set(r.errorBag,z._uid,b)},{immediate:!0})},f={_uid:n._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?f.shouldValidate=n.$watch("shouldValidate",function(V){!V||r.errorBag.hasOwnProperty(n._uid)||(f.valid=u(n))}):f.valid=u(n),f},validate:function(){return this.inputs.filter(function(n){return!n.validate(!0)}).length===0},reset:function(){this.inputs.forEach(function(n){return n.reset()}),this.resetErrorBag()},resetErrorBag:function(){var n=this;this.lazyValidation&&setTimeout(function(){n.errorBag={}},0)},resetValidation:function(){this.inputs.forEach(function(n){return n.resetValidation()}),this.resetErrorBag()},register:function(n){this.inputs.push(n),this.watchers.push(this.watchInput(n))},unregister:function(n){var r=this.inputs.find(function(f){return f._uid===n._uid});if(!!r){var u=this.watchers.find(function(f){return f._uid===r._uid});u&&(u.valid(),u.shouldValidate()),this.watchers=this.watchers.filter(function(f){return f._uid!==r._uid}),this.inputs=this.inputs.filter(function(f){return f._uid!==r._uid}),this.$delete(this.errorBag,r._uid)}}},render:function(n){var r=this;return n("form",{staticClass:"v-form",attrs:X({novalidate:!0},this.attrs$),on:{submit:function(f){return r.$emit("submit",f)}}},this.$slots.default)}})},653:function(x,g,s){"use strict";s.r(g);var P=function(){var a=this,i=a._self._c;return i("v-dialog",{attrs:{persistent:"","no-click-animation":"",scrollable:"","max-width":"1000px",transition:"dialog-bottom-transition"},model:{value:a.dialogPermission,callback:function(h){a.dialogPermission=h},expression:"dialogPermission"}},[i("v-card",{attrs:{loading:a.loadingPermission}},[i("v-card-title",[i("span",{staticClass:"subtitle-2"},[a._v(`
          `+a._s(a.dialogTitle)+`
        `)]),a._v(" "),i("v-spacer"),a._v(" "),i("v-btn",{attrs:{color:"red darken-1",dark:"",icon:"",small:""},on:{click:a.closeDialogPermission}},[i("v-icon",[a._v("mdi-close-circle")])],1)],1),a._v(" "),i("v-card-text",[i("div",[i("LazyMasterPermissionList",{ref:"childDetails"})],1)]),a._v(" "),i("v-card-actions",[a.canAddData?i("v-btn",{staticClass:"white--text",attrs:{small:"",color:"orange darken-1"},on:{click:function(h){return a.$refs.childDetails.addLine()}}},[a._v(`
          Add Line
        `)]):a._e(),a._v(" "),i("v-spacer"),a._v(" "),a.canAddData?i("v-btn",{attrs:{color:"green darken-1",dark:"",small:"",loading:a.loadingPermission},on:{click:function(h){return a.saveRolePermission()}}},[a._v(`
          Save
        `)]):a._e()],1)],1)],1)},O=[],E=s(4),j={name:"DialogPermission",data:function(){return{loadingPermission:!1,dialogPermission:!1,dialogTitle:"",role:"",userRole:[],form:{},canAddData:!1,type:""}},mounted:function(){this.getPermissionList()},methods:{getPermissionList:function(){var a=this;this.$axios.get("/api/master/permissions").then(function(i){a.$auth.$storage.setState("permission_list",i.data.simple)})},openDialogPermission:function(a,i){this.dialogTitle=i,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},a),this.canAddData=!0,this.getPermissionUser(a),this.type="user"},getPermissionUser:function(a){var i=this;this.userRole=null,this.$axios.get("/api/master/user/permission",{params:{form:a}}).then(function(o){i.$refs.childDetails.setDataToDetails(o.data.data)}).finally(function(o){i.loadingPermission=!1})},closeDialogPermission:function(){this.dialogPermission=!1,this.userRole=[],this.canAddData=!1},openRolePermissions:function(a,i,o){var h=this,C=this;this.type=o,this.dialogTitle=i,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},a);var T="";o==="user"?T="/api/master/user/roles":(this.canAddData=!0,T="/api/master/permission-role"),this.$axios.get(T,{params:{form:this.form}}).then(function(I){C.$refs.childDetails.setDataToDetails(I.data.data),h.loadingPermission=!1}).finally(function(I){h.loadingPermission=!1})},changeTab:function(a){var i=this;this.loadingPermission=!0,this.$axios.post("/api/master/permission-role",{form:a}).then(function(o){i.$refs.childDetails.setDataToDetails(o.data.data)}).finally(function(o){i.loadingPermission=!1})},getRolePermissionUser:function(a){var i=this;this.$axios.post("/api/master/user/role-permission",{item:a}).then(function(o){i.$refs.childDetails.setDataToDetails(o.data.data)}).finally(function(o){i.loadingPermission=!1})},getPermissionRole:function(a){var i=this;this.$axios.post("/api/master/permission-role",{form:this.form}).then(function(o){i.$refs.childDetails.setDataToDetails(o.data.data)}).finally(function(o){i.loadingPermission=!1})},saveRolePermission:function(){var a=this;this.loadingPermission=!0;var i=this.$refs.childDetails.getAddData(),o="";this.type==="user"?o="/api/master/user/permission":o="/api/master/permission-role",this.$axios.post(o,{details:i,form:this.form}).then(function(h){a.$swal({icon:"success",title:"Success",text:h.data.message}),a.type==="user"?a.getPermissionUser(a.form):a.getPermissionRole(a.form)}).catch(function(h){a.$swal({icon:"error",title:"Error",text:h.response.data.message})}).finally(function(h){a.loadingPermission=!1})}}},D=j,R=s(50),U=s(51),$=s.n(U),G=s(164),K=s(248),A=s(88),W=s(595),w=s(247),L=s(593),S=Object(R.a)(D,P,O,!1,null,null,null),B=g.default=S.exports;$()(S,{VBtn:G.a,VCard:K.a,VCardActions:A.a,VCardText:A.b,VCardTitle:A.c,VDialog:W.a,VIcon:w.a,VSpacer:L.a})},938:function(x,g,s){"use strict";s.r(g);var P=s(21),O=s(268),E=s(27),j=s(7),D=s(46),R=function(){var t=this,e=t._self._c;return e("v-layout",[e("v-flex",{attrs:{sm12:"",md12:""}},[e("div",{staticClass:"mt-0"},[e("v-data-table",{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,headers:t.headers,items:t.allData,"items-per-page":20,options:t.options,"server-items-length":t.totalData,loading:t.loading,"show-select":"",dense:"","fixed-header":"",height:"70vh","footer-props":{"items-per-page-options":[20,50,100,-1]}},on:{"update:options":function(m){t.options=m}},scopedSlots:t._u([{key:"top",fn:function(){return[e("div",{staticClass:"pl-4 pt-2"},[e("span",{staticClass:"font-weight-medium text-h6"},[t._v("Master Roles")])]),t._v(" "),e("LazyMainToolbar",{staticClass:"has-border-bottom",attrs:{"document-status":t.documentStatus,"search-status":t.searchStatus,"item-search":t.itemSearch,"search-item":t.searchItem,search:t.search,filter:!1,title:"Roles","title-button":"Roles","show-back-link":"","show-new-data":"","show-batch-action":"","new-data-text":"New Role"},on:{emitData:t.emitData,newData:t.newData,getDataFromApi:t.getDataFromApi}})]},proxy:!0},{key:"item.ACTIONS",fn:function(m){var _=m.item;return[e("v-btn",{staticClass:"font-weight-bold text-right",attrs:{color:"secondary",text:"",small:""},on:{click:function(p){return t.actions(t.itemAction,_)}}},[t._v(`
              `+t._s(t.itemText)+`
            `)]),t._v(" "),e("v-menu",{attrs:{transition:"slide-y-transition",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(p){var M=p.on,Y=p.attrs;return[e("v-btn",t._g(t._b({attrs:{color:"black",dark:"",icon:""}},"v-btn",Y,!1),M),[e("v-icon",[t._v("mdi-menu-down")])],1)]}}],null,!0)},[t._v(" "),e("v-list",t._l(t.items,function(y,p){return e("v-list-item",{key:p,on:{click:function(Y){return t.actions(y.action,_)}}},[e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(y.text))])],1)],1)}),1)],1)]}}],null,!0)})],1)]),t._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog,callback:function(m){t.dialog=m},expression:"dialog"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),e("v-card-text",[e("v-form",[e("v-layout",{attrs:{wrap:""}},[t.message?e("v-flex",{attrs:{xs12:""}},[e("div",{staticClass:"red darken-2 text-xs-center"},[e("span",{staticClass:"white--text"},[t._v(t._s(t.message))])])]):t._e(),t._v(" "),e("v-flex",{staticClass:"d-flex",attrs:{md12:""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{staticClass:"pa-2",attrs:{md12:""}},[e("v-text-field",{attrs:{label:"Role Name",placeholder:"Role Name",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.name,callback:function(m){t.$set(t.form,"name",m)},expression:"form.name"}})],1),t._v(" "),e("v-flex",{staticClass:"pa-2",attrs:{md12:""}},[e("v-text-field",{attrs:{label:"Description",placeholder:"Description",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.description,callback:function(m){t.$set(t.form,"description",m)},expression:"form.description"}})],1)],1)],1)],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"red darken-1",text:"",small:""},on:{click:function(m){t.dialog=!1}}},[t._v(`
            Close
          `)]),t._v(" "),e("v-btn",{attrs:{color:"green darken-1",dark:"",small:"",loading:t.submitLoad},on:{click:function(m){return t.save()}}},[t._v(`
            Save
          `)])],1)],1)],1),t._v(" "),e("MasterDialogPermission",{ref:"dialogPermission"})],1)},U=[],$=s(8),G=s(9),K=s(4),A=s(12),W=s(10),w=s(13),L=s(2),S=s(59);function B(d,t){var e=Object.keys(d);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(d);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(d,m).enumerable})),e.push.apply(e,l)}return e}function v(d){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?B(Object(e),!0).forEach(function(l){Object(L.a)(d,l,e[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(e)):B(Object(e)).forEach(function(l){Object.defineProperty(d,l,Object.getOwnPropertyDescriptor(e,l))})}return d}var a={name:"MasterRole",data:function(){return{totalData:0,editedIndex:-1,loadNewBtn:!1,submitLoad:!1,dialogWindow:!1,statusProcessing:"insert",dialog:!1,message:!1,loading:!0,insertDivision:!0,insert:!0,items:[{text:"Edit",action:"edit"},{text:"Direct Permissions",action:"permissions"}],itemText:"",itemAction:"",documentStatus:[],itemSearch:[],searchStatus:"",searchItem:"",search:"",loadingPermission:!0,allData:[],department:{},form:{id:null,name:null,description:null},defaultItem:{id:null,name:null,description:null},options:{},optionDivision:{},headers:[{text:"Role Name",value:"name"},{text:"Description",value:"description"},{text:"Guard",value:"guard_name"},{text:"Action",value:"ACTIONS",align:"center"}]}},head:function(){return{title:"Master Roles"}},computed:{formTitle:function(){return this.editedIndex===-1?"New":"Edit"}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},activated:function(){this.getDataFromApi(),this.itemText=this.items[0].text,this.itemAction=this.items[0].action},methods:{actions:function(t,e){t==="edit"?this.editItem(e):this.$refs.dialogPermission.openRolePermissions(e,"Role Permissions","role")},emitData:function(t){this.documentStatus=t.documentStatus,this.itemSearch=t.itemSearch,this.searchStatus=t.searchStatus,this.searchItem=t.searchItem,this.search=t.search,this.filters=t.filters,this.getDataFromApi()},getDataFromApi:function(){var t=this;this.loading=!0;var e=this,l={searchItem:e.searchItem,documentStatus:e.documentStatus,searchStatus:e.searchStatus,search:e.search};this.$axios.get(this.url,{params:v(v({},e.options),l)}).then(function(m){t.loading=!1,t.allData=m.data.data,t.totalData=m.data.total}).catch(function(m){t.loading=!1,t.$swal({type:"error",title:"Error",text:m.response.data.message})})},newData:function(){this.dialog=!0,this.statusProcessing="insert",this.form=Object.assign({},this.defaultItem),this.message=!1},editItem:function(t){this.editedIndex=this.allData.indexOf(t),this.form=Object.assign({},t),this.statusProcessing="update",this.dialog=!0,this.insert=!1},close:function(){var t=this;this.dialog=!1,this.statusProcessing="insert",setTimeout(function(){t.form=Object.assign({},t.defaultItem),t.editedIndex=-1},300)},save:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"all",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=this,m=this.form,_=this.statusProcessing,y={form:m,status:_};_==="insert"?(this.store("post","/api/master/roles",y,"insert",t),l.submitLoad=!1):_==="update"&&(this.store("put","/api/master/roles/"+this.form.id,y,"update",t),l.submitLoad=!1)},store:function(t,e,l,m){var _=this,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"all",p=this;p.submitLoad=!0,this.$axios({method:t,url:e,data:l}).then(function(M){M.data.status==="Error"?(_.$swal({type:"error",title:"Error",text:M.data.message}),p.submitLoad=!1):(_.dialog=!1,_.message=M.data.message,setTimeout(function(){return _.message=!1},8e3),_.getDataFromApi())}).catch(function(M){_.$swal({type:"error",title:"Error",text:M.response.data.message}),p.submitLoad=!1})}}},i=a,o=s(50),h=s(51),C=s.n(h),T=s(164),I=s(248),F=s(88),J=s(908),H=s(595),Q=s(622),N=s(625),X=s(247),c=s(615),n=s(249),r=s(165),u=s(35),f=s(577),V=s(593),z=s(574),b=Object(o.a)(i,R,U,!1,null,null,null),Z=g.default=b.exports;C()(b,{MasterDialogPermission:s(653).default}),C()(b,{VBtn:T.a,VCard:I.a,VCardActions:F.a,VCardText:F.b,VCardTitle:F.c,VDataTable:J.a,VDialog:H.a,VFlex:Q.a,VForm:N.a,VIcon:X.a,VLayout:c.a,VList:n.a,VListItem:r.a,VListItemContent:u.a,VListItemTitle:u.c,VMenu:f.a,VSpacer:V.a,VTextField:z.a})}}]);
