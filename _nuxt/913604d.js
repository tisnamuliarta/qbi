(window.webpackJsonp=window.webpackJsonp||[]).push([[93,69],{600:function(j,v,t){var _=t(375),D=t(47);j.exports=function(p,P,h){return h.get&&_(h.get,P,{getter:!0}),h.set&&_(h.set,P,{setter:!0}),D.f(p,P,h)}},615:function(j,v,t){"use strict";var _=t(284),D=t.n(_),p=t(285);v.a=Object(p.a)("layout")},622:function(j,v,t){"use strict";var _=t(284),D=t.n(_),p=t(285);v.a=Object(p.a)("flex")},625:function(j,v,t){"use strict";var _=t(2),D=t(33),p=t.n(D),P=t(52),h=t.n(P),B=t(288),I=t.n(B),T=t(9),L=t.n(T),x=t(4),E=t.n(x),y=t(10),$=t.n(y),O=t(59),R=t.n(O),U=t(79),u=t.n(U),e=t(8),o=t.n(e),l=t(7),m=t.n(l),V=t(12),M=t.n(V),C=t(13),K=t.n(C),A=t(5),W=t(99),f=t(118);function s(r,a){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);a&&(d=d.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),n.push.apply(n,d)}return n}function i(r){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?s(Object(n),!0).forEach(function(d){Object(_.a)(r,d,n[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(d){Object.defineProperty(r,d,Object.getOwnPropertyDescriptor(n,d))})}return r}v.a=Object(A.a)(W.a,Object(f.b)("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(a){var n=Object.values(a).includes(!0);this.$emit("input",!n)},deep:!0,immediate:!0}},methods:{watchInput:function(a){var n=this,d=function(b){return b.$watch("hasError",function(S){n.$set(n.errorBag,b._uid,S)},{immediate:!0})},c={_uid:a._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?c.shouldValidate=a.$watch("shouldValidate",function(g){!g||n.errorBag.hasOwnProperty(a._uid)||(c.valid=d(a))}):c.valid=d(a),c},validate:function(){return this.inputs.filter(function(a){return!a.validate(!0)}).length===0},reset:function(){this.inputs.forEach(function(a){return a.reset()}),this.resetErrorBag()},resetErrorBag:function(){var a=this;this.lazyValidation&&setTimeout(function(){a.errorBag={}},0)},resetValidation:function(){this.inputs.forEach(function(a){return a.resetValidation()}),this.resetErrorBag()},register:function(a){this.inputs.push(a),this.watchers.push(this.watchInput(a))},unregister:function(a){var n=this.inputs.find(function(c){return c._uid===a._uid});if(!!n){var d=this.watchers.find(function(c){return c._uid===n._uid});d&&(d.valid(),d.shouldValidate()),this.watchers=this.watchers.filter(function(c){return c._uid!==n._uid}),this.inputs=this.inputs.filter(function(c){return c._uid!==n._uid}),this.$delete(this.errorBag,n._uid)}}},render:function(a){var n=this;return a("form",{staticClass:"v-form",attrs:i({novalidate:!0},this.attrs$),on:{submit:function(c){return n.$emit("submit",c)}}},this.$slots.default)}})},653:function(j,v,t){"use strict";t.r(v);var _=function(){var e=this,o=e._self._c;return o("v-dialog",{attrs:{persistent:"","no-click-animation":"",scrollable:"","max-width":"1000px",transition:"dialog-bottom-transition"},model:{value:e.dialogPermission,callback:function(m){e.dialogPermission=m},expression:"dialogPermission"}},[o("v-card",{attrs:{loading:e.loadingPermission}},[o("v-card-title",[o("span",{staticClass:"subtitle-2"},[e._v(`
          `+e._s(e.dialogTitle)+`
        `)]),e._v(" "),o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"red darken-1",dark:"",icon:"",small:""},on:{click:e.closeDialogPermission}},[o("v-icon",[e._v("mdi-close-circle")])],1)],1),e._v(" "),o("v-card-text",[o("div",[o("LazyMasterPermissionList",{ref:"childDetails"})],1)]),e._v(" "),o("v-card-actions",[e.canAddData?o("v-btn",{staticClass:"white--text",attrs:{small:"",color:"orange darken-1"},on:{click:function(m){return e.$refs.childDetails.addLine()}}},[e._v(`
          Add Line
        `)]):e._e(),e._v(" "),o("v-spacer"),e._v(" "),e.canAddData?o("v-btn",{attrs:{color:"green darken-1",dark:"",small:"",loading:e.loadingPermission},on:{click:function(m){return e.saveRolePermission()}}},[e._v(`
          Save
        `)]):e._e()],1)],1)],1)},D=[],p=t(4),P={name:"DialogPermission",data:function(){return{loadingPermission:!1,dialogPermission:!1,dialogTitle:"",role:"",userRole:[],form:{},canAddData:!1,type:""}},mounted:function(){this.getPermissionList()},methods:{getPermissionList:function(){var e=this;this.$axios.get("/api/master/permissions").then(function(o){e.$auth.$storage.setState("permission_list",o.data.simple)})},openDialogPermission:function(e,o){this.dialogTitle=o,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},e),this.canAddData=!0,this.getPermissionUser(e),this.type="user"},getPermissionUser:function(e){var o=this;this.userRole=null,this.$axios.get("/api/master/user/permission",{params:{form:e}}).then(function(l){o.$refs.childDetails.setDataToDetails(l.data.data)}).finally(function(l){o.loadingPermission=!1})},closeDialogPermission:function(){this.dialogPermission=!1,this.userRole=[],this.canAddData=!1},openRolePermissions:function(e,o,l){var m=this,V=this;this.type=l,this.dialogTitle=o,this.dialogPermission=!0,this.loadingPermission=!0,this.form=Object.assign({},e);var M="";l==="user"?M="/api/master/user/roles":(this.canAddData=!0,M="/api/master/permission-role"),this.$axios.get(M,{params:{form:this.form}}).then(function(C){V.$refs.childDetails.setDataToDetails(C.data.data),m.loadingPermission=!1}).finally(function(C){m.loadingPermission=!1})},changeTab:function(e){var o=this;this.loadingPermission=!0,this.$axios.post("/api/master/permission-role",{form:e}).then(function(l){o.$refs.childDetails.setDataToDetails(l.data.data)}).finally(function(l){o.loadingPermission=!1})},getRolePermissionUser:function(e){var o=this;this.$axios.post("/api/master/user/role-permission",{item:e}).then(function(l){o.$refs.childDetails.setDataToDetails(l.data.data)}).finally(function(l){o.loadingPermission=!1})},getPermissionRole:function(e){var o=this;this.$axios.post("/api/master/permission-role",{form:this.form}).then(function(l){o.$refs.childDetails.setDataToDetails(l.data.data)}).finally(function(l){o.loadingPermission=!1})},saveRolePermission:function(){var e=this;this.loadingPermission=!0;var o=this.$refs.childDetails.getAddData(),l="";this.type==="user"?l="/api/master/user/permission":l="/api/master/permission-role",this.$axios.post(l,{details:o,form:this.form}).then(function(m){e.$swal({icon:"success",title:"Success",text:m.data.message}),e.type==="user"?e.getPermissionUser(e.form):e.getPermissionRole(e.form)}).catch(function(m){e.$swal({icon:"error",title:"Error",text:m.response.data.message})}).finally(function(m){e.loadingPermission=!1})}}},h=P,B=t(50),I=t(51),T=t.n(I),L=t(164),x=t(248),E=t(88),y=t(595),$=t(247),O=t(593),R=Object(B.a)(h,_,D,!1,null,null,null),U=v.default=R.exports;T()(R,{VBtn:L.a,VCard:x.a,VCardActions:E.a,VCardText:E.b,VCardTitle:E.c,VDialog:y.a,VIcon:$.a,VSpacer:O.a})},772:function(j,v,t){"use strict";t.r(v);var _=t(27),D=t(7),p=t(46),P=function(){var s=this,i=s._self._c;return i("v-layout",[i("v-flex",{attrs:{sm12:"",md12:""}},[i("div",{staticClass:"mt-0"},[i("v-data-table",{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,headers:s.headers,items:s.allData,"items-per-page":20,options:s.options,"server-items-length":s.totalData,loading:s.loading,"footer-props":{"items-per-page-options":[20,50,100,-1]}},on:{"update:options":function(a){s.options=a}},scopedSlots:s._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white",dense:""}},[i("v-toolbar-title",{staticClass:"hidden-xs-only"},[s._v("Master Roles")]),s._v(" "),i("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),s._v(" "),i("v-spacer"),s._v(" "),i("v-btn",{attrs:{icon:"",color:"green",dark:""},on:{click:function(n){return s.newData()}}},[i("v-icon",[s._v("mdi-plus-circle")])],1),s._v(" "),i("v-btn",{attrs:{loading:s.loading,icon:""},on:{click:s.getDataFromApi}},[i("v-icon",[s._v("mdi-refresh")])],1)],1)]},proxy:!0},{key:"item.ACTIONS",fn:function(a){var n=a.item;return[i("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"orange"},on:{click:function(c){return s.editItem(n)}}},[s._v(`
              mdi-pencil-circle
            `)]),s._v(" "),i("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"orange"},on:{click:function(c){return s.$refs.dialogPermission.openRolePermissions(n,"Role Permissions","role")}}},[s._v(`
              mdi-gate
            `)])]}}],null,!0)})],1)]),s._v(" "),i("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:s.dialog,callback:function(a){s.dialog=a},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[s._v(s._s(s.formTitle))])]),s._v(" "),i("v-card-text",[i("v-form",[i("v-layout",{attrs:{wrap:""}},[s.message?i("v-flex",{attrs:{xs12:""}},[i("div",{staticClass:"red darken-2 text-xs-center"},[i("span",{staticClass:"white--text"},[s._v(s._s(s.message))])])]):s._e(),s._v(" "),i("v-flex",{staticClass:"d-flex",attrs:{md12:""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"pa-2",attrs:{md12:""}},[i("v-text-field",{attrs:{label:"Role Name",placeholder:"Role Name",outlined:"",dense:"","hide-details":"auto"},model:{value:s.form.name,callback:function(a){s.$set(s.form,"name",a)},expression:"form.name"}})],1),s._v(" "),i("v-flex",{staticClass:"pa-2",attrs:{md12:""}},[i("v-text-field",{attrs:{label:"Description",placeholder:"Description",outlined:"",dense:"","hide-details":"auto"},model:{value:s.form.description,callback:function(a){s.$set(s.form,"description",a)},expression:"form.description"}})],1)],1)],1)],1)],1)],1),s._v(" "),i("v-card-actions",[i("v-spacer"),s._v(" "),i("v-btn",{attrs:{color:"red darken-1",text:"",small:""},on:{click:function(a){s.dialog=!1}}},[s._v(`
            Close
          `)]),s._v(" "),i("v-btn",{attrs:{color:"green darken-1",dark:"",small:"",loading:s.submitLoad},on:{click:function(a){return s.save()}}},[s._v(`
            Save
          `)])],1)],1)],1),s._v(" "),i("MasterDialogPermission",{ref:"dialogPermission"})],1)},h=[],B=t(59),I={name:"MasterRole",layout:"dashboard",data:function(){return{totalData:0,editedIndex:-1,loadNewBtn:!1,submitLoad:!1,dialogWindow:!1,statusProcessing:"insert",dialog:!1,message:!1,loading:!0,insertDivision:!0,insert:!0,loadingPermission:!0,allData:[],department:{},form:{id:null,name:null,description:null},defaultItem:{id:null,name:null,description:null},options:{},optionDivision:{},headers:[{text:"Role Name",value:"name"},{text:"Description",value:"description"},{text:"Guard",value:"guard_name"},{text:"Action",value:"ACTIONS",align:"center"}]}},head:function(){return{title:"Master Roles"}},computed:{formTitle:function(){return this.editedIndex===-1?"New":"Edit"}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},mounted:function(){this.getDataFromApi()},methods:{getDataFromApi:function(){var s=this;this.loading=!0;var i=this;this.$axios.get("/api/master/roles",{params:{options:i.options}}).then(function(r){s.loading=!1,s.allData=r.data.data.rows,s.totalData=r.data.data.total}).catch(function(r){s.loading=!1,s.$swal({type:"error",title:"Error",text:r.response.data.message})})},newData:function(){this.dialog=!0,this.statusProcessing="insert",this.form=Object.assign({},this.defaultItem),this.message=!1},editItem:function(s){this.editedIndex=this.allData.indexOf(s),this.form=Object.assign({},s),this.statusProcessing="update",this.dialog=!0,this.insert=!1},close:function(){var s=this;this.dialog=!1,this.statusProcessing="insert",setTimeout(function(){s.form=Object.assign({},s.defaultItem),s.editedIndex=-1},300)},save:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"all",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=this,a=this.form,n=this.statusProcessing,d={form:a,status:n};n==="insert"?(this.store("post","/api/master/roles",d,"insert",s),r.submitLoad=!1):n==="update"&&(this.store("put","/api/master/roles/"+this.form.id,d,"update",s),r.submitLoad=!1)},store:function(s,i,r,a){var n=this,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"all",c=this;c.submitLoad=!0,this.$axios({method:s,url:i,data:r}).then(function(g){g.data.status==="Error"?(n.$swal({type:"error",title:"Error",text:g.data.message}),c.submitLoad=!1):(n.dialog=!1,n.message=g.data.message,setTimeout(function(){return n.message=!1},8e3),n.getDataFromApi())}).catch(function(g){n.$swal({type:"error",title:"Error",text:g.response.data.message}),c.submitLoad=!1})}}},T=I,L=t(50),x=t(51),E=t.n(x),y=t(164),$=t(248),O=t(88),R=t(908),U=t(595),u=t(576),e=t(622),o=t(625),l=t(247),m=t(615),V=t(593),M=t(574),C=t(73),K=t(120),A=Object(L.a)(T,P,h,!1,null,null,null),W=v.default=A.exports;E()(A,{MasterDialogPermission:t(653).default}),E()(A,{VBtn:y.a,VCard:$.a,VCardActions:O.a,VCardText:O.b,VCardTitle:O.c,VDataTable:R.a,VDialog:U.a,VDivider:u.a,VFlex:e.a,VForm:o.a,VIcon:l.a,VLayout:m.a,VSpacer:V.a,VTextField:M.a,VToolbar:C.a,VToolbarTitle:K.a})}}]);
